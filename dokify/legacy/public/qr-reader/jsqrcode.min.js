(function(x){var Y={};Y.checkAndNudgePoints=function(Z,aa){var ab=j.width;var H=j.height;var ac=true;for(var Q=0;Q<aa.Length&&ac;Q+=2){var L=Math.floor(aa[Q]);
var M=Math.floor(aa[Q+1]);if(L<-1||L>ab||M<-1||M>H){throw"Error.checkAndNudgePoints ";}ac=false;if(L==-1){aa[Q]=0;ac=true;}else{if(L==ab){aa[Q]=ab-1;ac=true;
}}if(M==-1){aa[Q+1]=0;ac=true;}else{if(M==H){aa[Q+1]=H-1;ac=true;}}}ac=true;for(var Q=aa.Length-2;Q>=0&&ac;Q-=2){var L=Math.floor(aa[Q]);var M=Math.floor(aa[Q+1]);
if(L<-1||L>ab||M<-1||M>H){throw"Error.checkAndNudgePoints ";}ac=false;if(L==-1){aa[Q]=0;ac=true;}else{if(L==ab){aa[Q]=ab-1;ac=true;}}if(M==-1){aa[Q+1]=0;
ac=true;}else{if(M==H){aa[Q+1]=H-1;ac=true;}}}};Y.sampleGrid3=function(af,ad,ag){var H=new I(ad);var L=new Array(ad<<1);for(var aa=0;aa<ad;aa++){var Z=L.length;
var M=aa+0.5;for(var Q=0;Q<Z;Q+=2){L[Q]=(Q>>1)+0.5;L[Q+1]=M;}ag.transformPoints1(L);Y.checkAndNudgePoints(af,L);try{for(var Q=0;Q<Z;Q+=2){var ac=(Math.floor(L[Q])*4)+(Math.floor(L[Q+1])*j.width*4);
var ab=af[Math.floor(L[Q])+j.width*Math.floor(L[Q+1])];j.imagedata.data[ac]=ab?255:0;j.imagedata.data[ac+1]=ab?255:0;j.imagedata.data[ac+2]=0;j.imagedata.data[ac+3]=255;
if(ab){H.set_Renamed(Q>>1,aa);}}}catch(ae){throw"Error.checkAndNudgePoints";}}return H;};Y.sampleGridx=function(ag,Z,ac,ad,M,Q,am,an,ai,aj,aa,ab,H,L,ak,al,ae,af){var ah=V.quadrilateralToQuadrilateral(ac,ad,M,Q,am,an,ai,aj,aa,ab,H,L,ak,al,ae,af);
return Y.sampleGrid3(ag,Z,ah);};function t(H,L){this.count=H;this.dataCodewords=L;this.__defineGetter__("Count",function(){return this.count;});this.__defineGetter__("DataCodewords",function(){return this.dataCodewords;
});}function b(L,M,H){this.ecCodewordsPerBlock=L;if(H){this.ecBlocks=new Array(M,H);}else{this.ecBlocks=new Array(M);}this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock;
});this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks;});this.__defineGetter__("NumBlocks",function(){var Q=0;
for(var Z=0;Z<this.ecBlocks.length;Z++){Q+=this.ecBlocks[Z].length;}return Q;});this.getECBlocks=function(){return this.ecBlocks;};}function N(L,H,Q,Z,aa,ab){this.versionNumber=L;
this.alignmentPatternCenters=H;this.ecBlocks=new Array(Q,Z,aa,ab);var M=0;var ae=Q.ECCodewordsPerBlock;var af=Q.getECBlocks();for(var ac=0;ac<af.length;
ac++){var ad=af[ac];M+=ad.Count*(ad.DataCodewords+ae);}this.totalCodewords=M;this.__defineGetter__("VersionNumber",function(){return this.versionNumber;
});this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters;});this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords;
});this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber;});this.buildFunctionPattern=function(){var ai=this.DimensionForVersion;
var ak=new I(ai);ak.setRegion(0,0,9,9);ak.setRegion(ai-8,0,8,9);ak.setRegion(0,ai-8,9,8);var al=this.alignmentPatternCenters.length;for(var ag=0;ag<al;
ag++){var aj=this.alignmentPatternCenters[ag]-2;for(var ah=0;ah<al;ah++){if((ag==0&&(ah==0||ah==al-1))||(ag==al-1&&ah==0)){continue;}ak.setRegion(this.alignmentPatternCenters[ah]-2,aj,5,5);
}}ak.setRegion(6,9,1,ai-17);ak.setRegion(9,6,ai-17,1);if(this.versionNumber>6){ak.setRegion(ai-11,0,3,6);ak.setRegion(0,ai-11,6,3);}return ak;};this.getECBlocksForLevel=function(ag){return this.ecBlocks[ag.ordinal()];
};}N.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017);
N.VERSIONS=c();N.getVersionForNumber=function(H){if(H<1||H>40){throw"ArgumentException";}return N.VERSIONS[H-1];};N.getProvisionalVersionForDimension=function(H){if(H%4!=1){throw"Error getProvisionalVersionForDimension";
}try{return N.getVersionForNumber((H-17)>>2);}catch(L){throw"Error getVersionForNumber";}};N.decodeVersionInformation=function(Z){var H=4294967295;var M=0;
for(var aa=0;aa<N.VERSION_DECODE_INFO.length;aa++){var L=N.VERSION_DECODE_INFO[aa];if(L==Z){return this.getVersionForNumber(aa+7);}var Q=w.numBitsDiffering(Z,L);
if(Q<H){M=aa+7;H=Q;}}if(H<=3){return this.getVersionForNumber(M);}return null;};function c(){return new Array(new N(1,new Array(),new b(7,new t(1,19)),new b(10,new t(1,16)),new b(13,new t(1,13)),new b(17,new t(1,9))),new N(2,new Array(6,18),new b(10,new t(1,34)),new b(16,new t(1,28)),new b(22,new t(1,22)),new b(28,new t(1,16))),new N(3,new Array(6,22),new b(15,new t(1,55)),new b(26,new t(1,44)),new b(18,new t(2,17)),new b(22,new t(2,13))),new N(4,new Array(6,26),new b(20,new t(1,80)),new b(18,new t(2,32)),new b(26,new t(2,24)),new b(16,new t(4,9))),new N(5,new Array(6,30),new b(26,new t(1,108)),new b(24,new t(2,43)),new b(18,new t(2,15),new t(2,16)),new b(22,new t(2,11),new t(2,12))),new N(6,new Array(6,34),new b(18,new t(2,68)),new b(16,new t(4,27)),new b(24,new t(4,19)),new b(28,new t(4,15))),new N(7,new Array(6,22,38),new b(20,new t(2,78)),new b(18,new t(4,31)),new b(18,new t(2,14),new t(4,15)),new b(26,new t(4,13),new t(1,14))),new N(8,new Array(6,24,42),new b(24,new t(2,97)),new b(22,new t(2,38),new t(2,39)),new b(22,new t(4,18),new t(2,19)),new b(26,new t(4,14),new t(2,15))),new N(9,new Array(6,26,46),new b(30,new t(2,116)),new b(22,new t(3,36),new t(2,37)),new b(20,new t(4,16),new t(4,17)),new b(24,new t(4,12),new t(4,13))),new N(10,new Array(6,28,50),new b(18,new t(2,68),new t(2,69)),new b(26,new t(4,43),new t(1,44)),new b(24,new t(6,19),new t(2,20)),new b(28,new t(6,15),new t(2,16))),new N(11,new Array(6,30,54),new b(20,new t(4,81)),new b(30,new t(1,50),new t(4,51)),new b(28,new t(4,22),new t(4,23)),new b(24,new t(3,12),new t(8,13))),new N(12,new Array(6,32,58),new b(24,new t(2,92),new t(2,93)),new b(22,new t(6,36),new t(2,37)),new b(26,new t(4,20),new t(6,21)),new b(28,new t(7,14),new t(4,15))),new N(13,new Array(6,34,62),new b(26,new t(4,107)),new b(22,new t(8,37),new t(1,38)),new b(24,new t(8,20),new t(4,21)),new b(22,new t(12,11),new t(4,12))),new N(14,new Array(6,26,46,66),new b(30,new t(3,115),new t(1,116)),new b(24,new t(4,40),new t(5,41)),new b(20,new t(11,16),new t(5,17)),new b(24,new t(11,12),new t(5,13))),new N(15,new Array(6,26,48,70),new b(22,new t(5,87),new t(1,88)),new b(24,new t(5,41),new t(5,42)),new b(30,new t(5,24),new t(7,25)),new b(24,new t(11,12),new t(7,13))),new N(16,new Array(6,26,50,74),new b(24,new t(5,98),new t(1,99)),new b(28,new t(7,45),new t(3,46)),new b(24,new t(15,19),new t(2,20)),new b(30,new t(3,15),new t(13,16))),new N(17,new Array(6,30,54,78),new b(28,new t(1,107),new t(5,108)),new b(28,new t(10,46),new t(1,47)),new b(28,new t(1,22),new t(15,23)),new b(28,new t(2,14),new t(17,15))),new N(18,new Array(6,30,56,82),new b(30,new t(5,120),new t(1,121)),new b(26,new t(9,43),new t(4,44)),new b(28,new t(17,22),new t(1,23)),new b(28,new t(2,14),new t(19,15))),new N(19,new Array(6,30,58,86),new b(28,new t(3,113),new t(4,114)),new b(26,new t(3,44),new t(11,45)),new b(26,new t(17,21),new t(4,22)),new b(26,new t(9,13),new t(16,14))),new N(20,new Array(6,34,62,90),new b(28,new t(3,107),new t(5,108)),new b(26,new t(3,41),new t(13,42)),new b(30,new t(15,24),new t(5,25)),new b(28,new t(15,15),new t(10,16))),new N(21,new Array(6,28,50,72,94),new b(28,new t(4,116),new t(4,117)),new b(26,new t(17,42)),new b(28,new t(17,22),new t(6,23)),new b(30,new t(19,16),new t(6,17))),new N(22,new Array(6,26,50,74,98),new b(28,new t(2,111),new t(7,112)),new b(28,new t(17,46)),new b(30,new t(7,24),new t(16,25)),new b(24,new t(34,13))),new N(23,new Array(6,30,54,74,102),new b(30,new t(4,121),new t(5,122)),new b(28,new t(4,47),new t(14,48)),new b(30,new t(11,24),new t(14,25)),new b(30,new t(16,15),new t(14,16))),new N(24,new Array(6,28,54,80,106),new b(30,new t(6,117),new t(4,118)),new b(28,new t(6,45),new t(14,46)),new b(30,new t(11,24),new t(16,25)),new b(30,new t(30,16),new t(2,17))),new N(25,new Array(6,32,58,84,110),new b(26,new t(8,106),new t(4,107)),new b(28,new t(8,47),new t(13,48)),new b(30,new t(7,24),new t(22,25)),new b(30,new t(22,15),new t(13,16))),new N(26,new Array(6,30,58,86,114),new b(28,new t(10,114),new t(2,115)),new b(28,new t(19,46),new t(4,47)),new b(28,new t(28,22),new t(6,23)),new b(30,new t(33,16),new t(4,17))),new N(27,new Array(6,34,62,90,118),new b(30,new t(8,122),new t(4,123)),new b(28,new t(22,45),new t(3,46)),new b(30,new t(8,23),new t(26,24)),new b(30,new t(12,15),new t(28,16))),new N(28,new Array(6,26,50,74,98,122),new b(30,new t(3,117),new t(10,118)),new b(28,new t(3,45),new t(23,46)),new b(30,new t(4,24),new t(31,25)),new b(30,new t(11,15),new t(31,16))),new N(29,new Array(6,30,54,78,102,126),new b(30,new t(7,116),new t(7,117)),new b(28,new t(21,45),new t(7,46)),new b(30,new t(1,23),new t(37,24)),new b(30,new t(19,15),new t(26,16))),new N(30,new Array(6,26,52,78,104,130),new b(30,new t(5,115),new t(10,116)),new b(28,new t(19,47),new t(10,48)),new b(30,new t(15,24),new t(25,25)),new b(30,new t(23,15),new t(25,16))),new N(31,new Array(6,30,56,82,108,134),new b(30,new t(13,115),new t(3,116)),new b(28,new t(2,46),new t(29,47)),new b(30,new t(42,24),new t(1,25)),new b(30,new t(23,15),new t(28,16))),new N(32,new Array(6,34,60,86,112,138),new b(30,new t(17,115)),new b(28,new t(10,46),new t(23,47)),new b(30,new t(10,24),new t(35,25)),new b(30,new t(19,15),new t(35,16))),new N(33,new Array(6,30,58,86,114,142),new b(30,new t(17,115),new t(1,116)),new b(28,new t(14,46),new t(21,47)),new b(30,new t(29,24),new t(19,25)),new b(30,new t(11,15),new t(46,16))),new N(34,new Array(6,34,62,90,118,146),new b(30,new t(13,115),new t(6,116)),new b(28,new t(14,46),new t(23,47)),new b(30,new t(44,24),new t(7,25)),new b(30,new t(59,16),new t(1,17))),new N(35,new Array(6,30,54,78,102,126,150),new b(30,new t(12,121),new t(7,122)),new b(28,new t(12,47),new t(26,48)),new b(30,new t(39,24),new t(14,25)),new b(30,new t(22,15),new t(41,16))),new N(36,new Array(6,24,50,76,102,128,154),new b(30,new t(6,121),new t(14,122)),new b(28,new t(6,47),new t(34,48)),new b(30,new t(46,24),new t(10,25)),new b(30,new t(2,15),new t(64,16))),new N(37,new Array(6,28,54,80,106,132,158),new b(30,new t(17,122),new t(4,123)),new b(28,new t(29,46),new t(14,47)),new b(30,new t(49,24),new t(10,25)),new b(30,new t(24,15),new t(46,16))),new N(38,new Array(6,32,58,84,110,136,162),new b(30,new t(4,122),new t(18,123)),new b(28,new t(13,46),new t(32,47)),new b(30,new t(48,24),new t(14,25)),new b(30,new t(42,15),new t(32,16))),new N(39,new Array(6,26,54,82,110,138,166),new b(30,new t(20,117),new t(4,118)),new b(28,new t(40,47),new t(7,48)),new b(30,new t(43,24),new t(22,25)),new b(30,new t(10,15),new t(67,16))),new N(40,new Array(6,30,58,86,114,142,170),new b(30,new t(19,118),new t(6,119)),new b(28,new t(18,47),new t(31,48)),new b(30,new t(34,24),new t(34,25)),new b(30,new t(20,15),new t(61,16))));
}function V(H,Q,ab,L,Z,ac,M,aa,ad){this.a11=H;this.a12=L;this.a13=M;this.a21=Q;this.a22=Z;this.a23=aa;this.a31=ab;this.a32=ac;this.a33=ad;this.transformPoints1=function(ao){var ar=ao.length;
var ah=this.a11;var an=this.a12;var ap=this.a13;var ae=this.a21;var af=this.a22;var ag=this.a23;var aj=this.a31;var al=this.a32;var am=this.a33;for(var ai=0;
ai<ar;ai+=2){var aq=ao[ai];var at=ao[ai+1];var ak=ap*aq+ag*at+am;ao[ai]=(ah*aq+ae*at+aj)/ak;ao[ai+1]=(an*aq+af*at+al)/ak;}};this.transformPoints2=function(ae,ag){var ai=ae.length;
for(var af=0;af<ai;af++){var ah=ae[af];var aj=ag[af];var ak=this.a13*ah+this.a23*aj+this.a33;ae[af]=(this.a11*ah+this.a21*aj+this.a31)/ak;ag[af]=(this.a12*ah+this.a22*aj+this.a32)/ak;
}};this.buildAdjoint=function(){return new V(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21);
};this.times=function(ae){return new V(this.a11*ae.a11+this.a21*ae.a12+this.a31*ae.a13,this.a11*ae.a21+this.a21*ae.a22+this.a31*ae.a23,this.a11*ae.a31+this.a21*ae.a32+this.a31*ae.a33,this.a12*ae.a11+this.a22*ae.a12+this.a32*ae.a13,this.a12*ae.a21+this.a22*ae.a22+this.a32*ae.a23,this.a12*ae.a31+this.a22*ae.a32+this.a32*ae.a33,this.a13*ae.a11+this.a23*ae.a12+this.a33*ae.a13,this.a13*ae.a21+this.a23*ae.a22+this.a33*ae.a23,this.a13*ae.a31+this.a23*ae.a32+this.a33*ae.a33);
};}V.quadrilateralToQuadrilateral=function(M,ai,Q,aj,Z,ak,aa,al,af,L,ab,ah,am,ad,ae,H){var ag=this.quadrilateralToSquare(M,ai,Q,aj,Z,ak,aa,al);var ac=this.squareToQuadrilateral(af,L,ab,ah,am,ad,ae,H);
return ac.times(ag);};V.squareToQuadrilateral=function(ac,Z,ae,ab,ag,ad,ai,af){var al,ak,ah,aa,Q,L,aj,M,H;Q=af-ad;L=Z-ab+ad-af;if(Q==0&&L==0){return new V(ae-ac,ag-ae,ac,ab-Z,ad-ab,Z,0,0,1);
}else{al=ae-ag;ak=ai-ag;ah=ac-ae+ag-ai;aa=ab-ad;H=al*Q-ak*aa;aj=(ah*Q-ak*L)/H;M=(al*L-ah*aa)/H;return new V(ae-ac+aj*ae,ai-ac+M*ai,ac,ab-Z+aj*ab,af-Z+M*af,Z,aj,M,1);
}};V.quadrilateralToSquare=function(Z,M,ab,Q,H,aa,L,ac){return this.squareToQuadrilateral(Z,M,ab,Q,H,aa,L,ac).buildAdjoint();};function R(H,L){this.bits=H;
this.points=L;}function B(H){this.image=H;this.resultPointCallback=null;this.sizeOfBlackWhiteBlackRun=function(ae,af,ao,ap){var an=Math.abs(ap-af)>Math.abs(ao-ae);
if(an){var Z=ae;ae=af;af=Z;Z=ao;ao=ap;ap=Z;}var ah=Math.abs(ao-ae);var ai=Math.abs(ap-af);var ab=-ah>>1;var L=af<ap?1:-1;var al=ae<ao?1:-1;var am=0;for(var aj=ae,ak=af;
aj!=ao;aj+=al){var M=an?ak:aj;var Q=an?aj:ak;if(am==1){if(this.image[M+Q*j.width]){am++;}}else{if(!this.image[M+Q*j.width]){am++;}}if(am==3){var ac=aj-ae;
var ad=ak-af;return Math.sqrt((ac*ac+ad*ad));}ab+=ai;if(ab>0){if(ak==ap){break;}ak+=L;ab-=ah;}}var ag=ao-ae;var aa=ap-af;return Math.sqrt((ag*ag+aa*aa));
};this.sizeOfBlackWhiteBlackRunBothWays=function(M,Z,Q,aa){var L=this.sizeOfBlackWhiteBlackRun(M,Z,Q,aa);var ab=1;var ac=M-(Q-M);if(ac<0){ab=M/(M-ac);ac=0;
}else{if(ac>=j.width){ab=(j.width-1-M)/(ac-M);ac=j.width-1;}}var ad=Math.floor(Z-(aa-Z)*ab);ab=1;if(ad<0){ab=Z/(Z-ad);ad=0;}else{if(ad>=j.height){ab=(j.height-1-Z)/(ad-Z);
ad=j.height-1;}}ac=Math.floor(M+(ac-M)*ab);L+=this.sizeOfBlackWhiteBlackRun(M,Z,ac,ad);return L-1;};this.calculateModuleSizeOneWay=function(Z,Q){var L=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(Z.X),Math.floor(Z.Y),Math.floor(Q.X),Math.floor(Q.Y));
var M=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(Q.X),Math.floor(Q.Y),Math.floor(Z.X),Math.floor(Z.Y));if(isNaN(L)){return M/7;}if(isNaN(M)){return L/7;
}return(L+M)/14;};this.calculateModuleSize=function(M,Q,L){return(this.calculateModuleSizeOneWay(M,Q)+this.calculateModuleSizeOneWay(M,L))/2;};this.distance=function(Z,L){var Q=Z.X-L.X;
var M=Z.Y-L.Y;return Math.sqrt((Q*Q+M*M));};this.computeDimension=function(Q,Z,ab,aa){var L=Math.round(this.distance(Q,Z)/aa);var ac=Math.round(this.distance(Q,ab)/aa);
var M=((L+ac)>>1)+7;switch(M&3){case 0:M++;break;case 2:M--;break;case 3:throw"Error";}return M;};this.findAlignmentInRegion=function(aa,ab,ad,M){var L=Math.floor(M*aa);
var Z=Math.max(0,ab-L);var Q=Math.min(j.width-1,ab+L);if(Q-Z<aa*3){throw"Error";}var af=Math.max(0,ad-L);var ae=Math.min(j.height-1,ad+L);var ac=new A(this.image,Z,af,Q-Z,ae-af,aa,this.resultPointCallback);
return ac.find();};this.createTransform=function(L,aa,M,ag,ab){var Q=ab-3.5;var Z;var ac;var ad;var af;if(ag!=null){Z=ag.X;ac=ag.Y;ad=af=Q-3;}else{Z=(aa.X-L.X)+M.X;
ac=(aa.Y-L.Y)+M.Y;ad=af=Q;}var ae=V.quadrilateralToQuadrilateral(3.5,3.5,Q,3.5,ad,af,3.5,Q,L.X,L.Y,aa.X,aa.Y,Z,ac,M.X,M.Y);return ae;};this.sampleGrid=function(M,L,Q){var Z=Y;
return Z.sampleGrid3(M,Q,L);};this.processFinderPatternInfo=function(Z){var ag=Z.TopLeft;var ah=Z.TopRight;var ac=Z.BottomLeft;var al=this.calculateModuleSize(ag,ah,ac);
if(al<1){throw"Error";}var Q=this.computeDimension(ag,ah,ac,al);var an=N.getProvisionalVersionForDimension(Q);var af=an.DimensionForVersion-7;var ae=null;
if(an.AlignmentPatternCenters.length>0){var aj=ah.X-ag.X+ac.X;var ak=ah.Y-ag.Y+ac.Y;var am=1-3/af;var L=Math.floor(ag.X+am*(aj-ag.X));var M=Math.floor(ag.Y+am*(ak-ag.Y));
for(var aa=4;aa<=16;aa<<=1){ae=this.findAlignmentInRegion(al,L,M,aa);break;}}var ai=this.createTransform(ag,ah,ac,ae,Q);var ad=this.sampleGrid(this.image,ai,Q);
var ab;if(ae==null){ab=new Array(ac,ag,ah);}else{ab=new Array(ac,ag,ah,ae);}return new R(ad,ab);};this.detect=function(){var L=new k().findFinderPattern(this.image);
return this.processFinderPatternInfo(L);};}var K=21522;var q=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31));
var z=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);function w(H){this.errorCorrectionLevel=E.forBits((H>>3)&3);this.dataMask=(H&7);this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel;
});this.__defineGetter__("DataMask",function(){return this.dataMask;});this.GetHashCode=function(){return(this.errorCorrectionLevel.ordinal()<<3)|dataMask;
};this.Equals=function(M){var L=M;return this.errorCorrectionLevel==L.errorCorrectionLevel&&this.dataMask==L.dataMask;};}w.numBitsDiffering=function(H,L){H^=L;
return z[H&15]+z[(U(H,4)&15)]+z[(U(H,8)&15)]+z[(U(H,12)&15)]+z[(U(H,16)&15)]+z[(U(H,20)&15)]+z[(U(H,24)&15)]+z[(U(H,28)&15)];};w.decodeFormatInformation=function(L){var H=w.doDecodeFormatInformation(L);
if(H!=null){return H;}return w.doDecodeFormatInformation(L^K);};w.doDecodeFormatInformation=function(aa){var H=4294967295;var L=0;for(var ab=0;ab<q.length;
ab++){var M=q[ab];var Q=M[0];if(Q==aa){return new w(M[1]);}var Z=this.numBitsDiffering(aa,Q);if(Z<H){L=M[1];H=Z;}}if(H<=3){return new w(L);}return null;
};function E(L,M,H){this.ordinal_Renamed_Field=L;this.bits=M;this.name=H;this.__defineGetter__("Bits",function(){return this.bits;});this.__defineGetter__("Name",function(){return this.name;
});this.ordinal=function(){return this.ordinal_Renamed_Field;};}E.forBits=function(H){if(H<0||H>=o.Length){throw"ArgumentException";}return o[H];};var i=new E(0,1,"L");
var h=new E(1,0,"M");var e=new E(2,3,"Q");var l=new E(3,2,"H");var o=new Array(h,i,l,e);function I(M,L){if(!L){L=M;}if(M<1||L<1){throw"Both dimensions must be greater than 0";
}this.width=M;this.height=L;var Q=M>>5;if((M&31)!=0){Q++;}this.rowSize=Q;this.bits=new Array(Q*L);for(var H=0;H<this.bits.length;H++){this.bits[H]=0;}this.__defineGetter__("Width",function(){return this.width;
});this.__defineGetter__("Height",function(){return this.height;});this.__defineGetter__("Dimension",function(){if(this.width!=this.height){throw"Can't call getDimension() on a non-square matrix";
}return this.width;});this.get_Renamed=function(ab,Z){var aa=Z*this.rowSize+(ab>>5);return((U(this.bits[aa],(ab&31)))&1)!=0;};this.set_Renamed=function(ab,Z){var aa=Z*this.rowSize+(ab>>5);
this.bits[aa]|=1<<(ab&31);};this.flip=function(ab,Z){var aa=Z*this.rowSize+(ab>>5);this.bits[aa]^=1<<(ab&31);};this.clear=function(){var aa=this.bits.length;
for(var Z=0;Z<aa;Z++){this.bits[Z]=0;}};this.setRegion=function(af,ac,ag,Z){if(ac<0||af<0){throw"Left and top must be nonnegative";}if(Z<1||ag<1){throw"Height and width must be at least 1";
}var aa=af+ag;var ah=ac+Z;if(ah>this.height||aa>this.width){throw"The region must fit inside the matrix";}for(var ad=ac;ad<ah;ad++){var ae=ad*this.rowSize;
for(var ab=af;ab<aa;ab++){this.bits[ae+(ab>>5)]|=1<<(ab&31);}}};}function X(L,H){this.numDataCodewords=L;this.codewords=H;this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords;
});this.__defineGetter__("Codewords",function(){return this.codewords;});}X.getDataBlocks=function(am,ah,Z){if(am.length!=ah.TotalCodewords){throw"ArgumentException";
}var ag=ah.getECBlocksForLevel(Z);var ak=0;var al=ag.getECBlocks();for(var aa=0;aa<al.length;aa++){ak+=al[aa].Count;}var af=new Array(ak);var ad=0;for(var ac=0;
ac<al.length;ac++){var aj=al[ac];for(var aa=0;aa<aj.Count;aa++){var ae=aj.DataCodewords;var Q=ag.ECCodewordsPerBlock+ae;af[ad++]=new X(ae,new Array(Q));
}}var M=af[0].codewords.length;var an=af.length-1;while(an>=0){var H=af[an].codewords.length;if(H==M){break;}an--;}an++;var ai=M-ag.ECCodewordsPerBlock;
var ao=0;for(var aa=0;aa<ai;aa++){for(var ac=0;ac<ad;ac++){af[ac].codewords[aa]=am[ao++];}}for(var ac=an;ac<ad;ac++){af[ac].codewords[ai]=am[ao++];}var ab=af[0].codewords.length;
for(var aa=ai;aa<ab;aa++){for(var ac=0;ac<ad;ac++){var L=ac<an?aa:aa+1;af[ac].codewords[L]=am[ao++];}}return af;};function p(L){var H=L.Dimension;if(H<21||(H&3)!=1){throw"Error BitMatrixParser";
}this.bitMatrix=L;this.parsedVersion=null;this.parsedFormatInfo=null;this.copyBit=function(Q,Z,M){return this.bitMatrix.get_Renamed(Q,Z)?(M<<1)|1:M<<1;
};this.readFormatInformation=function(){if(this.parsedFormatInfo!=null){return this.parsedFormatInfo;}var M=0;for(var Z=0;Z<6;Z++){M=this.copyBit(Z,8,M);
}M=this.copyBit(7,8,M);M=this.copyBit(8,8,M);M=this.copyBit(8,7,M);for(var ab=5;ab>=0;ab--){M=this.copyBit(8,ab,M);}this.parsedFormatInfo=w.decodeFormatInformation(M);
if(this.parsedFormatInfo!=null){return this.parsedFormatInfo;}var Q=this.bitMatrix.Dimension;M=0;var aa=Q-8;for(var Z=Q-1;Z>=aa;Z--){M=this.copyBit(Z,8,M);
}for(var ab=Q-7;ab<Q;ab++){M=this.copyBit(8,ab,M);}this.parsedFormatInfo=w.decodeFormatInformation(M);if(this.parsedFormatInfo!=null){return this.parsedFormatInfo;
}throw"Error readFormatInformation";};this.readVersion=function(){if(this.parsedVersion!=null){return this.parsedVersion;}var M=this.bitMatrix.Dimension;
var Z=(M-17)>>2;if(Z<=6){return N.getVersionForNumber(Z);}var Q=0;var aa=M-11;for(var ac=5;ac>=0;ac--){for(var ab=M-9;ab>=aa;ab--){Q=this.copyBit(ab,ac,Q);
}}this.parsedVersion=N.decodeVersionInformation(Q);if(this.parsedVersion!=null&&this.parsedVersion.DimensionForVersion==M){return this.parsedVersion;}Q=0;
for(var ab=5;ab>=0;ab--){for(var ac=M-9;ac>=aa;ac--){Q=this.copyBit(ab,ac,Q);}}this.parsedVersion=N.decodeVersionInformation(Q);if(this.parsedVersion!=null&&this.parsedVersion.DimensionForVersion==M){return this.parsedVersion;
}throw"Error readVersion";};this.readCodewords=function(){var M=this.readFormatInformation();var Z=this.readVersion();var aj=C.forReference(M.DataMask);
var ag=this.bitMatrix.Dimension;aj.unmaskBitMatrix(this.bitMatrix,ag);var ad=Z.buildFunctionPattern();var aa=true;var ak=new Array(Z.TotalCodewords);var ab=0;
var Q=0;var ae=0;for(var ah=ag-1;ah>0;ah-=2){if(ah==6){ah--;}for(var ac=0;ac<ag;ac++){var af=aa?ag-1-ac:ac;for(var ai=0;ai<2;ai++){if(!ad.get_Renamed(ah-ai,af)){ae++;
Q<<=1;if(this.bitMatrix.get_Renamed(ah-ai,af)){Q|=1;}if(ae==8){ak[ab++]=Q;ae=0;Q=0;}}}}aa^=true;}if(ab!=Z.TotalCodewords){throw"Error readCodewords";}return ak;
};}var C={};C.forReference=function(H){if(H<0||H>7){throw"System.ArgumentException";}return C.DATA_MASKS[H];};function P(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(H,L){return((H+L)&1)==0;};}function O(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(H,L){return(H&1)==0;};}function y(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(H,L){return L%3==0;};}function v(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(H,L){return(H+L)%3==0;};}function J(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(H,L){return(((U(H,1))+(L/3))&1)==0;};}function G(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(M,H){var L=M*H;return(L&1)+(L%3)==0;};}function s(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(M,H){var L=M*H;return(((L&1)+(L%3))&1)==0;};}function r(){this.unmaskBitMatrix=function(Q,M){for(var H=0;
H<M;H++){for(var L=0;L<M;L++){if(this.isMasked(H,L)){Q.flip(L,H);}}}};this.isMasked=function(H,L){return((((H+L)&1)+((H*L)%3))&1)==0;};}C.DATA_MASKS=new Array(new P(),new O(),new y(),new v(),new J(),new G(),new s(),new r());
function n(H){this.field=H;this.decode=function(ae,aa){var M=new W(this.field,ae);var ab;var ak=new Array(aa);for(ab=0;ab<ak.length;ab++){ak[ab]=0;}var ah=false;
var Q=true;for(ab=0;ab<aa;ab++){var ad=M.evaluateAt(this.field.exp(ah?ab+1:ab));ak[ak.length-1-ab]=ad;if(ad!=0){Q=false;}}if(Q){return;}var L=new W(this.field,ak);
var ag=this.runEuclideanAlgorithm(this.field.buildMonomial(aa,1),L,aa);var aj=ag[0];var ai=ag[1];var af=this.findErrorLocations(aj);var Z=this.findErrorMagnitudes(ai,af,ah);
for(ab=0;ab<af.length;ab++){var ac=ae.length-1-this.field.log(af[ab]);if(ac<0){throw"ReedSolomonException Bad error location";}ae[ac]=F.addOrSubtract(ae[ac],Z[ab]);
}};this.runEuclideanAlgorithm=function(ap,ao,Z){if(ap.Degree<ao.Degree){var am=ap;ap=ao;ao=am;}var ar=ap;var ae=ao;var ai=this.field.One;var ad=this.field.Zero;
var Q=this.field.Zero;var ac=this.field.One;while(ae.Degree>=Math.floor(Z/2)){var an=ar;var aa=ai;var al=Q;ar=ae;ai=ad;Q=ac;if(ar.Zero){throw"r_{i-1} was zero";
}ae=an;var ag=this.field.Zero;var aj=ar.getCoefficient(ar.Degree);var ab=this.field.inverse(aj);while(ae.Degree>=ar.Degree&&!ae.Zero){var L=ae.Degree-ar.Degree;
var aq=this.field.multiply(ae.getCoefficient(ae.Degree),ab);ag=ag.addOrSubtract(this.field.buildMonomial(L,aq));ae=ae.addOrSubtract(ar.multiplyByMonomial(L,aq));
}ad=ag.multiply1(ai).addOrSubtract(aa);ac=ag.multiply1(Q).addOrSubtract(al);}var ak=ac.getCoefficient(0);if(ak==0){throw"ReedSolomonException sigmaTilde(0) was zero";
}var M=this.field.inverse(ak);var ah=ac.multiply2(M);var af=ae.multiply2(M);return new Array(ah,af);};this.findErrorLocations=function(Z){var aa=Z.Degree;
if(aa==1){return new Array(Z.getCoefficient(1));}var L=new Array(aa);var Q=0;for(var M=1;M<256&&Q<aa;M++){if(Z.evaluateAt(M)==0){L[Q]=this.field.inverse(M);
Q++;}}if(Q!=aa){throw"Error locator degree does not match number of roots";}return L;};this.findErrorMagnitudes=function(aa,ac,ab){var ad=ac.length;var ae=new Array(ad);
for(var Z=0;Z<ad;Z++){var L=this.field.inverse(ac[Z]);var M=1;for(var Q=0;Q<ad;Q++){if(Z!=Q){M=this.field.multiply(M,F.addOrSubtract(1,this.field.multiply(ac[Q],L)));
}}ae[Z]=this.field.multiply(aa.evaluateAt(L),this.field.inverse(M));if(ab){ae[Z]=this.field.multiply(ae[Z],L);}}return ae;};}function W(M,Q){if(Q==null||Q.length==0){throw"System.ArgumentException";
}this.field=M;var aa=Q.length;if(aa>1&&Q[0]==0){var Z=1;while(Z<aa&&Q[Z]==0){Z++;}if(Z==aa){this.coefficients=M.Zero.coefficients;}else{this.coefficients=new Array(aa-Z);
for(var H=0;H<this.coefficients.length;H++){this.coefficients[H]=0;}for(var L=0;L<this.coefficients.length;L++){this.coefficients[L]=Q[Z+L];}}}else{this.coefficients=Q;
}this.__defineGetter__("Zero",function(){return this.coefficients[0]==0;});this.__defineGetter__("Degree",function(){return this.coefficients.length-1;
});this.__defineGetter__("Coefficients",function(){return this.coefficients;});this.getCoefficient=function(ab){return this.coefficients[this.coefficients.length-1-ab];
};this.evaluateAt=function(ae){if(ae==0){return this.getCoefficient(0);}var ab=this.coefficients.length;if(ae==1){var af=0;for(var ac=0;ac<ab;ac++){af=F.addOrSubtract(af,this.coefficients[ac]);
}return af;}var ad=this.coefficients[0];for(var ac=1;ac<ab;ac++){ad=F.addOrSubtract(this.field.multiply(ae,ad),this.coefficients[ac]);}return ad;};this.addOrSubtract=function(ag){if(this.field!=ag.field){throw"GF256Polys do not have same GF256 field";
}if(this.Zero){return ag;}if(ag.Zero){return this;}var ah=this.coefficients;var ai=ag.coefficients;if(ah.length>ai.length){var ae=ah;ah=ai;ai=ae;}var af=new Array(ai.length);
var ad=ai.length-ah.length;for(var ab=0;ab<ad;ab++){af[ab]=ai[ab];}for(var ac=ad;ac<ai.length;ac++){af[ac]=F.addOrSubtract(ah[ac-ad],ai[ac]);}return new W(M,af);
};this.multiply1=function(ad){if(this.field!=ad.field){throw"GF256Polys do not have same GF256 field";}if(this.Zero||ad.Zero){return this.field.Zero;}var ab=this.coefficients;
var aj=ab.length;var ag=ad.coefficients;var ae=ag.length;var ac=new Array(aj+ae-1);for(var af=0;af<aj;af++){var ai=ab[af];for(var ah=0;ah<ae;ah++){ac[af+ah]=F.addOrSubtract(ac[af+ah],this.field.multiply(ai,ag[ah]));
}}return new W(this.field,ac);};this.multiply2=function(ae){if(ae==0){return this.field.Zero;}if(ae==1){return this;}var ac=this.coefficients.length;var ab=new Array(ac);
for(var ad=0;ad<ac;ad++){ab[ad]=this.field.multiply(this.coefficients[ad],ae);}return new W(this.field,ab);};this.multiplyByMonomial=function(ab,af){if(ab<0){throw"System.ArgumentException";
}if(af==0){return this.field.Zero;}var ad=this.coefficients.length;var ac=new Array(ad+ab);for(var ae=0;ae<ac.length;ae++){ac[ae]=0;}for(var ae=0;ae<ad;
ae++){ac[ae]=this.field.multiply(this.coefficients[ae],af);}return new W(this.field,ac);};this.divide=function(ae){if(this.field!=ae.field){throw"GF256Polys do not have same GF256 field";
}if(ae.Zero){throw"Divide by 0";}var ag=this.field.Zero;var ab=this;var aj=ae.getCoefficient(ae.Degree);var ac=this.field.inverse(aj);while(ab.Degree>=ae.Degree&&!ab.Zero){var ad=ab.Degree-ae.Degree;
var ai=this.field.multiply(ab.getCoefficient(ab.Degree),ac);var ah=ae.multiplyByMonomial(ad,ai);var af=this.field.buildMonomial(ad,ai);ag=ag.addOrSubtract(af);
ab=ab.addOrSubtract(ah);}return new Array(ag,ab);};}function F(H){this.expTable=new Array(256);this.logTable=new Array(256);var L=1;for(var M=0;M<256;M++){this.expTable[M]=L;
L<<=1;if(L>=256){L^=H;}}for(var M=0;M<255;M++){this.logTable[this.expTable[M]]=M;}var Q=new Array(1);Q[0]=0;this.zero=new W(this,new Array(Q));var Z=new Array(1);
Z[0]=1;this.one=new W(this,new Array(Z));this.__defineGetter__("Zero",function(){return this.zero;});this.__defineGetter__("One",function(){return this.one;
});this.buildMonomial=function(aa,ad){if(aa<0){throw"System.ArgumentException";}if(ad==0){return zero;}var ab=new Array(aa+1);for(var ac=0;ac<ab.length;
ac++){ab[ac]=0;}ab[0]=ad;return new W(this,ab);};this.exp=function(aa){return this.expTable[aa];};this.log=function(aa){if(aa==0){throw"System.ArgumentException";
}return this.logTable[aa];};this.inverse=function(aa){if(aa==0){throw"System.ArithmeticException";}return this.expTable[255-this.logTable[aa]];};this.multiply=function(aa,ab){if(aa==0||ab==0){return 0;
}if(aa==1){return ab;}if(ab==1){return aa;}return this.expTable[(this.logTable[aa]+this.logTable[ab])%255];};}F.QR_CODE_FIELD=new F(285);F.DATA_MATRIX_FIELD=new F(301);
F.addOrSubtract=function(H,L){return H^L;};var a={};a.rsDecoder=new n(F.QR_CODE_FIELD);a.correctErrors=function(M,H){var aa=M.length;var Q=new Array(aa);
for(var Z=0;Z<aa;Z++){Q[Z]=M[Z]&255;}var L=M.length-H;try{a.rsDecoder.decode(Q,L);}catch(ab){throw ab;}for(var Z=0;Z<H;Z++){M[Z]=Q[Z];}};a.decode=function(H){var ai=new p(H);
var M=ai.readVersion();var ah=ai.readFormatInformation().ErrorCorrectionLevel;var L=ai.readCodewords();var aj=X.getDataBlocks(L,M,ah);var ae=0;for(var ab=0;
ab<aj.Length;ab++){ae+=aj[ab].NumDataCodewords;}var af=new Array(ae);var Q=0;for(var ac=0;ac<aj.length;ac++){var Z=aj[ac];var ag=Z.Codewords;var ad=Z.NumDataCodewords;
a.correctErrors(ag,ad);for(var ab=0;ab<ad;ab++){af[Q++]=ag[ab];}}var aa=new T(af,M.VersionNumber,ah.Bits);return aa;};var j={};j.imagedata=null;j.width=0;
j.height=0;j.qrCodeSymbol=null;j.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]];j.callback=null;j.decode=function(H){var L=H.getContext("2d");
j.width=H.width;j.height=H.height;j.imagedata=L.getImageData(0,0,j.width,j.height);return j.process(L);};j.process=function(H){var ad=j.grayScaleToBitmap(j.grayscale());
var Z=new B(ad);var L=Z.detect();H.putImageData(j.imagedata,0,0);var Q=a.decode(L.bits);var aa=Q.DataByte;var M="";for(var ab=0;ab<aa.length;ab++){for(var ac=0;
ac<aa[ab].length;ac++){M+=String.fromCharCode(aa[ab][ac]);}}return M;};j.getPixel=function(M,L){if(j.width<M){throw"point error";}if(j.height<L){throw"point error";
}var H=(M*4)+(L*j.width*4);var Q=(j.imagedata.data[H]*30+j.imagedata.data[H+1]*59+j.imagedata.data[H+2]*11)/100;return Q;};j.binarize=function(Q){var Z=new Array(j.width*j.height);
for(var M=0;M<j.height;M++){for(var H=0;H<j.width;H++){var L=j.getPixel(H,M);Z[H+M*j.width]=L<=Q?true:false;}}return Z;};j.getMiddleBrightnessPerArea=function(af){var ag=4;
var Z=Math.floor(j.width/ag);var aa=Math.floor(j.height/ag);var ad=new Array(ag);for(var ac=0;ac<ag;ac++){ad[ac]=new Array(ag);for(var ae=0;ae<ag;ae++){ad[ac][ae]=new Array(0,0);
}}for(var H=0;H<ag;H++){for(var ai=0;ai<ag;ai++){ad[ai][H][0]=255;for(var Q=0;Q<aa;Q++){for(var L=0;L<Z;L++){var ab=af[Z*ai+L+(aa*H+Q)*j.width];if(ab<ad[ai][H][0]){ad[ai][H][0]=ab;
}if(ab>ad[ai][H][1]){ad[ai][H][1]=ab;}}}}}var M=new Array(ag);for(var ah=0;ah<ag;ah++){M[ah]=new Array(ag);}for(var H=0;H<ag;H++){for(var ai=0;ai<ag;ai++){M[ai][H]=Math.floor((ad[ai][H][0]+ad[ai][H][1])/2);
}}return M;};j.grayScaleToBitmap=function(Z){var H=j.getMiddleBrightnessPerArea(Z);var ad=H.length;var aa=Math.floor(j.width/ad);var ab=Math.floor(j.height/ad);
var ac=new Array(j.height*j.width);for(var L=0;L<ad;L++){for(var ae=0;ae<ad;ae++){for(var Q=0;Q<ab;Q++){for(var M=0;M<aa;M++){ac[aa*ae+M+(ab*L+Q)*j.width]=(Z[aa*ae+M+(ab*L+Q)*j.width]<H[ae][L])?true:false;
}}}}return ac;};j.grayscale=function(){var Q=new Array(j.width*j.height);for(var M=0;M<j.height;M++){for(var H=0;H<j.width;H++){var L=j.getPixel(H,M);Q[H+M*j.width]=L;
}}return Q;};function U(L,H){if(L>=0){return L>>H;}else{return(L>>H)+(2<<~H);}}Array.prototype.remove=function(M,H){var L=this.slice((H||M)+1||this.length);
this.length=M<0?this.length+M:M;return this.push.apply(this,L);};var g=3;var d=57;var m=8;var D=2;j.orderBestPatterns=function(ac){function ad(af,ag){var ai=af.X-ag.X;
var ah=af.Y-ag.Y;return Math.sqrt((ai*ai+ah*ah));}function ab(ah,ai,aj){var af=ai.x;var ag=ai.y;return((aj.x-af)*(ah.y-ag))-((aj.y-ag)*(ah.x-af));}var L=ad(ac[0],ac[1]);
var Z=ad(ac[1],ac[2]);var aa=ad(ac[0],ac[2]);var ae,H,M;if(Z>=L&&Z>=aa){H=ac[0];ae=ac[1];M=ac[2];}else{if(aa>=Z&&aa>=L){H=ac[1];ae=ac[0];M=ac[2];}else{H=ac[2];
ae=ac[0];M=ac[1];}}if(ab(ae,H,M)<0){var Q=ae;ae=M;M=Q;}ac[0]=ae;ac[1]=H;ac[2]=M;};function u(M,L,H){this.x=M;this.y=L;this.count=1;this.estimatedModuleSize=H;
this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize;});this.__defineGetter__("Count",function(){return this.count;});
this.__defineGetter__("X",function(){return this.x;});this.__defineGetter__("Y",function(){return this.y;});this.incrementCount=function(){this.count++;
};this.aboutEquals=function(Z,aa,ab){if(Math.abs(aa-this.y)<=Z&&Math.abs(ab-this.x)<=Z){var Q=Math.abs(Z-this.estimatedModuleSize);return Q<=1||Q/this.estimatedModuleSize<=1;
}return false;};}function S(H){this.bottomLeft=H[0];this.topLeft=H[1];this.topRight=H[2];this.__defineGetter__("BottomLeft",function(){return this.bottomLeft;
});this.__defineGetter__("TopLeft",function(){return this.topLeft;});this.__defineGetter__("TopRight",function(){return this.topRight;});}function k(){this.image=null;
this.possibleCenters=[];this.hasSkipped=false;this.crossCheckStateCount=new Array(0,0,0,0,0);this.resultPointCallback=null;this.__defineGetter__("CrossCheckStateCount",function(){this.crossCheckStateCount[0]=0;
this.crossCheckStateCount[1]=0;this.crossCheckStateCount[2]=0;this.crossCheckStateCount[3]=0;this.crossCheckStateCount[4]=0;return this.crossCheckStateCount;
});this.foundPatternCross=function(M){var H=0;for(var Z=0;Z<5;Z++){var Q=M[Z];if(Q==0){return false;}H+=Q;}if(H<7){return false;}var aa=Math.floor((H<<m)/7);
var L=Math.floor(aa/2);return Math.abs(aa-(M[0]<<m))<L&&Math.abs(aa-(M[1]<<m))<L&&Math.abs(3*aa-(M[2]<<m))<3*L&&Math.abs(aa-(M[3]<<m))<L&&Math.abs(aa-(M[4]<<m))<L;
};this.centerFromEnd=function(H,L){return(L-H[4]-H[3])-H[2]/2;};this.crossCheckVertical=function(ad,H,aa,M){var ab=this.image;var L=j.height;var ac=this.CrossCheckStateCount;
var Q=ad;while(Q>=0&&ab[H+Q*j.width]){ac[2]++;Q--;}if(Q<0){return NaN;}while(Q>=0&&!ab[H+Q*j.width]&&ac[1]<=aa){ac[1]++;Q--;}if(Q<0||ac[1]>aa){return NaN;
}while(Q>=0&&ab[H+Q*j.width]&&ac[0]<=aa){ac[0]++;Q--;}if(ac[0]>aa){return NaN;}Q=ad+1;while(Q<L&&ab[H+Q*j.width]){ac[2]++;Q++;}if(Q==L){return NaN;}while(Q<L&&!ab[H+Q*j.width]&&ac[3]<aa){ac[3]++;
Q++;}if(Q==L||ac[3]>=aa){return NaN;}while(Q<L&&ab[H+Q*j.width]&&ac[4]<aa){ac[4]++;Q++;}if(ac[4]>=aa){return NaN;}var Z=ac[0]+ac[1]+ac[2]+ac[3]+ac[4];if(5*Math.abs(Z-M)>=2*M){return NaN;
}return this.foundPatternCross(ac)?this.centerFromEnd(ac,Q):NaN;};this.crossCheckHorizontal=function(ac,ad,Z,L){var aa=this.image;var H=j.width;var ab=this.CrossCheckStateCount;
var M=ac;while(M>=0&&aa[M+ad*j.width]){ab[2]++;M--;}if(M<0){return NaN;}while(M>=0&&!aa[M+ad*j.width]&&ab[1]<=Z){ab[1]++;M--;}if(M<0||ab[1]>Z){return NaN;
}while(M>=0&&aa[M+ad*j.width]&&ab[0]<=Z){ab[0]++;M--;}if(ab[0]>Z){return NaN;}M=ac+1;while(M<H&&aa[M+ad*j.width]){ab[2]++;M++;}if(M==H){return NaN;}while(M<H&&!aa[M+ad*j.width]&&ab[3]<Z){ab[3]++;
M++;}if(M==H||ab[3]>=Z){return NaN;}while(M<H&&aa[M+ad*j.width]&&ab[4]<Z){ab[4]++;M++;}if(ab[4]>=Z){return NaN;}var Q=ab[0]+ab[1]+ab[2]+ab[3]+ab[4];if(5*Math.abs(Q-L)>=L){return NaN;
}return this.foundPatternCross(ab)?this.centerFromEnd(ab,M):NaN;};this.handlePossibleCenter=function(ae,ab,ac){var ad=ae[0]+ae[1]+ae[2]+ae[3]+ae[4];var H=this.centerFromEnd(ae,ac);
var af=this.crossCheckVertical(ab,Math.floor(H),ae[2],ad);if(!isNaN(af)){H=this.crossCheckHorizontal(Math.floor(H),Math.floor(af),ae[2],ad);if(!isNaN(H)){var M=ad/7;
var L=false;var Z=this.possibleCenters.length;for(var aa=0;aa<Z;aa++){var ag=this.possibleCenters[aa];if(ag.aboutEquals(M,af,H)){ag.incrementCount();L=true;
break;}}if(!L){var Q=new u(H,af,M);this.possibleCenters.push(Q);if(this.resultPointCallback!=null){this.resultPointCallback.foundPossibleResultPoint(Q);
}}return true;}}return false;};this.selectBestPatterns=function(){var L=this.possibleCenters.length;if(L<3){throw"Couldn't find enough finder patterns";
}if(L>3){var H=0;for(var Z=0;Z<L;Z++){H+=this.possibleCenters[Z].EstimatedModuleSize;}var Q=H/L;for(var Z=0;Z<this.possibleCenters.length&&this.possibleCenters.length>3;
Z++){var M=this.possibleCenters[Z];if(Math.abs(M.EstimatedModuleSize-Q)>0.2*Q){this.possibleCenters.remove(Z);Z--;}}}if(this.possibleCenters.Count>3){}return new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]);
};this.findRowSkip=function(){var H=this.possibleCenters.length;if(H<=1){return 0;}var Q=null;for(var M=0;M<H;M++){var L=this.possibleCenters[M];if(L.Count>=D){if(Q==null){Q=L;
}else{this.hasSkipped=true;return Math.floor((Math.abs(Q.X-L.X)-Math.abs(Q.Y-L.Y))/2);}}}return 0;};this.haveMultiplyConfirmedCenters=function(){var M=0;
var ab=0;var L=this.possibleCenters.length;var aa;for(aa=0;aa<L;aa++){var Q=this.possibleCenters[aa];if(Q.Count>=D){M++;ab+=Q.EstimatedModuleSize;}}if(M<3){return false;
}var Z=ab/L;var H=0;for(aa=0;aa<L;aa++){Q=this.possibleCenters[aa];H+=Math.abs(Q.EstimatedModuleSize-Z);}return H<=0.05*ab;};this.findFinderPattern=function(ad){var H=false;
this.image=ad;var L=j.height;var Z=j.width;var ah=Math.floor((3*L)/(4*d));if(ah<g||H){ah=g;}var ab=false;var ae=new Array(5);for(var aa=ah-1;aa<L&&!ab;
aa+=ah){ae[0]=0;ae[1]=0;ae[2]=0;ae[3]=0;ae[4]=0;var ag=0;for(var ac=0;ac<Z;ac++){if(ad[ac+aa*j.width]){if((ag&1)==1){ag++;}ae[ag]++;}else{if((ag&1)==0){if(ag==4){if(this.foundPatternCross(ae)){var af=this.handlePossibleCenter(ae,aa,ac);
if(af){ah=2;if(this.hasSkipped){ab=this.haveMultiplyConfirmedCenters();}else{var M=this.findRowSkip();if(M>ae[2]){aa+=M-ae[2]-ah;ac=Z-1;}}}else{do{ac++;
}while(ac<Z&&!ad[ac+aa*j.width]);ac--;}ag=0;ae[0]=0;ae[1]=0;ae[2]=0;ae[3]=0;ae[4]=0;}else{ae[0]=ae[2];ae[1]=ae[3];ae[2]=ae[4];ae[3]=1;ae[4]=0;ag=3;}}else{ae[++ag]++;
}}else{ae[ag]++;}}}if(this.foundPatternCross(ae)){var af=this.handlePossibleCenter(ae,aa,Z);if(af){ah=ae[0];if(this.hasSkipped){ab=haveMultiplyConfirmedCenters();
}}}}var Q=this.selectBestPatterns();j.orderBestPatterns(Q);return new S(Q);};}function f(M,L,H){this.x=M;this.y=L;this.count=1;this.estimatedModuleSize=H;
this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize;});this.__defineGetter__("Count",function(){return this.count;});
this.__defineGetter__("X",function(){return Math.floor(this.x);});this.__defineGetter__("Y",function(){return Math.floor(this.y);});this.incrementCount=function(){this.count++;
};this.aboutEquals=function(Z,aa,ab){if(Math.abs(aa-this.y)<=Z&&Math.abs(ab-this.x)<=Z){var Q=Math.abs(Z-this.estimatedModuleSize);return Q<=1||Q/this.estimatedModuleSize<=1;
}return false;};}function A(M,ab,H,Q,L,Z,aa){this.image=M;this.possibleCenters=new Array();this.startX=ab;this.startY=H;this.width=Q;this.height=L;this.moduleSize=Z;
this.crossCheckStateCount=new Array(0,0,0);this.resultPointCallback=aa;this.centerFromEnd=function(ac,ad){return(ad-ac[2])-ac[1]/2;};this.foundPatternCross=function(ac){var ad=this.moduleSize;
var af=ad/2;for(var ae=0;ae<3;ae++){if(Math.abs(ad-ac[ae])>=af){return false;}}return true;};this.crossCheckVertical=function(ak,ac,ah,ae){var ai=this.image;
var ad=j.height;var aj=this.crossCheckStateCount;aj[0]=0;aj[1]=0;aj[2]=0;var af=ak;while(af>=0&&ai[ac+af*j.width]&&aj[1]<=ah){aj[1]++;af--;}if(af<0||aj[1]>ah){return NaN;
}while(af>=0&&!ai[ac+af*j.width]&&aj[0]<=ah){aj[0]++;af--;}if(aj[0]>ah){return NaN;}af=ak+1;while(af<ad&&ai[ac+af*j.width]&&aj[1]<=ah){aj[1]++;af++;}if(af==ad||aj[1]>ah){return NaN;
}while(af<ad&&!ai[ac+af*j.width]&&aj[2]<=ah){aj[2]++;af++;}if(aj[2]>ah){return NaN;}var ag=aj[0]+aj[1]+aj[2];if(5*Math.abs(ag-ae)>=2*ae){return NaN;}return this.foundPatternCross(aj)?this.centerFromEnd(aj,af):NaN;
};this.handlePossibleCenter=function(ah,ae,af){var ag=ah[0]+ah[1]+ah[2];var ak=this.centerFromEnd(ah,af);var ai=this.crossCheckVertical(ae,Math.floor(ak),2*ah[1],ag);
if(!isNaN(ai)){var al=(ah[0]+ah[1]+ah[2])/3;var ac=this.possibleCenters.length;for(var ad=0;ad<ac;ad++){var aj=this.possibleCenters[ad];if(aj.aboutEquals(al,ai,ak)){return new f(ak,ai,al);
}}var am=new f(ak,ai,al);this.possibleCenters.push(am);if(this.resultPointCallback!=null){this.resultPointCallback.foundPossibleResultPoint(am);}}return null;
};this.find=function(){var ad=this.startX;var ak=this.height;var ac=ad+Q;var al=H+(ak>>1);var ag=new Array(0,0,0);for(var ai=0;ai<ak;ai++){var ae=al+((ai&1)==0?((ai+1)>>1):-((ai+1)>>1));
ag[0]=0;ag[1]=0;ag[2]=0;var af=ad;while(af<ac&&!M[af+j.width*ae]){af++;}var aj=0;while(af<ac){if(M[af+ae*j.width]){if(aj==1){ag[aj]++;}else{if(aj==2){if(this.foundPatternCross(ag)){var ah=this.handlePossibleCenter(ag,ae,af);
if(ah!=null){return ah;}}ag[0]=ag[2];ag[1]=1;ag[2]=0;aj=1;}else{ag[++aj]++;}}}else{if(aj==1){aj++;}ag[aj]++;}af++;}if(this.foundPatternCross(ag)){var ah=this.handlePossibleCenter(ag,ae,ac);
if(ah!=null){return ah;}}}if(!(this.possibleCenters.length==0)){return this.possibleCenters[0];}throw"Couldn't find enough alignment patterns";};}function T(M,L,H){this.blockPointer=0;
this.bitPointer=7;this.dataLength=0;this.blocks=M;this.numErrorCorrectionCode=H;if(L<=9){this.dataLengthMode=0;}else{if(L>=10&&L<=26){this.dataLengthMode=1;
}else{if(L>=27&&L<=40){this.dataLengthMode=2;}}}this.getNextBits=function(ae){var aa=0,af,ab;if(ae<this.bitPointer+1){var Q=0;for(af=0;af<ae;af++){Q+=(1<<af);
}Q<<=(this.bitPointer-ae+1);aa=(this.blocks[this.blockPointer]&Q)>>(this.bitPointer-ae+1);this.bitPointer-=ae;return aa;}else{if(ae<this.bitPointer+1+8){ab=0;
for(af=0;af<this.bitPointer+1;af++){ab+=(1<<af);}aa=(this.blocks[this.blockPointer]&ab)<<(ae-(this.bitPointer+1));this.blockPointer++;aa+=((this.blocks[this.blockPointer])>>(8-(ae-(this.bitPointer+1))));
this.bitPointer=this.bitPointer-ae%8;if(this.bitPointer<0){this.bitPointer=8+this.bitPointer;}return aa;}else{if(ae<this.bitPointer+1+16){ab=0;var ac=0;
for(af=0;af<this.bitPointer+1;af++){ab+=(1<<af);}var ad=(this.blocks[this.blockPointer]&ab)<<(ae-(this.bitPointer+1));this.blockPointer++;var ag=this.blocks[this.blockPointer]<<(ae-(this.bitPointer+1+8));
this.blockPointer++;for(af=0;af<ae-(this.bitPointer+1+8);af++){ac+=(1<<af);}ac<<=8-(ae-(this.bitPointer+1+8));var Z=(this.blocks[this.blockPointer]&ac)>>(8-(ae-(this.bitPointer+1+8)));
aa=ad+ag+Z;this.bitPointer=this.bitPointer-(ae-8)%8;if(this.bitPointer<0){this.bitPointer=8+this.bitPointer;}return aa;}else{return 0;}}}};this.NextMode=function(){if((this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2)){return 0;
}else{return this.getNextBits(4);}};this.getDataLength=function(Z){var Q=0;while(true){if((Z>>Q)==1){break;}Q++;}return this.getNextBits(j.sizeOfDataLengthInfo[this.dataLengthMode][Q]);
};this.getRomanAndFigureString=function(aa){var ac=aa;var ab=0;var Q="";var ae=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");
do{if(ac>1){ab=this.getNextBits(11);var Z=Math.floor(ab/45);var ad=ab%45;Q+=ae[Z];Q+=ae[ad];ac-=2;}else{if(ac==1){ab=this.getNextBits(6);Q+=ae[ab];ac-=1;
}}}while(ac>0);return Q;};this.getFigureString=function(Z){var ab=Z;var aa=0;var Q="";do{if(ab>=3){aa=this.getNextBits(10);if(aa<100){Q+="0";}if(aa<10){Q+="0";
}ab-=3;}else{if(ab==2){aa=this.getNextBits(7);if(aa<10){Q+="0";}ab-=2;}else{if(ab==1){aa=this.getNextBits(4);ab-=1;}}}Q+=aa;}while(ab>0);return Q;};this.get8bitByteArray=function(Q){var aa=Q;
var Z=0;var ab=new Array();do{Z=this.getNextBits(8);ab.push(Z);aa--;}while(aa>0);return ab;};this.getKanjiString=function(Z){var ac=Z;var aa=0;var ab="";
do{aa=getNextBits(13);var ae=aa%192;var ad=aa/192;var Q=(ad<<8)+ae;var af=0;if(Q+33088<=40956){af=Q+33088;}else{af=Q+49472;}ab+=String.fromCharCode(af);
ac--;}while(ac>0);return ab;};this.__defineGetter__("DataByte",function(){var af=new Array();var ah=1;var ag=2;var ai=4;var Z=8;do{var ac=this.NextMode();
if(ac==0){if(af.length>0){break;}else{throw"Empty data block";}}if(ac!=ah&&ac!=ag&&ac!=ai&&ac!=Z){throw"Invalid mode: "+ac+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";
}var Q=this.getDataLength(ac);if(Q<1){throw"Invalid data length: "+Q;}switch(ac){case ah:var ab=this.getFigureString(Q);var ad=new Array(ab.length);for(var ae=0;
ae<ab.length;ae++){ad[ae]=ab.charCodeAt(ae);}af.push(ad);break;case ag:var ab=this.getRomanAndFigureString(Q);var ad=new Array(ab.length);for(var ae=0;
ae<ab.length;ae++){ad[ae]=ab.charCodeAt(ae);}af.push(ad);break;case ai:var aa=this.get8bitByteArray(Q);af.push(aa);break;case Z:var ab=this.getKanjiString(Q);
af.push(ab);break;}}while(true);return af;});}x.qrcode=j;})(this);