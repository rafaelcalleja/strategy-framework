(function(b,c){b[c]=function(a,d){this.$elem=b(a);var c=this;b.each(d,function(a,b){c[a]=b});this.wrapCheckboxWithDivs();this.attachEvents();this.disableTextSelection();this.resizeHandle&&this.optionallyResize("handle");this.resizeContainer&&this.optionallyResize("container");this.initialPosition()};b.extend(b[c].prototype,{wrapCheckboxWithDivs:function(){this.$elem.wrap('<div class="'+this.containerClass+'" />');this.container=this.$elem.parent();this.offLabel=b('<label class="'+this.labelOffClass+
'"><span>'+this.uncheckedLabel+"</span></label>").appendTo(this.container);this.offSpan=this.offLabel.children("span");this.onLabel=b('<label class="'+this.labelOnClass+'"><span>'+this.checkedLabel+"</span></label>").appendTo(this.container);this.onSpan=this.onLabel.children("span");this.handle=b('<div class="'+this.handleClass+'"><div class="'+this.handleRightClass+'"><div class="'+this.handleCenterClass+'" /></div></div>').appendTo(this.container)},disableTextSelection:function(){b.browser.msie&&
b.each([this.handle,this.offLabel,this.onLabel,this.container],function(a){b(a).attr("unselectable","on")})},optionallyResize:function(a){var b=this.onLabel.width(),c=this.offLabel.width(),b=b<c?b:c;"container"==a&&(b+=this.handle.width()+15);this[a].css({width:b})},attachEvents:function(){var a=this;this.container.bind("mousedown touchstart",function(d){d.preventDefault();if(!a.$elem.is(":disabled"))d=d.pageX||d.changedTouches[0].pageX,b[c].currentlyClicking=a.handle,b[c].dragStartPosition=d-(parseInt(a.handle.css("left"),
10)||0)}).bind("iPhoneDrag",function(d,f){d.preventDefault();if(!a.$elem.is(":disabled")){var e=(f-b[c].dragStartPosition)/a.rightSide;0>e&&(e=0);1<e&&(e=1);a.handle.css({left:e*a.rightSide});a.onLabel.css({width:e*a.rightSide+4});a.offSpan.css({marginRight:-e*a.rightSide});a.onSpan.css({marginLeft:-(1-e)*a.rightSide})}}).bind("iPhoneDragEnd",function(d,f){if(!a.$elem.is(":disabled"))b[c].dragging?a.$elem.attr("checked",0.5<=(f-b[c].dragStartPosition)/a.rightSide):a.$elem.attr("checked",!a.$elem.attr("checked")),
b[c].currentlyClicking=null,b[c].dragging=null,a.$elem.change()});this.$elem.change(function(){a.$elem.is(":disabled")?a.container.addClass(a.disabledClass):a.container.removeClass(a.disabledClass);var b=a.$elem.attr("checked")?a.rightSide:0;a.handle.animate({left:b},a.duration);a.onLabel.animate({width:b+4},a.duration);a.offSpan.animate({marginRight:-b},a.duration);a.onSpan.animate({marginLeft:b-a.rightSide},a.duration)})},initialPosition:function(){this.offLabel.css({width:this.container.width()-
5});var a=b.browser.msie&&7>b.browser.version?3:6;this.rightSide=this.container.width()-this.handle.width()-a;this.$elem.is(":checked")?(this.handle.css({left:this.rightSide}),this.onLabel.css({width:this.rightSide+4}),this.offSpan.css({marginRight:-this.rightSide})):(this.onLabel.css({width:0}),this.onSpan.css({marginLeft:-this.rightSide}));this.$elem.is(":disabled")&&this.container.addClass(this.disabledClass)}});b.fn[c]=function(a){var d=this.filter(":checkbox");if(!d.length)return this;var f=
b.extend({},b[c].defaults,a);d.each(function(){b(this).data(c,new b[c](this,f))});if(!b[c].initComplete)b(document).bind("mousemove touchmove",function(a){if(b[c].currentlyClicking){if(a.pageX!=b[c].dragStartPosition)b[c].dragging=!0;a.preventDefault();var d=a.pageX||a.changedTouches[0].pageX;b(a.target).trigger("iPhoneDrag",[d])}}).bind("mouseup touchend",function(a){b[c].currentlyClicking&&(a.preventDefault(),a=a.pageX||a.changedTouches[0].pageX,b(b[c].currentlyClicking).trigger("iPhoneDragEnd",
[a]))}),b[c].initComplete=!0;return this};b[c].defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:!0,resizeContainer:!0,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight"}})(jQuery,"iphoneStyle");