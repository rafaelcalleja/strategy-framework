(function(g,d){g.__comet=false;g.__asyncNavigation=false;var a={id:"#colorbox",body:"#cboxLoadedContent",event:{load:"cbox_complete",ready:"cbox_ready",resize:"cbox_resize",cleanup:"cbox_cleanup"},func:{resize:function(n,m){$(".tipsy").remove();
return $.fn.colorbox.resize(m,n);},close:function(){if(a.settings.overlayClose&&!a.settings.overlayClose()){return false;}$(".tipsy").remove();return $.fn.colorbox.close();
},open:function(m,n){$(".tipsy").remove();return $.fn.colorbox(m,n);}},exists:function(){return $.fn.colorbox.element();},settings:$.fn.colorbox.settings};
a.settings.overlayClose=function(){if(g.modalconfirm){if(g.modalconfirm==true){if(!confirm(agd.strings.pregunta_cerrar_ventana)){return false;}}else{if(!confirm(modalconfirm)){return false;
}}g.modalconfirm=false;}return true;};var l=$("#loading"),c=$("#load"),k,f,e;g.agd={currentPage:false,loaded:false,loading:false,cachetime:10000,iface:"docs",ifaces:{},messages:{},title:document.title,locale:g.__locale,staticdomain:__resources,sati:0,agent:0,empresa:null,user:null,plugins:false,optionsImage:__resources+"/img/famfam/cog.png",loadingImage:__resources+"/img/common/loading.gif",loadingErrorImage:__resources+"/img/famfam/error.png",inlineLoadingImage:__resources+"/img/common/ajax-loader.gif",uploadPath:"/agd/uploadfiles.php",gkey:false,strings:{},routes:{},tours:{},tour:false,constants:{async:{empty:0,loading:1,loaded:2},ajaxAsyncCallStatus:{waiting:1,loaded:2}},callbacks:{},elements:{},history:[],create:{asistente:function(n){$asistente=$(document.createElement("div")).addClass("asistente-usuario").appendTo(document.body);
var m=ahistory.getParams(n);n=ahistory.getPage(n);function o(p){p=parseInt(p)||1,cnc=(n.indexOf("?")==-1)?"?":"&";url=n+cnc+"step="+p;agd.func.queryCache(url,function(r){$asistente.html(r);
$asistente.find(".last").click(function(){$asistente.empty();o(p=-1);});$asistente.find(".next").click(function(){$asistente.empty();o(p+1);});$asistente.find(".previous").click(function(){$asistente.empty();
o(p-1);});$asistente.find(".close").click(function(){$asistente.remove();});$asistente.find(".closePermanently").click(function(){$.post("usuario/flags.php","flag=asistente");
$asistente.remove();});agd.checkEvents($asistente);});}agd.func.registerCallback("asistente",function(){setTimeout(function(){$asistente.effect("shake",{distance:10,times:10},50);
},500);delete (agd.callbacks.asistente);});o(m.step||false);},treeView:function(m,n){var o=function(v){var r=v?v.target.tagName.toLowerCase():false;if(r=="td"||r=="img"||!r){if(m.subrow){if(m.isTreeVisible){$(m.img).attr("src",m.tree.img.normal);
m.isTreeVisible=false;}else{$(m.img).attr("src",m.tree.img.open||m.tree.img.normal);m.isTreeVisible=true;}$(m.subrow).toggle();return;}$(m.img).attr("src",agd.inlineLoadingImage);
var s=$("td",m).length;var y=$(document.createElement("div"));var p=$(document.createElement("table")).attr({cellpadding:"0",cellspacing:"0",border:"0"}).appendTo(y);
var u=$(document.createElement("td")).addClass("no-hover no-padding data-block").css("overflow-y","visible").attr("colspan",s).append(y);var x=$(document.createElement("tr")).addClass("desplegable").css("display","none").append(u);
var w=function(A,z){if($(A).outerHeight(true)){$(A).trigger("draw").after(z);}else{g.setTimeout(function(){w(A,z);},100);}};w(m,x);var t=function(H){if(H){var D=H.datos,I,F=$(p).parent().attr("colspan");
if(typeof F==="undefined"){F=1;}if(D){var z=n?n+1:1;$.each(D,function(K,L){if(L.group){var O=(n)?F-1:F;var M=$(document.createElement("tr")).addClass("table-group-title extra-line"),J=$(document.createElement("td")).appendTo(M),N=$(document.createElement("td")).attr("colspan",O).appendTo(M).html(L.group);
p.append(M);}else{var M=agd.func.rowFromData(L,z,H.maxcolums,K,D.length,H);$(M).find(".checkbox-colum").addClass("row-link").find("img").css("margin-left","22px");
p.append(M);}});if(H.paginacion){if(H.paginacion.to<H.paginacion.of){var B=agd.strings.mostrando_del+" 0 "+agd.strings.al+" "+H.paginacion.to+" "+agd.strings.of+" "+H.paginacion.of,E=$(document.createElement("tr")),G=$(document.createElement("span")).addClass("paginacion").html(B),C=$(document.createElement("a")).css("margin","0 5px").html(agd.strings.load_more_results),A=$(document.createElement("td")).addClass("no-hover no-padding").attr({colspan:F+3}).css("text-align","right").appendTo(E).append(G);
if(H.paginacion.of){B;}C.click(function(J){$(document.createElement("img")).css("margin","0 5px").attr("src",agd.inlineLoadingImage).appendTo(G);C.remove();
$.ajax({url:H.paginacion.href.prox,beforeSend:function(L,K){L.setRequestHeader("X-TREE",true);},success:function(L,N,K){var M=agd.func.getJson(L);if(M.maxcolums<s){M.maxcolums=(s-1);
}E.remove();t(M);}});}).appendTo(G);p.append(E);}}}else{$(x).css("border","0px").find("td:first").css("text-align","center").html("<div class='message highlight'>"+agd.strings.no_resultados+"</div>");
}x.css("display","");m.subrow=x;m.subtable=p;$(m.img).attr("src",m.tree.img.open||m.tree.img.normal);m.isTreeVisible=true;}else{$(m.img).attr({src:agd.loadingErrorImage,title:agd.strings.error});
agd.func.jGrowl("tree-load","Error al cargar la informacion");$(m).unbind("click");}};if(location.href.indexOf("embedded=true")!==-1){m.tree.url+="&embedded=true";
}$.ajax({url:m.tree.url,beforeSend:function(A,z){A.setRequestHeader("X-TREE",true);},success:function(A,B,z){t(agd.func.getJson(A));}});}};$(m).click(o);
$(m).mouseover(function(){$(this).addClass("selected");}).mouseout(function(){$(this).removeClass("selected");});return o;},inPageAlert:function(u){var m=$("#menu-avisos"),s=m.find("ul"),n=s.find("li"),t=$("#numeroavisos"),r=$("#boton-avisos"),v=$(document.createElement("li")).addClass(u.className).appendTo(s),o=v[0],p=$(document.createElement("div")).html("<span>"+u.title+"</span>"+u.innerHTML).css("display","none").appendTo(v).slideToggle();
if(r.css("display")=="none"){r.slideToggle();}t.html(s.find("li").length);o.remove=function(){agd.func.removeInPageAlert(this);};return o;},menuButton:function(n,s){if(!agd.elements.menu){g.setTimeout(function(){agd.create.menuButton(n,s);
},400);return;}n.className=(n.className)?n.className+" line-block":"line-block";var o=n.href;delete (n.href);var u=n.innerHTML;delete (n.innerHTML);var t=n.src;
delete (n.src);var r="<img src='"+t+"' height='32px'/><div class='line-block'>&nbsp;<a href='"+o+"'>"+u+"</a></div>";var m=$(document.createElement("li")).prop(n).html(r).css("padding-right","14px");
if(s!="undefined"){if(!isNaN(s)){var p=$("li",agd.elements.menu);if(p[s]){$(p[s]).before(m);}else{m.appendTo(agd.elements.menu);}}else{m.appendTo(agd.elements.menu);
}}else{return m[0];}},button:function(m){var o=$.extend({},m);if(o.img){o.innerHTML="<img src='"+o.img+"' /> "+o.innerHTML;delete (o.img);}var n=o.className||"";
if(!n||n.indexOf("btn")==-1){n+=" btn";}delete (o.className);o.innerHTML="<span><span>"+o.innerHTML+"</span></span>";return $(document.createElement("button")).addClass(n).prop(o).attr(o)[0];
},li:function(m){atributos=m;if(!atributos.name){atributos.name=false;}var n=(atributos.img)?"<img src='"+atributos.img+"' class='option-img' style='vertical-align: text-top;' height='16px' width='16px' />":"";
atributos.innerHTML="<div><span>"+n+atributos.innerHTML+"</span></div>";delete (atributos.img);return $(document.createElement("li")).prop(atributos)[0];
},ul:function(r){var m=r.length,p=m;var n=$(document.createElement("ul"));while(m--){var o=r[p-m-1];var s=$(document.createElement("li")).addClass(o.className).appendTo(n);
s.html("<input type='"+o.type+"' name='"+o.name+"' value='"+o.value+"' "+((o.checked)?"checked":"")+((o.disabled)?"disabled=true":"")+" /> "+o.innerHTML);
}return n[0];},modal:function(u,r){var s=$(document.createElement("div"));if(u){var w=$(document.createElement("div")).addClass("box-title").html(u).appendTo(s);
}var v=$(document.createElement("div")).addClass("cbox-content").appendTo(s);if(r.length){var n=r.length,t=n;var p=$(document.createElement("div")).addClass("cboxButtons");
while(n--){var o=r[t-n-1],m=agd.create.button(o);p.append(m);}p.appendTo(s);}return s[0];},select:function(v){if(v.inline){var m=$(document.createElement("div")).css("text-align","right"),p=$(document.createElement("table")).css("display","inline").appendTo(m),x=$(document.createElement("tr")).appendTo(p);
$.each(v.options,function(y,z){if(y>0){$(document.createElement("td")).html("<img src='"+z.img+"' href='"+z.href+"' class='option-img showname' name='"+z.innerHTML+"' title='"+z.innerHTML+"' style='vertical-align: text-top; cursor:pointer;'/>").appendTo(x).find("img").click(function(){agd.func.lineoption(this);
return false;});}});m[0].rawoptions=v.options;return m;}else{var o,t,m,s;m=$(document.createElement("div")).addClass("select");if(v.sub){m.addClass("subselect");
}var u={};for(opname in v){if(opname!="options"){u[opname]=v[opname];}}if($.browser.msie){select=$(document.createElement("select")).appendTo(m).prop(u).change(function(y){var z=this.options[this.selectedIndex];
if($(z).hasClass("checkbox-desplegable")){}else{agd.func.lineoption(z);}$(this.options[this.selectedIndex]).trigger("click");this.selectedIndex=0;return false;
}).css("width","100px");$.each(v.options,function(y,z){var z=$(document.createElement("option")).appendTo(select).prop(z);});}else{var n=($.browser.webkit)?"20px":"21px",w=$(document.createElement("div")).css("height",n).appendTo(m),t=$(document.createElement("ul")).appendTo(w).prop(u),r=m;
$.each(v.options,function(y,z){if(y==0){if(v.sub){o=$(document.createElement("li")).html("<div><span class='arrow'></span>"+z.innerHTML+"</div>").appendTo(t);
}else{var A=(z.img&&z.img!==d)?"<div><span class='arrow'></span><img src='"+z.img+"' class='option-img' style='vertical-align: text-top;' width='16px' height='16px' />"+z.innerHTML+"</div>":"<div><span class='arrow'></span>"+z.innerHTML+"</div>";
o=$(document.createElement("li")).html(A).appendTo(t);}}else{if(z.options){var B=new Array({innerHTML:z.innerHTML,selected:true});B=B.concat(z.options);
$(document.createElement("li")).addClass("sub").append(agd.create.select({options:B,sub:true})).appendTo(t);}else{$(agd.create.li(z)).appendTo(t);}}});
m.ul=t;$(o).click(function(){var B=w[0];var z=function(F){if(F){var G=F.originalTarget||F.target;if($(G).hasClass("checkbox-desplegable")||$(G).closest(".subselect").hasClass("subselect")){$(document).one("click",z);
return false;}}if(v.sub){$(r).css("width","100%");$(B).css({left:"",width:"100%",top:"",position:""});}$(r).removeClass("open").css("position","");$(B).removeClass("open").addClass("closed").css("overflow","hidden");
};if($(B).css("overflow-y")=="hidden"){$(r).addClass("open");$(B).removeClass("closed").addClass("open");if(v.sub){offset=$(m).closest("ul").offset();parentLi=$(r).parent();
parentLi.css("height",parentLi.height());var y=$(r).offset(),E=y.top-offset.top+11;var A=$(B).outerWidth(),C=A-10;$(r).css("width",($(r).width()-10));$(B).css({position:"absolute",width:C}).animate({left:"-"+A+"px",top:"-"+E+"px"});
}g.setTimeout(function(){$(document).one("click",z);},10);var D=agd.func.selectedRows();if($(t).attr("mode")==1&&!$(r).hasClass("checkbox-created")&&D.length){$("li",r).each(function(G,J){var F=this;
if(G>0){var I=$(document.createElement("input")).attr({type:"checkbox",name:$(F).attr("name")}).addClass("checkbox-desplegable");var H=$("span",this);H.before(I);
I.click(function(){$(H).toggleClass("strong");var M=$(".apply-option",B),N=$(":checked",B),L=N.length;if(L){if(!M.length){var K=agd.create.li({innerHTML:"Aplicar",className:"apply-option"});
$(K).appendTo(t).click(function(){var R=$(":checked",B),P=R.length;var S=Array();while(P--){S.push($(R[P]).attr("name"));}var T=agd.func.array2url("selected",agd.func.selectedRows());
if(T.length){T+="&";}T+=agd.func.array2url("options",S);var O=(ahistory.curLocation.indexOf("?")!=-1)?"&":"?";var Q=ahistory.curLocation+O+T;$.get(Q,function(U){U=agd.func.getJson(U);
agd.callback(U);});});}}else{if(M.length){$(M).remove();}}});}});$(r).addClass("checkbox-created");}else{$(".checkbox-desplegable",B).remove();}$(B).css("overflow","visible").closest("tr").closest("td").css("overflow-y","visible");
}else{z();}});$("li:not(.event)",t).addClass("event").click(function(y){if($(y.originalTarget).hasClass("checkbox-desplegable")){}else{if(!$(this).hasClass("multiple-action")){agd.func.lineoption(this);
}}});m.ajustar=function(y){if(m.ajustado!==true){var z=o.outerHeight();if(z){t.css("height",z);}m.css("visibility","visible");m.ajustado=true;}};}m[0].rawoptions=v.options;
return m;}}},views:{changeViewType:function(m,n){var n=n||function(){};$(agd.elements.main).empty();if(agd.views[m].created===true){agd.views.cleanView(m);
agd.views.activeView=m;if(agd.views[m].object){$(agd.elements.main).append(agd.views[m].object);}n();}else{if(agd.views[m].created==false){agd.views.createView(m,function(){agd.views.changeViewType(m,n);
});}}},cleanView:function(m){$.each(agd.views[m].elements,function(n,o){if(o){$(o).empty();}});},createView:function(m,o){var n={data:'<div><div id="data-menu-top"><div id="left-panel-title"></div><div class="line-options"></div>&nbsp;</div><table id="main-table"><tr><td id="left-panel"><div id="left-panel-container"></div></td><td id="spacer-panel"></td><td id="main-panel"><table class="data"><tbody><tr><td height="100%"><table id="table-container"><tr><td><table class="line-data" id="line-data"></table></td></tr></table></td></tr></tbody><tfoot><tr><th><div id="data-menu-bottom" class="left-bottom-rounded"><span class="right-bottom-line-options"></span><span class="bottom-line-options"></span>&nbsp;</div></th></tr></tfoot></table></td></tr></table></div>',bigdata:'<div><div id="data-menu-top"><div id="left-panel-title"></div><div class="line-options"></div>&nbsp;</div><table id="main-table"><tr><td id="left-panel"><div id="left-panel-container"></div></td><td id="spacer-panel"></td><td id="main-panel"><table class="data"><tbody><tr><td height="100%"><table id="table-container"><tr><td id="bigdata-content"></td></tr></table></td></tr></tbody><tfoot><tr><th><div id="data-menu-bottom" class="left-bottom-rounded"><span class="right-bottom-line-options"></span><span class="bottom-line-options"></span>&nbsp;</div></th></tr></tfoot></table></td></tr></table></div>',options:'<table width="100%" id="main-table"><tr><td id="left-panel"><div id="left-panel-container"></div></td><td id="spacer-panel"></td><td id="main-panel"><table width="100%" height="100%" class="options"><tbody><tr><td><div class="option-list"></div></td></tr></tbody></table></td></tr></table>'};
agd.views[m].object=$(n[m])[0];switch(m){case"data":agd.views[m].elements.options=$(".line-options",agd.views[m].object)[0];agd.views[m].elements.bottom=$(".bottom-line-options",agd.views[m].object)[0];
agd.views[m].elements.bottomright=$(".right-bottom-line-options",agd.views[m].object)[0];agd.views[m].elements.table=$("#line-data",agd.views[m].object)[0];
agd.views[m].elements.leftPanel=$("#left-panel-container",agd.views[m].object)[0];break;case"options":agd.views[m].elements.title=$(".option-title",agd.views[m].object)[0];
agd.views[m].elements.list=$(".option-list",agd.views[m].object)[0];agd.views[m].elements.leftPanel=$("#left-panel-container",agd.views[m].object)[0];break;
}agd.views[m].created=true;o();},options:{created:false,object:Object,visible:false,elements:{}},bigdata:{created:false,object:Object,visible:false,elements:{}},data:{created:false,object:Object,visible:false,elements:{}},simple:{created:true,object:false,visible:false,elements:{}},currentElements:function(){return agd.views[agd.views.current].elements;
},activeView:String},tables:{create:function(m){agd.tables[m]={addData:function(n,o){agd.tables[m].data[n]=o;},getData:function(n){if(n){return agd.tables[m].data[n];
}else{return agd.tables[m].data;}},data:{},update:parseInt((new Date()).getTime().toString().substring(0,10))};return agd.tables[m];},current:false},navegar:function(n,o){if(!n){n=ahistory.curLocation;
o=1;}n=(n)?n.replace("&amp;","&"):"";agd.loading=true;clearTimeout(f);l.find("div").html(agd.strings.cargando+"...");var x=g.setTimeout(function(){if(agd.loading){l.show();
}},300);if(!location.hash||location.hash.substring(1,2)=="/"){var r=$(agd.elements.menu).find("li:first-child a").attr("href");if(r){location.hash=r;}return false;
}try{if(__asyncNavigation&&__asyncNavigation.abort){__asyncNavigation.abort();}}catch(t){}try{$.each(agd.streaming.requests,function(z,A){A.abort();});
agd.asynchronousCall.checkAjax();}catch(t){}var y=agd.cache.url[n];if(y&&!o){var u=(new Date()).getTime(),s=u-y.time,m=y.json.cachetime||agd.cachetime;
if(s<m){if(g.ga){ga("send","pageview","/agd/#"+n);}agd.callback(y.json);return;}}var v=ahistory.getPage();if(route=agd.routes[v]){var p=ahistory.getEncodedURI().replace(v,route);
}else{var p=ahistory.getEncodedURI();}var w={type:"ajax",ct:(new Date()).getTime()};if(location.href.indexOf("embedded=true")!==-1){w.embedded=1;}__asyncNavigation=$.ajax({url:p,beforeSend:function(A,z){if(agd.currentPage){A.setRequestHeader("x-last-page",agd.currentPage);
}},data:w,error:function(z,B,A){clearTimeout(x);agd.callbacks["default-error"](z,B,A);},success:function(B,D,A){agd.currentPage=v;clearTimeout(x);if(!B){return agd.callbacks["default-error"](A,D,"nodata");
}if($.trim(B)=="Inaccesible"){return agd.callbacks["default-error"](A,D,"noaccess");}try{oJson=agd.func.getJson(B);}catch(C){return agd.callbacks["default-error"](A,D,"nojson");
}if(oJson){agd.cache.seturl(n,oJson);if(g.ga){ga("send","pageview","/agd/#"+n);}var z=A.getResponseHeader("App-version");if(z&&__rversion&&z!=__rversion){return location.reload();
}agd.callback(oJson,n);}else{return agd.callbacks["default-error"](A,D,"parsejson");}}});},actionCallback:function(o,m,s){s=s||function(){};if(o.alert){alert(o.alert);
}var p=o.refresh||(o.action&&o.action.go);if(!p&&(o.iface&&o.iface!=agd.iface)||(!o.iface&&agd.iface!="docs")){var r=o.iface||"docs";$bar=$("#top-bar-left");
$bar.find(".current").removeClass("current");$bar.find("#"+r).addClass("current");if(r!="docs"){if(!agd.ifaces[r]){if(o.selector&&(ifaceHTML=o.selector["#main"])){agd.ifaces[r]=ifaceHTML;
delete (o.selector["#main"]);}else{$.getJSON(r+"/",function(t){agd.actionCallback(t,m,function(){agd.callback(o,m);});});return false;}}$("#main").html(agd.ifaces[r]);
switch(r){case"analytics":$(".head, #logo-cliente, #sub-head").hide();agd.elements.main="#analytics-data";agd.elements.menu=$("#analytics-menu ul")[0];
break;case"validation":$(".head, #logo-cliente, #sub-head").hide();agd.elements.main="#analytics-data";agd.elements.menu=$("#analytics-menu ul")[0];break;
case"comment":agd.elements.main="#comment-data";$bar.find("#comment").removeClass("current");$bar.find("#docs").addClass("current");break;}}else{$(".head, #logo-cliente, #sub-head").show();
agd.elements.main=$("#main")[0];agd.elements.menu=$("#main-menu ul")[0];}agd.iface=r;}if(o.load){if(o.load.script){require(o.load.script,function(){delete (o.load.script);
agd.callback(o);});return false;}if(o.load.style){$.each(o.load.style,function(v,u){if(!$("link[href='"+u+"']").length){var t=create("link",{type:"text/css",rel:"stylesheet",href:u});
delete (o.load.style[v]);head.appendChild(t);}});}}if(o.jGrowl){$.jGrowl(o.jGrowl);}if(o.cbox){a.func.open({open:true,scrolling:false,html:o.cbox,returnFocus:false},s);
}if(o.closebox){a.func.close();}if(o.open){agd.func.open(o.open);}if(o.top){g.scrollTo(0,0);}if(o.action){switch(o.action){default:if(typeof o.action.force!=="undefined"){var n=o.action.go.replace("#","")==ahistory.curLocation;
if(n){agd.navegar();}else{location.href=o.action.go;}}else{location.href=o.action.go;}break;case"restore":if(__currentUser){agd.func.open("../restore.php?cu="+agd.un+"&u="+__currentUser);
}return false;break;case"back":return history.back(1);break;}}if(o.clear){agd.func.clearSelectedItems(o.clear);}if(o.refresh){agd.navegar();}if(o.html){$.each(o.html,function(u,v){var t=$(u);
t.html(v).show();agd.checkEvents(t);});}if(o.hightlight){agd.func.registerCallback("hightlight",function(){delete (agd.callbacks.hightlight);var t=agd.views[agd.views.activeView].elements.table.rows;
$.each(t,function(){if(this.uid==o.hightlight){$(this).effect("highlight",{color:"#fbec88"},2000);}});});}if(o.nofollow){return false;}if(o.hideSelector){if(typeof $(o.hideSelector)!="undefined"){$(o.hideSelector).hide();
}}s();return true;},callback:function(n,p){if(!n){return;}if(!agd.actionCallback(n,p)){return false;}var s=ahistory.getValue("q");if(s&&s.length){$("#buscar").val(decodeURIComponent(s.replace(":% ",":%25")));
}var o=(new Date()).getTime(),r=ahistory.getPage();if("cache" in n&&!n.cache){delete (agd.cache.url[p]);}$(".tipsy").remove();if(agd.tour&&agd.tour.page!=location.hash){agd.tour.trigger("stop.tourbus");
}$(".seleccionado").removeClass("seleccionado");if(n.moduloseleccionado){$(agd.elements.menu).find("li[name^='"+n.moduloseleccionado+"']").addClass("seleccionado");
var t=$(agd.elements.menu).find("li.seleccionado");if(!t.length){$("#"+n.moduloseleccionado).addClass("seleccionado");}}$(agd.elements.navegacion).empty();
$(".extra-table").remove();if(n.navegacion&&n.navegacion.length){$navegationlist=$(document.createElement("ul")).appendTo(agd.elements.navegacion);$.each(n.navegacion,function(v,x){$li=$(document.createElement("li")).appendTo($navegationlist);
if(typeof(x)=="string"){$li.html("<span>"+x+"</span>");}else{x=$.extend({},x);var u=x.tagName||"a",w=$(document.createElement(u));if(x.img){$(document.createElement("img")).attr(x.img).appendTo($li);
delete (x.img);}w.prop(x).appendTo($li);}});}agd.tables.current=n.tabla;if(!agd.tables[agd.tables.current]){agd.tables.create(agd.tables.current);}var m=n.view||"simple";
agd.views.changeViewType(m,function(){for(value in agd.views[agd.views.activeView].elements){if(agd.views[agd.views.activeView].elements[value]){$(agd.views[agd.views.activeView].elements[value]).empty();
if(n[value]){$.each(n[value],function(W,X){if(agd.create[W]){$.each(X,function(aa,Z){var Y=agd.create[W](Z);$(agd.views[agd.views.activeView].elements[value]).append(Y);
if(Y.ajustar){agd.load(true);Y.ajustar();}});}});}}}if(n.selector){$.each(n.selector,function(W,Y){var X=$(W);X.html(Y);});}if(n.datos||n.extralines){$(agd.views[agd.views.activeView].elements.table).empty();
}var H=n.maxcolums||0;if(s=n.busqueda){var z=$(document.createElement("tr")).addClass("table-group-title extra-line"),A=$(document.createElement("td")).attr("colspan",H+3).appendTo(z);
$(z).appendTo(agd.views[agd.views.activeView].elements.table);$formulario=$(document.createElement("form")).attr({method:"GET",id:"form-descargables"}).appendTo(A);
$searchDiv=$(document.createElement("div")).appendTo($formulario);$stringBuscar=$(document.createElement("span")).appendTo($searchDiv).html(agd.strings.buscar);
$busqueda=$(document.createElement("input")).attr({type:"text",name:"q",rel:"tr",target:"#",id:"qdescar"}).val(s.query).addClass("find-html").keyup(function(){var W=encodeURIComponent($.trim($(this).val())).replace("%3A",":").replace("%23","#").replace("%2C",",");
if(W==""){$formulario.submit();}}).appendTo($searchDiv).focus();$button=$(document.createElement("button")).addClass("btn").attr({type:"submit"}).html("<span><span>"+agd.strings.buscar+"</span></span>").appendTo($searchDiv);
$formulario.unbind().submit(function(){var W=encodeURIComponent($.trim($busqueda.val())).replace("%3A",":").replace("%23","#").replace("%2C",",");ahistory.updateValue({q:W});
return false;});}if(datos=n.datos){var Q=agd.tables.current.split("-")[0],u=0,B={};agd.views[agd.views.activeView].elements.table.className="line-data "+Q;
var E=agd.views[agd.views.activeView].elements.table;$.each(datos,function(W,X){if(X.group){var Y=$(document.createElement("tr")).addClass("table-group-title extra-line"),aa=$(document.createElement("td")).attr("colspan",H+3).appendTo(Y),Z=$(document.createElement("div")).appendTo(aa).html(X.group);
$(Y).appendTo(agd.views[agd.views.activeView].elements.table);if(X.searchable){$searchDiv=$(document.createElement("span")).css({"margin-left":"10px"}).appendTo(Z);
$(document.createElement("input")).attr({type:"text",placeholder:agd.strings.buscar,rel:"tr",target:"#"+X.id}).addClass("find-html").appendTo($searchDiv);
}if(W&&X.moveable&&B.layer){$(Z).addClass("resize-handler");(function(ac,ad,ab){ac.draggable({start:function(af,ae){$(this).data("dimensions",{x:af.originalEvent.pageX,y:af.originalEvent.pageY,h:ab.height()});
},drag:function(aj,ah){var ag={x:aj.originalEvent.pageX,y:aj.originalEvent.pageY},af=$(this).data("dimensions");var ai=af.y-ag.y,ae=af.h-ai+"px";ab.height(ae).css("overflow-y","scroll");
agd.cache.save(ad,ae);},stop:function(af,ae){ab.css("overflow-y","scroll");}});})(Y,B.id,B.layer);if(B.route){B.layer.route=B.route;(function(ab,ac){ab.bind("scroll",function(af){var ae=(this.scrollHeight-this.scrollTop)-ab.height();
if(ae==0){var ad=(ab.p)?ab.p+1:1;ab.p=ad+1;$.get(ab.route+"&p="+ad,function(ai){try{var ah=agd.func.getJson(ai),ag=ah.datos;if(ag){$.each(ag,function(ak,al){Y=agd.func.rowFromData(al,false,ah.maxcolums,ak,ag.length);
$(Y).appendTo(ac);});}else{ab.unbind("scroll");}}catch(aj){}});}});})(B.layer,B.table);}}B.row=$(document.createElement("tr")).addClass("tr-group-container").appendTo(agd.views[agd.views.activeView].elements.table);
B.td=$(document.createElement("td")).attr("colspan",H+3).addClass("clean-colum").appendTo(B.row);B.layer=$(document.createElement("div")).addClass("data-layer-group").appendTo(B.td);
if(X.id){B.layer.attr("id",X.id);}if(W&&X.moveable&&B.layer){$(B.layer).css("overflow-y","scroll");}B.route=X.route;B.id="data-layer-"+X.id;if(X.droppable&&!agd.agent){(function(ab){$(ab).bind("dragover",function(ac){}).bind("dragleave",function(ac){}).bind("drop",function(ad){var ae=ad.originalEvent.dataTransfer.getData("text"),af=(X.droppable.indexOf("?")!=-1)?"&":"?";
if($("#"+ae).closest(".data-layer-group").get(0)!==ab.get(0)){if(!isNaN(ae)){var ac=X.droppable+af+"poid="+ae;$.post(ac,function(ag){try{agd.actionCallback(agd.func.getJson(ag),ac);
}catch(ah){alert("Error desconocido");}});}}});})(B.layer);}if(X.css){B.layer.css(X.css);}if(layerHeight=agd.cache.get(B.id)){B.layer.height(layerHeight);
}B.table=$(document.createElement("table")).addClass("table-group-container").appendTo(B.layer);E=B.table.get(0);}else{var Y=agd.func.rowFromData(X,null,H,W,datos.length,n);
ln=$(Y).appendTo(E)[0];if(!W){E.current=Y;$(Y).addClass("current");Y.setShortCuts();}if(!u){agd.func.fixLayout(E,Y);}u++;}});if(n.asyncTable==agd.constants.async.empty||n.asyncTable==null||ahistory.getValue("force")){ajaxAsyncCallStatus=d;
}$(agd.views[agd.views.activeView].elements.bottomright).empty();$(agd.views[agd.views.activeView].elements.bottom).empty();if(n.paginacion){var O=parseInt(ahistory.getValue("p")),T=4,R=4;
if(isNaN(O)){O=0;}var C=$(document.createElement("span")).addClass("paginacion").addClass("rightElem"),S=O+1;if(O>0){$(document.createElement("a")).attr({href:"#"+ahistory.updateValue({p:n.paginacion[0]},location.href),"class":"prev-page"}).html("&laquo; "+agd.strings.pagina_anterior).appendTo(C);
}if(n.asyncTable!=agd.constants.async.loaded&&n.asyncTable!=null){var L=" "+agd.strings.pagina+" "+S+" "+agd.strings.busqueda_alrededor+" "+n.paginacion.total+" ";
}else{var L=" "+agd.strings.pagina+" "+S+" "+agd.strings.de+" "+n.paginacion.total+" ";}$(document.createTextNode(L)).appendTo(C);if(n.paginacion[1]>O){$(document.createElement("a")).attr({href:"#"+ahistory.updateValue({p:n.paginacion[1]},location.href),"class":"next-page"}).html(agd.strings.pagina_siguiente+" &raquo;").appendTo(C);
}var w=$(document.createElement("span")).css("float","right");$(w).append(C).appendTo(agd.views[agd.views.activeView].elements.options);$(C).clone().appendTo(agd.views[agd.views.activeView].elements.bottomright);
if(n.asyncTable!=agd.constants.async.loaded&&n.asyncTable!=null){var L=agd.strings.mostrando_del+" "+n.paginacion.from+" "+agd.strings.al+" "+n.paginacion.to+" "+agd.strings.busqueda_alrededor+" "+n.paginacion.of;
}else{var L=agd.strings.mostrando_del+" "+n.paginacion.from+" "+agd.strings.al+" "+n.paginacion.to+" "+agd.strings.de+" "+n.paginacion.of;}$span=$(document.createElement("span")).addClass("paginacion").addClass("leftElem").html(L).appendTo(agd.views[agd.views.activeView].elements.bottom);
if(n.paginacion.total>1){$span.append(" &nbsp; | &nbsp; "+agd.strings.pagina+" ");$(document.createElement("input")).val(S).attr({id:"paginacion-input",type:"text",size:3}).keypress(function(W){if(W.keyCode==13){var X=$(this).val();
if(typeof ajaxAsyncCallStatus!=="undefined"&&ajaxAsyncCallStatus===agd.constants.ajaxAsyncCallStatus.waiting&&X>n.paginacion.total){alert(agd.strings.proceso_busqueda_pagina_curso);
return false;}else{if((n.asyncTable==agd.constants.async.loaded&&(X>n.paginacion.total||isNaN(X)||X<1))||(n.asyncTable==null&&(X>n.paginacion.total||isNaN(X)||X<1))||(n.asyncTable==agd.constants.async.empty&&(isNaN(X)||X<1))){alert(agd.strings.error_buscando_pagina);
return false;}else{ahistory.updateValue({p:(X-1)});}}}}).appendTo($span);}if((n.asyncTable==agd.constants.async.empty||n.asyncTable==null)&&ahistory.getValue("p")>=4&&ahistory.getPage()=="buscar.php"){agd.func.asyncLoad();
}if((typeof ajaxAsyncCallStatus!=="undefined")&&(ajaxAsyncCallStatus===agd.constants.ajaxAsyncCallStatus.waiting)){var G=$(document.createElement("img")).attr({src:agd.staticdomain+"/img/common/load.gif"}).css("margin-left","20px");
$(".paginacion.rightElem,.paginacion.leftElem").append(G);}}else{$(document.createElement("span")).addClass("paginacion").html(agd.strings.mostrando_del+" 1 "+agd.strings.al+" "+datos.length).appendTo(agd.views[agd.views.activeView].elements.bottom);
}if($("#main table.data").height()<250){$("#main table.data").css("height","250px");}agd.func.showSelectedItems();}else{if(!datos||!datos.length){if(ahistory.getValue("p")!=0&&typeof ahistory.getValue("p")!="undefined"&&ahistory.getPage()=="buscar.php"){alert(agd.strings.error_buscando_pagina);
ahistory.updateValue({p:0});return;}else{var F=n.ifnodata||agd.strings.no_resultados;var N="<td class='clean-colum'><div class='message highlight'>"+F+"</div></td>";
$(document.createElement("tr")).html(N).appendTo(agd.views[agd.views.activeView].elements.table);}}}if(datatabs=n.datatabs){var V=$(document.createElement("tr")).addClass("extra-line table-group-title box-tabs"),y=$(document.createElement("td")).appendTo(V),P=$(document.createElement("div")).addClass("box-tabs").appendTo(y);
y.attr("colspan",H+3);$(datatabs).each(function(W,X){var Z=$(document.createElement("div")).addClass("box-tab");if(X.className){Z.addClass(X.className);
}if(X.img){$(document.createElement("img")).attr("src",X.img).appendTo(Z);}var Y=$(document.createElement("span")).html(X.innerHTML).appendTo(Z);if(X.title){Y.attr("title",X.title);
}if(X.count!==d){$(document.createElement("span")).addClass("super").html(X.count).appendTo(Z);}Z.appendTo(P);if(X.href){Z.click(function(){location.href=X.href;
});}});V.prependTo(agd.views[agd.views.activeView].elements.table);}if(lineasExtra=n.extralines){var M=agd.views[agd.views.activeView].elements.table,x=0;
$.each(lineasExtra,function(Y,X){Y=isNaN(Y)?x++:Y;var Z=$(M.insertRow(Y)).addClass("extra-line");var aa=n.maxcolums||0;var W=$(document.createElement("td")).attr("colspan",aa+3).appendTo(Z);
if(typeof X=="string"){W.html(X);}else{W.html(X.innerHTML);if(X.className){Z.addClass(X.className);}}});}if(agd.views[agd.views.activeView].elements.leftPanel){$(agd.views[agd.views.activeView].elements.leftPanel).empty();
if(acciones=n.acciones){$.each(acciones,function(X,W){var Y=$(document.createElement("div")).addClass("module-options showname").attr({title:W.nombre,"data-gravity":"w"}).html("<div><a href='"+W.href+"' class='"+W.clase+"'><img src='"+W.img+"' /></a></div>").appendTo(agd.views[agd.views.activeView].elements.leftPanel);
});}}$(".helper").remove();if("helpers" in n){function K(ac,Z){var aj,aa,ah,W,ag;try{var X=$(Z.target),ab=X.offset();if(!Z.html.length){return;}if(!ab||ab.left==0){return setTimeout(function(){K(ac,Z);
},100);}aj=Z.html.length;aa=(ab.left+5);ah=(ab.top-50);W=(Z.width&&Z.width!="0")?Z.width:Math.round(aj*(0.05*aj));ag=$(Z.filter);if(ah<15){ah=ah+X.height()+70;
aa=ab.left+(W/2);}}catch(ae){return;}if(ag.length){return;}helperID="helper_"+Z.helper+"_"+ac;$helperDIV=$(document.createElement("div")).addClass("helper").css({width:W,top:ah}).attr("id",helperID).appendTo(document.body);
$tableHelper=$(document.createElement("table")).addClass("helper-table").appendTo($helperDIV);$helperTR=$(document.createElement("tr")).appendTo($tableHelper);
$contentTD=$(document.createElement("td")).appendTo($helperTR);$arrowTD=$(document.createElement("td")).appendTo($helperTR).css("width","48px");$arrowDiv=$(document.createElement("div")).addClass("helper-arrow").appendTo($arrowTD);
var ad=Z.img||"new";$img=$(document.createElement("img")).attr({src:agd.staticdomain+"/img/common/"+ad+".png"}).appendTo($contentTD);$helperContent=$(document.createElement("div")).addClass("helper-text").appendTo($contentTD);
$(document.createElement("div")).addClass("helper-title").html("Dokify").appendTo($helperContent);$p=$(document.createElement("p")).html(Z.html).appendTo($helperContent);
if(Z.hide){$helperContent.append('<div class="helper-cancel"><a class="post toggle" href="helpercancel.php?comefrom='+Z.helper+'" target="#'+helperID+'">No volver a mostrar</a></div>');
}var af=aa-$helperDIV.outerWidth();if(af<15){$helperDIV.css({left:aa+X.width()});}else{$helperDIV.css({left:af});}var ai=200;$cancelTarget=$(Z.cancel_target);
var Y=function(){$cancelTarget.animate({color:"red"},ai,function(){$cancelTarget.animate({color:"black"},ai,function(){if(Y){Y();}});});};Y();$cancelTarget.bind(Z.cancel_event,function(){$helperDIV.remove();
Y=null;});Y();agd.checkEvents($helperContent);}$.each(n.helpers,function(W,X){$.each(X,K);});}if($.browser.msie&&$.browser.version<=7){var D=$(agd.views[agd.views.activeView].elements.table),v=D.offset();
if(v){var I=(v.left+D.width()),U=$(g).width();if((I-U)>20){$("table.data").css("width",I+"px");}if(I<U){$("table.data").css("width","");}}}agd.checkEvents(null,n);
agd.load(true);if(sTop=$(g).scrollTop()){if($(".keep-visible").length){$(g).trigger("scroll");}}agd.loading=false;if(n.tour){var J=[agd.staticdomain+"/js/jquery/jquery.scrollTo.min.js?"+__rversion,agd.staticdomain+"/js/jquery/jquery.tourbus.min.js?"+__rversion];
require(J,function(){if(agd.tours[location.hash]===d){var X=$(document.createElement("div")).html(n.tour);var W=X.find(".tourbus-legs");agd.tour=W.tourbus({target:"body",urlDismiss:W.data("dismiss"),onStop:function(){},onDestroy:function(){$.post(this.urlDismiss);
$(".tourbus-overlay").hide();$(".tourbus-highlight").removeClass("tourbus-highlight");},onLegStart:function(Z,Y){agd.checkEvents(Z.el);if(Z.rawData.highlight){Z.$target.addClass("tourbus-highlight");
$(".tourbus-overlay").show();}},onLegEnd:function(Z,Y){if(Z.rawData.highlight){Z.$target.removeClass("tourbus-highlight");$(".tourbus-overlay").hide();
}}});agd.tour.page=location.hash;agd.tours[location.hash]=agd.tour;agd.tour.trigger("depart.tourbus");}});}});},checkEvents:function(u,C,y){var r=true;
if(u){selector=$(u)[0];if(!selector||!selector.innerHTML.length){g.setTimeout(function(){agd.checkEvents(u,C,y);},0);return false;}}else{selector=document.body;
}var w=(new Date()).getTime()/1000;$(selector).find(".tag-list").each(function(s,G){require([agd.staticdomain+"/js/jquery/tag-it.min.js?"+__rversion],function(){var I=$(G).attr("name");
function H(){var J=$(G.nextSibling).find("input");if(a.exists()){a.func.resize();$(J).focus();}}$(G).tagit({filedName:I,afterTagAdded:H,beforeTagAdded:H});
});});$(selector).find("#frameopen").each(function(){$(agd.elements.asyncFrame).attr("src",$(this).val());});$(selector).find(".map").each(function(){var s=this;
require([agd.staticdomain+"/js/maps.min.js?"+__rversion],function(G){require(["https://maps.googleapis.com/maps/api/js?key="+agd.gkey+"&sensor=false&callback=onMapsLoaded"],function(){new G(s);
});});});$(selector).find(".validate-file").each(function(){var K,I,J,s,H,G;K=this;J=$(this).data("url");I=$($(K).data("link"));G=I.html();H=agd.strings.cargando+"...";
require([agd.staticdomain+"/js/uploader.min.js?"+__rversion],function(L){var N=new L(K),M;if(agd.usermaxfile){N.setMaxSize(agd.usermaxfile);}$(document).one(a.event.cleanup,function(){N.abort();
});$(N).on("complete",function(R,O,Q){g.modalconfirm=false;function P(S){l.hide();I.html(G).removeAttr("disabled");return alert(S);}if(Q==500){return P(O);
}if(O){agd.actionCallback(O);}else{return P(agd.strings.error_desconocido);}});$(N).on("progress",function(Q,P,O){if(P==100){I.html(agd.strings.procesando_espera);
}else{if(M){clearTimeout(M);}I.html(H.replace("..."," "+P+"%..."));M=setTimeout(function(){I.html(agd.strings.procesando_espera);},200);}});$(K).on("change",function(){g.modalconfirm=true;
I.attr("disabled",true);l.show();I.html(agd.strings.procesando_espera);N.submit(J);});});});$(selector).find(".text-attach").each(function(){var L=this,H,s,G,I,J,K;
H=agd.staticdomain+"/img/common/load.gif?"+__rversion;J=agd.strings.cargando+"... &nbsp; <img src="+H+" />";K=$(document.createElement("div")).html(J);
G=$($(L).data("link"));s=$($(L).data("target"));I=$($(L).data("disclaimer"));document.createElement("img").src=H;require([agd.staticdomain+"/js/uploader.min.js?"+__rversion],function(M){var N=new M(L);
if(agd.usermaxfile){N.setMaxSize(agd.usermaxfile);}$(document).one(a.event.cleanup,function(){N.abort();});$(N).on("progress",function(Q,P,O){K.html(J.replace("..."," "+P+"%..."));
});$(N).on("complete",function(Q,P,O){g.modalconfirm=false;K.remove();G.show();if(!P){switch(O){case 413:alert(agd.strings.limite_upload_file.replace("%s",agd.func.formatBytes(agd.usermaxfile)));
break;default:alert(agd.strings.error_desconocido);break;}return false;}var R=s.val();s.val(R+"\n"+P+"\n").focus();I.show().css("visibility","");});$(L).on("change",function(){g.modalconfirm=true;
G.before(K);G.hide();N.submit("/getpubliclink.php");});});});$(selector).find(".affect-to-requirement").click(function(J){var K=$(this).data("target"),I=$(this).data("selected"),H=$(this).data("trigger"),T=$(this).data("focus"),s=$(this).data("counter"),Q=$(this).data("from"),R=$(this).data("selectorfrom"),O=$(this).data("total"),N=$(this).data("totaltext"),G=$(this).data("id"),P=$(this).data("targetid"),M=[],S="";
$(I+" :input").each(function(){M.push($(this).val());});$(K+" :input").each(function(V,U){if($.inArray(U.value,M)==-1){$("input[value="+U.value+"]").attr("checked",false);
}else{$("input[value="+U.value+"]").attr("checked",true);}}).one("click",function(){$(R).parent().hide();$(P).val("");});var L=$(K+" :input:checked").length;
$(s).data("counter",L);if(L==1){S=$(K+" :input:checked").data("visiblename");}else{if(L==O){S=N;}else{if(typeof $(s).data("addtext")!="undefined"){S+=L+" "+$(s).data("addtext");
}else{S=L;}}}if(G&&P){$(P).val(G);$(R).html(Q);$(R).parent().show();}$(s).html(S);$("body,html").animate({scrollTop:"0px"});if($(T)){$(T).focus();}J.stopImmediatePropagation();
return false;});$(selector).find("select.go").change(function(){var G,s;G=$(this).val();s=(s=$(this).data("target"))?s:$(this.options[this.selectedIndex]).data("target");
if(s=="form"){if(this.form){$.data(this.form,"sender",this);$(this.form).submit();}return false;}if(s=="top"){return location.href=G;}if(G){agd.func.open(G);
}});$(selector).find(".update-html").each(function(H,K){var J=$(this),G=$(this).data("href"),s=$(this).data("interval"),I=function(){if(!J.parent()){return false;
}$.get(G,function(M){var L=agd.func.getJson(M);if(L){agd.actionCallback(L);}else{if(M){J.html(M);setTimeout(I,s);}}});};I();});$(selector).find("a.timerefresh").on("click",function(){if(!(B=$(this).data("default-href"))){B=$(this).attr("href");
$(this).data("default-href",B);}var s=B+(B.indexOf("?")!==-1?"&":"?")+"timerefresh="+(new Date()).getTime();$(this).attr("href",s);});$(selector).find(".bonus").on("click",function(){var s=$(this).attr("href");
if(g[s]){try{g[s].stop();delete (g[s]);}catch(G){}}else{require([agd.staticdomain+"/js/bonus/"+s+".js?"+(new Date()).getTime()],function(){try{g[s].init();
}catch(H){}});}return false;});$(selector).find("input.alternative").click(function(){var H=$($(this).data("src")),G=$($(this).data("alternative")),s=$(this).data("alert");
if(this.checked){H.attr("disabled",true);if(nval=$(this).data("src-value")){H.val(nval);}G.closest("div[style]:hidden").show();if(s){alert(s);}if(a.exists()){a.func.resize();
}G.focus();}else{H.removeAttr("disabled");}});$(selector).find("*[data-animate]").each(function(){var H=$(this).data("animate").split(";"),s=H.length,I={};
for(i=0;i<s;i++){var G=H[i].split(":");I[G[0]]=G[1];}$(this).animate(I);});$(selector).find("img[data-src]").each(function(){$(this).attr("src",$(this).data("src")).removeAttr("data-src");
});$(selector).find(".extended-cell").extendedCells(function(){agd.checkEvents(this);});$(selector).find(".selectorcolor").each(function(s,H){if(!g.cp){require([agd.staticdomain+"/js/jquery/colorpicker.js?"+__rversion],function(){agd.checkEvents(selector,C,y);
});return false;}var G=$(this);$(H).ColorPicker({onChange:function(I,K,J){var M="#"+K,L=G.attr("target"),N=G.attr("rel");$(L).css(N,M);G.val(M);}});});
$(selector).find(".grafico").each(function(G,s){if(!$.jqplot){require([agd.staticdomain+"/js/jquery/jquery.jqplot.min.js?"+__rversion],function(){agd.checkEvents(selector,C,y);
});return false;}var I=$(this),H=I.attr("char-type")||"";var J=I.attr("data");if(J){$.ajax({method:"GET",url:J,success:function(P){var N=P.xaxis||{},K=P.yaxis||{},M=P.series||{},L=(P.legend==false)?false:true;
$.jqplot.config.enablePlugins=true;try{var O=$.jqplot[H];var R=$.jqplot(s,P.data,{title:P.title||"Grafico",series:M,legend:{show:L},seriesDefaults:{renderer:O,showMarker:true,pointLabels:{location:"no",ypadding:5}},axes:{xaxis:N,yaxis:K}});
}catch(Q){agd.func.jGrowl(Q.message);}}});}});$(selector).find(".calendario").each(function(){if($.fullCalendar===d){var H=agd.staticdomain+"/css/fullcalendar.min.css?"+__rversion,s=$(document.createElement("link")).attr({type:"text/css",rel:"stylesheet",href:H}).get(0);
g.head.appendChild(s);require([agd.staticdomain+"/js/jquery/fullcalendar.min.js?"+__rversion],function(){agd.checkEvents(selector,C,y);});return false;
}r=false;var I=this,G=$(this).attr("src").split("|");$(I).fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},timeFormat:"HH:mm",aspectRatio:3,firstDay:1,dayClick:function(L,N,M,J){if($(M.target).hasClass("fc-day-number")){var K="empresa/eventos.php?month="+(L.getMonth()+1)+"&day="+L.getDate()+"&year="+L.getFullYear()+"&poid="+ahistory.getValue("poid");
agd.func.open(K);}},eventSources:G,loading:function(J){if(J){l.show();}else{l.hide();}},viewDisplay:function(L,N){if(this.init===d){var P=ahistory.getValue("viewType")||"month",K=ahistory.getValue("time");
if(L.name!=P){L.calendar.changeView(P);}if(K&&L.calendar.getDate().getTime()!=K){var J=new Date(parseInt(K));L.calendar.gotoDate(J);}return this.init=true;
}var O={time:L.start.getTime(),viewType:L.name};var M="#"+ahistory.updateValue(O,true);ahistory.set(M);return false;},eventClick:function(M,K,J){var L=($(K.target).attr("href"))?$(K.target).attr("href"):M.href;
if(L.split("")[0]=="#"){location.href=L;}else{agd.func.open(L);}}});});$(selector).find(".async-info-load").each(function(H,s){var G=function(){var L=$(this),I=L.attr("href");
if(!$.trim(I)){return false;}if(!L.hasClass("async-info-load")){return false;}var K=L.html(),J=$(document.createElement("img")).attr("src",agd.inlineLoadingImage);
if(L.parent().hasClass("form-colum-value")){L.parent().parent().find(".form-colum-description").append(J);}else{L.empty().append(J,K);}agd.streaming.requests[I]=$.get(I,function(M){J.remove();
L.html(M);agd.checkEvents(L);});if(L.hasClass("once")){L.removeClass("async-info-load once");}};if($(this).is(":visible")){G.apply(this);}else{$(this).on("appears",function(I){G.apply(this);
});}});$(selector).find("input.enable-button").click(function(){var s=$($(this).attr("target"));if(this.checked){s.removeAttr("disabled");}else{s.attr("disabled",true);
}});$(selector).find(".close-confirm").click(function(){g.modalconfirm=false;});$(selector).find(".close-confirm").each(function(){var s=$(this).data("confirm")||agd.strings.confirmar_abandonar;
g.modalconfirm=s;});$(selector).find("input.disable-button-anychecked").each(function(){var G=$($(this).attr("target")),s="input",H=$(this).data("filter");
if(H){s+=H;}if(this.checked){G.attr("disabled",true);}else{G.removeAttr("disabled");}$(this).click(function(){var I=$($(this).attr("target")),K=false;if(this.checked){I.attr("disabled",true);
}else{var J=$(s).find(s).toArray();for(i in J){if(J[i].checked){K=true;break;}}if(!K){I.removeAttr("disabled");}}});});$(selector).find("select[multiple] option").dblclick(function(){$(this).removeAttr("selected");
});$(selector).find("option.add-option").each(function(){var I=$(this),H=$(this).parent(),s=H.find("option"),G=s.index(I);H.change(function(){var K=$(this).children(":selected");
if(G===s.index(K)){var J=agd.func.getAttributes(H);$(document.createElement("input")).attr(J).prop({type:"text"}).insertBefore(H);H.remove();}});});if("#"+$(selector).attr("id")==a.body){$(selector).find("form").each(function(H,I){var G=$(this);
var s=function(M){var O=$(this).parent(),K=O.data("affects").split(","),L=O.data("parts"),N=$(this).val(),J=false;$.each(K,function(Q,R){$target=G.find("tr#form-line-"+R);
if(L){J=(L.toString().charAt(0)=="!")?!(L.toString().indexOf(N)===-1):L.toString().indexOf(N)===-1;}else{J=false;}if(J||(!L&&O.parent().css("display")=="none")){var P=$target.hide().find("select");
}else{var P=$target.show().find("select");}if(P&&P.parent().data("affects")){setTimeout(function(){s.call(P);},0);}else{setTimeout(a.func.resize,0);}});
};$(I).find("td[data-affects]").each(function(){var J=$(this);J.find("input[type=checkbox]").change(function(){var K=J.data("affects").split(",");$.each(K,function(L,M){$affect=$(I).find("tr#form-line-"+M).slideToggle(a.func.resize);
});});J.find("select").change(s);});});(function(s){var G=function(){var H=$(this),I=H.get(0);tagName=I.tagName.toLowerCase(),$form=H.closest("form"),action=$form.attr("action"),value=H.val(),attrs=agd.func.getAttributes(this);
H.removeClass("fail");if(agd.func.validateForm($form)){setTimeout(function(){var K={};if(tagName=="input"&&I.type=="text"){if(H.hasClass("slider-value")){H.val(value);
}else{var J=$(document.createElement("span")).attr(attrs).insertBefore(H);J.html(value);if(value.length){J.removeClass("empty");}else{J.addClass("empty");
}if(H.hasClass("datepicker")){var L=value.split("/");value=L[2]+"-"+L[1]+"-"+L[0];}if(J.hasClass("hasDatepicker")){J.removeClass("hasDatepicker");}H.remove();
}}K[H.get(0).name]=value;if(action.indexOf("poid")===-1){if(typeof $form.find("input[name=poid]")!="undefined"){K.poid=$form.find("input[name=poid]").val();
K.send=1;}}$.post(action,K,function(M){if(M=="ok"){agd.navegar();}if(M=="error"||M.indexOf("error")!==-1){if(typeof J!=="undefined"){agd.func.addInputAlert(J.get(0),"No Valido");
}else{if(typeof H!=="undefined"){agd.func.addInputAlert(H.get(0),"No Valido");H.val(null);}}}if(M.indexOf("mysql")!=-1){agd.func.addInputAlert(J.get(0),"Error: ya existe");
}if(M=="null"){if(typeof J!=="undefined"){agd.func.addInputAlert(J.get(0),"Sin Cambios");setTimeout(function(){agd.func.removeInputAlert(J.get(0));},1000);
}else{if(typeof H!=="undefined"){agd.func.addInputAlert(H.get(0),"Sin Cambios");setTimeout(function(){agd.func.removeInputAlert(H.get(0));},1000);}}}else{if(typeof J!=="undefined"){agd.func.addInputAlert(J.get(0),M);
}else{if(typeof H!=="undefined"){agd.func.addInputAlert(H.get(0),M);}}}});},100);return true;}else{return false;}};$(s).find(".agd-form").on("change","select.editable, input.slider-value",function(){G.call(this);
});$("input.slider-value",s).unbind("keypress").keypress(function(H){if(H.keyCode==13){$(this).blur();}});$(s).find(".agd-form").on("blur","textarea.editable",G);
$(s).find(".agd-form").on("click","span.editable, input.editable",function(){var N=$(this),M=N.parent(),I=M.closest("form"),K=$(this).data("tagname"),L=N.attr("type"),H=$(document.createElement(K)),J=agd.func.getAttributes(this);
H.attr(J);if(this.tagName.toLowerCase()!="span"){switch(this.tagName.toLowerCase()){case"input":switch(N.attr("type").toLowerCase()){case"checkbox":N.val((this.checked)?"1":"0");
G.call(N);break;case"text":if(N.hasClass("slider-value")){G.call(N);}break;}break;}return true;}else{M.width(M.width());if(K=="input"){H.val(N.text());
}H.insertBefore(N);N.remove();agd.checkEvents(H.parent());if(H.hasClass("datepicker")){H.bind("onDateChange",G);}else{if(H.hasClass("slider")){}else{H.blur(function(){var O=G.call(this);
if(O===false){H.remove();M.append(N);}});}}H.focus().keypress(function(P){if(P.keyCode==13){var O=G.call(H);if(O===false){H.remove();M.append(N);}}});}return true;
});})(selector);var z=function(G,s){var H=$(G).slider("value"),I=$(G).attr("divide");G.value=H;if(I){H=Math.round(H/I);}$(G.nextSibling).val(H);if(s=="slidechange"&&$(G.nextSibling).hasClass("editable")){$(G.nextSibling).trigger("click");
}};$(selector).find(".slider").each(function(G,s){var H=($(s).attr("min"))?parseInt($(s).attr("min")):0;$(s).slider({min:H,max:parseInt($(s).attr("count")),value:parseInt($(s).attr("value")),animate:true}).unbind("slidechange").bind("slidechange",function(I,J){z(this,"slidechange");
}).unbind("slide").bind("slide",function(I,J){z(this,"slide");});z(s);$(s.nextSibling.form).submit(function(){$(s.nextSibling).val(s.value);});});}$(selector).find(".search-data").each(function(){var L=$(this),G=L.attr("src"),H=L.attr("href")||"",s="buscar.php?p=0&q="+encodeURIComponent(G)+"&"+H;
L.addClass("loading");var M=$(document.createElement("table")).addClass("line-data").appendTo(L);var J=function(O){L.removeClass("loading");if(O&&O.datos){$.each(O.datos,function(P){delete (this.inline);
var Q=agd.func.rowFromData(this);M.append(Q);});}else{$row=$(document.createElement("tr"));$td=$(document.createElement("td")).addClass("clean-colum").appendTo($row);
$(document.createElement("div")).addClass("message highlight").html(agd.strings.no_resultados).appendTo($td);M.append($row);}};var N=agd.cache.url[s],K=(new Date()).getTime(),I=null;
if(N){I=K-N.time;}if(I&&I<agd.cachetime){J(N.json);}else{$.getJSON(s,function(O){agd.cache.seturl(s,O);J(O);});}});$(selector).find(".confirm").click(function(H){var G=$(this),s=G.data("confirm")||G.data("confirm-once")||agd.strings.continuar;
if(G.hasClass("multiple-action")){return true;}if(G.hasClass("confirm")){if(G.data("confirm-once")){G.removeClass("confirm");}if(!confirm(s)){H.stopImmediatePropagation();
return false;}}});$(selector).find(".lock-inputs-like-radio").click(function(){var H=$(this),G=H.data("ctx")?$(H.data("ctx")):$("form"),I=H.data("filter"),s="input";
if(I){s+=I;}if(this.checked){G.find(I).not(this).attr({disabled:true}).removeAttr("checked");}else{G.find(I).removeAttr("disabled");}});$(selector).find(".confirm-to-off").on("change",function(H){var G=$(this),s=G.data("confirm")||G.data("confirm-once")||agd.strings.continuar;
if(G.hasClass("multiple-action")){return true;}if(!this.checked&&G.hasClass("confirm-to-off")){if(G.data("confirm-once")){G.removeClass("confirm-to-off");
}if(!confirm(s)){H.stopImmediatePropagation();return false;}}});$(selector).find(".lock-inputs").each(function(){var H=$(this),G=$(this).data("blockname")||"*",I=$(this).find(">"+G);
if(I.length){var s=I.get(0).tagName;H.find("input").click(function(){if(this.checked){var J=$(this).closest(s);H.find(s).not(J).find("input").attr({disabled:true}).removeAttr("checked");
}else{var J=$(this).closest(s);H.find(s).not(J).find("input").removeAttr("disabled");}});}});$(selector).find(".simular").click(function(s){agd.func.simular($(this).val());
return false;});$(selector).find("input.clear").each(function(H,G){var s={};s[$(this).attr("name")]=$(this).val().split(",");agd.func.clearSelectedItems(s);
});$(".highlight-target").hover(function(){var G=$(this),s=$(G.attr("target"));s.toggleClass("highlight");});$(".stream",selector).each(function(I,K){var G=$(document.createElement("table")).appendTo(this);
var J=$(this).attr("rel"),H=function(L){G.empty();$.each(L.rows,function(N,M){$row=$(document.createElement("tr")).appendTo(G);$.each(L.cols,function(P,O){$(document.createElement("td")).html(M[O]).appendTo($row);
});$options=$(document.createElement("td")).appendTo($row);$.each(M.options,function(O,P){$op=$(document.createElement(P.tagName));delete (P.tagName);$op.attr(P).appendTo($options);
});});a.func.resize();},s=function(L){if(!$(K).closest("body").length){return false;}ajax=$.ajax({url:"/stream/"+J+"/"+L,error:function(M){if(M.statusText!="abort"){setTimeout(function(){s("result");
},1000);}},success:function(M){var N=(L=="result")?0:1000;if(M){H(M);}setTimeout(function(){s("change");},N);}});};s("result");});$(selector).find("input.count").click(function(){var I=$(this).data("count-target"),H=$(I),G=(H.data("counter")?H.data("counter"):H.text()),J=H.data("init"),s=H.data("name");
G=G?parseInt(G,10):0;G=this.checked?G+1:G-1;H.data("counter",G);if(G==J&&typeof H.data("inittext")!="undefined"){G=H.data("inittext");}if(G==1&&typeof H.data("elementonechecked")!="undefined"){G=$("input[name^='"+s+"']:checked:enabled").data("text");
}if(typeof H.data("addtext")!="undefined"&&!isNaN(G)){G+=" "+H.data("addtext");}H.html(G);});$(".fast-add",selector).unbind("keypress").keypress(function(M){if(M.keyCode==13){if(agd.agent){alert("No puedes modificar el elemento");
return false;}var N=$(this),K=N.val(),G=N.attr("href"),H=N.attr("target"),I=$(H),L=I.attr("id")+"[]",s=N.attr("prefixasignados")||"e-a-",P=N.attr("prefixdisponibles")||"e-d-";
var J=function(X,Y){var S=ahistory.getParams(G),U=$(document.createElement("li")).attr("id","id-li-"+X+"-"+S.poid).draggable(m),V=$(document.createElement("label")).attr({"for":"lbl-"+X}).appendTo(U),W=$(document.createElement("span")).addClass("relation-options").appendTo(V),Q=$(document.createElement("input")).attr({type:"hidden",value:X,name:L,id:"val-e-a-"+S.poid+"-"+X}).appendTo(V),R=$(document.createElement("input")).addClass("line-assign").attr({type:"checkbox",id:"lbl-"+X}).appendTo(V),T=$(document.createElement("span")).addClass("ucase").html("&nbsp;"+Y.nombre).appendTo(V);
html='<span class="update" target="#varl-'+s+S.poid+"-"+X+'" rel="name" update="'+P+S.poid+'[]"><img src="'+agd.staticdomain+'/img/famfam/delete.png" class="toggle" target="#id-li-'+X+"-"+S.poid+'" /></span>&nbsp;';
if(!Y.rel){html+='<img src="'+agd.staticdomain+'/img/famfam/add.png" class="slide-list link" name="'+Y.nombre+'" href="'+X+'" rel="#'+s+S.poid+'" target="#'+s+S.poid+'-op" />';
}W.html(html);agd.checkEvents(W);return U;};var O=function(S){if(S.length){try{var R=agd.func.getJson(S);for(key in R){var Q=R[key],U=J(key,Q).appendTo(I);
}I.find(".sinasignar").remove();I.get(0).scrollTop=I.get(0).scrollHeight;N.addClass("complete");}catch(T){agd.navegar();}}else{N.addClass("erro");agd.func.jGrowl("error-asignar",agd.strings.error);
}};N.addClass("waiting");valor=null;$.post(G,{data:K},function(Y){N.removeClass("waiting");if(Y){if(isNaN(Y)){if(Y=="patron"){alert("El nombre no cumple con el patron necesario");
return false;}if(Y=="asignado"){alert(agd.strings.agrupador_asignado);return false;}if(Y=="imposible"){alert(agd.strings.agrupador_existente_otro_agrupamiento);
return false;}var X=agd.func.getJson(Y);if(X.length){var R={name:"item",type:"radio",innerHTML:K,value:K,checked:"checked",className:"strong"};X.unshift(R);
var S=agd.create.ul(X),V=agd.strings.titulo_seleccionar,U=[{innerHTML:agd.strings.aceptar,className:"unbox-it"}],W=agd.create.modal(V,U);$(W).find(".cbox-content").append($(S).addClass("item-list")).addClass("cbox-list-content");
a.func.open({html:W});$(W).find("button.unbox-it").click(function(){$.post(G,{data:$(":checked").val(),force:true},O);});}else{for(key in X){var Q=X[key],T=J(key,Q).appendTo(I);
}I.find(".sinasignar").remove();N.addClass("complete");}}else{if(confirm(agd.strings.elemento_existente+". "+agd.strings.desea_asignarlo)){$.post(G,{data:K,force:true},O);
}}}else{N.addClass("error");}g.setTimeout(function(){N.removeClass("complete error");},4000);});return false;}});$(".iphone-checkbox",selector).iphoneStyle();
$(".stylesheet",selector).click(function(){var s=$(this).attr("href");$("head link").remove();$(document.createElement("link")).attr({rel:"stylesheet",href:"../css/"+s,type:"text/css"}).appendTo(head);
return false;});$("button.btn:not(.searchtoggle,.list-move,#boton-buscar),.toggle[title='Eliminar']").click(function(){if(agd.agent){alert("1 No puedes modificar el elemento");
return false;}});$("#menu-ayuda-buscar").remove();$notification=$(selector).find("#notification-complete");if($notification.length){$notification.each(function(){var s=$(this).data("id"),G=k;
if(s){var H=document.getElementById(s);if(H){G=H;}}agd.func.removeInPageAlert(G);});}var n=$(selector).find("#reloader, .reloader");if(n.length){agd.cache.url={};
n.removeAttr("id").removeClass("reloader");var B=n.attr("href");if(B){location.href=B;}else{try{var p=false;if(agd.history.length){var E=ahistory.getPage(agd.history[agd.history.length-1].url).split("/");
if(E[2]&&E[2]=="eliminar.php"&&ahistory.getPage()=="buscar.php"){location.href=location.hash+"&force=1";return false;}}agd.navegar(p);}catch(D){}}}$("input.datepicker",selector).datepicker({dateFormat:"dd/mm/yy",showOn:"focus",firstDay:1,onSelect:function(G,s){this.edited=true;
$(this).trigger("onDateChange");}}).each(function(){var s=$(this),G=s.val();if(G.indexOf(" ")!=-1){s.val(G.split(" ")[0]);}});$(selector).find("input.timepicker").timepicker({showPeriod:false,showPeriodLabels:false,hourText:agd.strings.hora,minuteText:agd.strings.minuto}).focus(function(){this.edited=true;
});$(".sendhash",selector).each(function(G,H){var I=agd.strings.buscar+"...";var s=["docs:caducados","docs:validos","docs:sin-anexar","docs:anulados","docs:pendientes","tipo:empresa","tipo:empleado","tipo:usuario","tipo:maquina","tipo:agrupador"];
$("#buscar").focus(function(){if(!$(this).val()||$(this).val()==I){$(this).val("");}}).blur(function(){if(!$(this).val()||$(this).val()==""){$(this).val(I);
}}).autocomplete({source:s,open:function(J,K,L){$("ul.ui-autocomplete").css("width",($("#buscador").width()-7));}});$(H).unbind().submit(function(){var J=encodeURIComponent($.trim($("#buscar").val())).replace("%3A",":").replace("%23","#").replace("%2C",",");
if(!J||J==I){agd.func.jGrowl("ayuda_busqueda",agd.strings.ayuda_busqueda,{header:agd.strings.ayuda,sticky:true});return false;}location.hash=$(this).attr("action")+"?p=0&q="+J;
return false;});});$(selector).find(".post[href]").off("click").on("click",function(K){K.preventDefault();try{var J=$(this),I=J.attr("type"),s=J.attr("href");
if(I&&I=="checkbox"){var G=(s.indexOf("?")==-1)?"?":"&";s+=G+"checked="+((J.get(0).checked)?"1":"0");}var H=$(this).data("text");if(H){$(this).html(H);
}if($(this).data("disable")){$(this).attr("disabled","disabled");}$.post(s,function(M){if(I&&I=="checkbox"&&M==1){if(J.get(0).checked){J.removeAttr("checked");
}else{J.get(0).checked=true;}}try{var L=agd.func.getJson(M);agd.actionCallback(L);if(I&&I=="checkbox"&&L.result==1){if(J.get(0).checked){J.removeAttr("checked");
}else{J.get(0).checked=true;}}}catch(O){}var N=J.data("target");if(N){$(N).html(M);}});}catch(K){}});$(selector).find("button[href]:not(.post)").unbind("click").click(function(){if($(this).hasClass("sendinput")||$(this).hasClass("goto")||$(this).hasClass("multiple-action")||$(this).hasClass("box-it")){}else{var H=$(this).attr("href"),G=$($(this).attr("target")),s=H.split("");
if($(this).hasClass("toframe")){G=$("#async-frame");}if(G.length&&G[0].tagName.toUpperCase()=="IFRAME"){G.attr("src",H);return false;}else{if(s[0]=="#"){document.location=H;
}else{agd.func.open(H);}}return false;}});$(selector).find(".list-move").click(function(N){var R=$($(this).attr("rel")),s=R.attr("id"),G=s.substring(0,s.lastIndexOf("-")),M=G.substring(G.lastIndexOf("-")+1),K=s.substring(4),O=$(".sinasignar.e-"+K),I=$($(this).attr("target")),J=I.attr("id"),H=J.substring(0,J.lastIndexOf("-")),S=H.substring(H.lastIndexOf("-")+1),L=R.find("input:checked:visible"),Q=L.length-1;
var P=false;if(typeof O!="undefined"&&S==="a"&&L.length>0){O.hide();}else{if(typeof O!="undefined"&&S==="d"&&L.length>0){O.show();}}L.each(function(X){var Z=$(this.parentNode.parentNode);
var T=Z.data("ishierarchy");if(T=="yes"&&!P){P=true;if(!confirm(agd.strings.alert_desasignar_elementos_papelera)){return false;}}var Y=Z.find("input[type=text]"),W=Y.length;
while(W--){var aa=Y[W],U=$(aa).val();aa.setAttribute("value",U);}var ac=$(document.createElement("li")).html(Z.html());if(rel=Z.attr("rel")){ac.attr("rel",rel);
var V=I.find("#"+S+"_"+rel),ab=R.find("#"+M+"_"+rel);if(V.length){V.after(ac);}else{$(document.createElement("li")).html(ab.html()).addClass("group").attr("id",S+"_"+rel).appendTo(I).after(ac);
}Z.remove();}else{ac.appendTo(I);Z.remove();}if(Q===X){if(rel){R.find("li.group + li.group").remove();$list=R.find("li[rel]");if(!$list.length){R.find("li").remove();
}}I.find("input").each(function(){var ad=$(this).prop("name").replace(G,H);$(this).attr("name",ad);});a.func.resize();}});return false;});$(selector).find(".send-info").click(function(){agd.func.sendInfo({url:$(this).prop("href"),confirm:false,src:(this)});
return false;});$(selector).find(".async-form").bind("submit",function(N){var G=this,K=$.data(this,"sender"),s=$.trim($(G).prop("method").toLowerCase()),M=(s&&$[s])?$[s]:$.post;
if(K&&$(K).hasClass("showload")){var O=$("span > span",K),L=O.html();O.html("<img src='"+agd.inlineLoadingImage+"' style='vertical-align: middle;' /> "+L);
}if(!agd.func.validateForm(G)){return false;}var Q=$(K).data("text");if(Q){$(K).html(Q);}if($(K).data("disable")){g.setTimeout(function(){$(K).attr("disabled","disabled");
},0);}var P=$("input:hidden[name=type]").val();var J=$("input:hidden[name=validate]").val();if("async-form"===P&&d!==J){return false;}$input=$(document.createElement("input")).attr({type:"hidden",name:"type",value:"async-form"}).appendTo($(G));
if($(K)&&$(K).attr("name")&&$(K).attr("value")){$(document.createElement("input")).attr({type:"hidden",name:$(K).attr("name"),value:$(K).attr("value")}).appendTo($(G));
}var I=$(G).prop("action"),H=$(G).serialize();var R=function(T){if($.trim(T)){if($(G).hasClass("return")){history.back(1);}else{if($(G).attr("rel")){location.hash=$(G).attr("rel");
}}$.jGrowl(T);}};setTimeout(function(){$(G).find("button[type=submit], select.go").attr("disabled","true");},1);l.show();var S=M(I,H,function(U){var V=S.getResponseHeader("Content-type");
if(V.indexOf("text/plain")!==-1){R(U);if($(G).hasClass("reload")){agd.navegar();}if(!$(K).hasClass("detect-click")){var T=$(G).find(".auto-trigger").find("input:checked");
T.each(function(){var X=$(this).closest("div.auto-trigger").find("button");var Y=X.attr("name"),W=X.attr("value");M(I,H+"&"+Y+"="+W,R);});}}else{if(V.indexOf("text/html")!==-1){a.func.open({html:U});
}else{if(V.indexOf("application/json")!==-1){agd.actionCallback(U);}}}});return false;}).each(function(s,G){for(name in agd.inputs){$(G).find("input[name='"+name+"']").blur(agd.inputs[name]).keyup(function(){this.edited=true;
}).on("paste",function(){this.edited=true;});}});$(".to-iframe-box",selector).click(function(){var J=$(this).attr("name"),H=$("#iframe-"+J),I=$($(".cbox-content")[0]),s=$(this).attr("href");
if(!H.length){H=$(document.createElement("iframe")).attr({name:"iframe-"+J,id:"iframe-"+J}).addClass("iframe-box").appendTo(I);}if(a.exists()){var G=function(){$(H).attr("src",s);
$(g).unbind(a.event.resize,G);};$(g).bind(a.event.resize,G);a.func.resize();}return false;});$(".form-to-box",selector).each(function(I,H){var G=this,K,S,J=$(G).prop("method")||"post",s=$.trim(J.toLowerCase()),L=(s&&$[s])?$[s]:$.post,P="/agd/getuploaded.php",N=agd.uploadPath;
var R=function(){var U=$("input[type='file']",G),T=U.length;while(T--){if(!U[T].isComplete&&!$(U[T]).attr("complete")){return false;}}return true;};for(name in agd.inputs){$(G).find("input[name='"+name+"']").blur(agd.inputs[name]).keyup(function(){this.edited=true;
}).on("paste",function(){this.edited=true;});}$(".filecontainer",G).each(function(X,aa){if(!X){var W=document.createElement("img");W.src=agd.staticdomain+"/img/progressbg_green.gif";
}var U=$("button",this),V=$("input",this),T=($(U).outerHeight()+4),Y=($(U).width()+8),Z=($(U).width()-Y);if($.browser.webkit){Y+=6;}$(V).css({top:"-"+T+"px",left:"-"+Z+"px",display:"inline"});
$(this).hover(function(){$(U).focus();}).mouseout(function(){$(U).blur();}).css({width:Y+"px",height:T+"px",visibility:"visible"});});$("input[type='file']",G).change(function(ai){var Y=this;
if(Y.restoreForm){Y.restoreForm();}$(document).one(a.event.cleanup,S);g.modalconfirm=true;var al=$($(this).attr("target")),ag=$(G).attr("action"),W=ag.split("?"),X=W[1]+"&_="+(new Date()).getTime(),af=$(G).attr("mtd"),V=$(G).attr("enctype"),ab=$(this),ak=$(this).attr("filetype")||null,ah=encodeURIComponent((new Date()).getTime()),ae;
Y.isCanceled=false;Y.isComplete=false;al.html("Inicializando...");try{$(Y).removeAttr("complete");}catch(ai){}S=function(am,ao){ao=ao||false;if(Y.isCanceled){return;
}am=(am)?am:"";g.modalconfirm=false;$(document).off(a.event.cleanup,S);Y.isCanceled=true;if(!ao){ab.val("");}if(Y.lastProgress){delete (Y.lastProgress);
}var an=$(document.createElement("span")).html(am);al.empty().append(an);g.setTimeout(function(){$(agd.elements.asyncFrame).attr("src","/blank.html");},500);
clearTimeout(ae);return an[0];};var aa=function(an,am){$(al).find(".progressbar").css("background-position",(100-an)+"% 50%");$(al).find("span").html(an+"% ("+agd.func.formatBytes(am.upload)+"/"+agd.func.formatBytes(am.total)+")");
if(an==100){Y.isComplete=true;}};var ad=(new Date()).getTime();var T=function(ap,am){var ao=agd.func.formatBytes(ap);if(ap<1024*1024*10){var an=agd.strings.expl_limite_upload;
if(agd.userType!="employee"){an+=". <a href='/app/payment/license'>"+agd.strings.pincha_aqui+"</a>";}}else{var an=agd.strings.limite_upload_file.replace("%s",ao);
}if(g.ga){ga("send","event","Document","Upload","Upload "+ao.replace(" ","")+" limit");}S(an,true);};var U=function(an,am,aq){Y.isComplete=true;if(ak&&aq.indexOf(ak)!==-1){switch(ak){case"image":var ao=document.createElement("img"),at=$(a.body).width();
var ar=$($(a.body)).find("#photoContainer").data("maxheight");ao.onload=function(){var aJ=ao.width,aD=ao.height,ax=$(ao).offset(),aF=$(a.body).offset();
if(aD>ar){$(ao).height(ar);}if(!$.browser.msie){var aI=$(this).faceDetection({error:function(aK,aM,aL){}});var ay=($(a.body).width()-$(ao).width())/2;if(!aI[0]){var aw=50;
aI[0]={positionX:ay+aw,positionY:ax.top-aF.top+aw,x:aw,y:aw,height:aw,width:aw};}var aB=0;var az=(aI[aB].height/100),aH=az*50;var aC=(aI[aB].width/100),aA=aC*40;
var aG={height:aI[aB].height+(aH*2),width:aI[aB].width+(aA*2),x:aI[aB].x-(aA*1.2),y:aI[aB].y-(aH*1.2)};$div=$(document.createElement("div")).appendTo(al);
var aE={};for(attr in aG){aE[attr]=$(document.createElement("input")).addClass("photo-size").attr({type:"hidden",name:"size["+aB+"]["+attr+"]",value:aG[attr]}).appendTo(al);
}$div.draggable({start:function(aK,aL){this.initposition={x:aK.clientX,y:aK.clientY};},stop:function(aN,aO){var aL=aN.clientX-this.initposition.x,aK=aN.clientY-this.initposition.y;
var aP=parseInt(aE.x.val()),aM=parseInt(aE.y.val());aE.x.val(aP+aL);aE.y.val(aM+aK);}}).resizable({aspectRatio:".75",stop:function(aK,aL){aE.width.val($div.width());
aE.height.val($div.height());}}).addClass("face").css({position:"absolute",left:aI[aB].positionX-(aA*1.2)+"px",top:aI[aB].positionY-(aH*1.2)+"px",width:aG.width+"px",height:aG.height+"px",resize:"both","background-color":"transparent"}).attr("disabled",true);
}a.func.resize();};ao.id="uploaded-img";$(al).append(ao);ao.src=P+"?action=dl&mode=img&t="+(new Date()).getTime();break;}}else{try{var au=(an.length>60)?an.substring(0,60)+"...":an,av=Math.round(parseInt((am)/1024));
$(document.createElement("a")).attr({title:agd.strings.descargar+an+" ("+av+"Kb)",href:P+"?action=dl",target:"async-frame"}).html(au+" <i>("+aq+")</i>").appendTo(al);
}catch(ap){$(al).html(agd.strings.error_texto);}}a.func.resize();if(btn=$("button.send",G).get(0)){btn.restore();}};al.html("<div id='uploadProgressBar' class='progressbar line-block'> </div>&nbsp;<span>0%</span> <a style='font-weight:normal'>Cancelar</a>");
$(al).find("a").click(function(am){S("Cancelado por el usuario");});if((files=Y.files)&&files[0]&&files[0].name&&files[0].upload){var aj=Y.files[0],ac=aj.size;
if(ac>agd.usermaxfile){return T(agd.usermaxfile,ac);}var Z=aj.upload(N+"?"+X,{onprogress:function(an){if(an.lengthComputable){var am=Math.round((an.loaded*100)/an.total);
aa(am,{upload:an.loaded,total:an.total});}},onload:function(am){al.html("<span><img src='"+agd.inlineLoadingImage+"' /></span>");},onsuccess:function(an){var ao=this.getResponseHeader("content-type");
if(ao.indexOf("application/json")!==-1){var am=$.parseJSON(this.responseText);am.iface=agd.iface;agd.actionCallback(am);}al.empty();U(aj.name,ac,aj.type);
$(G).data("pass",true);},onerror:function(am){if(am=="size_error"){return T(agd.usermaxfile,ac);}else{if(am=="write_error"){S(agd.strings.error_texto);
}else{if(am){delete (File.prototype.upload);$(Y).trigger("change");return false;}else{S(agd.strings.error_texto);}}}}});$(al).find("a").click(function(){try{Z.abort();
}catch(am){}});return false;}else{$("#UPLOAD_IDENTIFIER",G).remove();$(G).prepend($(document.createElement("input")).attr({type:"hidden",name:"UPLOAD_IDENTIFIER",value:ah,id:"UPLOAD_IDENTIFIER"}));
Y.restoreForm=K=function(){$("#UPLOAD_IDENTIFIER",G).remove();$(G).attr({action:ag,enctype:V,method:af,target:al});};$(G).attr({action:N+"?"+X,enctype:"multipart/form-data",method:"post",target:"async-frame"});
$("#async-frame").load(function(){if(this.readyState!="complete"){return;}$(this).unbind("load");if(!G.complete){$.get(P+"?action=info&"+X,function(ao,aq){clearTimeout(ae);
if(!Y.isCanceled){if(ao){if(ao.data==-1){return T(ao.max,ao.current);}else{if(!ao.archivo||ao.archivo.error){if(ao.archivo&&ao.archivo.error){S("Ocurri un error #"+errorString+". Intentalo de nuevo");
}else{S(agd.strings.error_texto);}}else{al.empty();var am=$(G).find(".formato-solicitante");if(am.length){var an=function(av,ax){var at=$("img",av),ar=at.length,aw=false;
while(ar--){var au=$(at[ar]).attr("rel");if(au==ax){aw=true;break;}}return aw;};if(am.length==1){if(!an(am[0],ao.archivo.type)){S("Formato no aceptado");
return false;}}else{am.each(function(av,au){var at=$(au).attr("rel"),ax=$(at),ar=ax.find(".solicitante-funciones"),aw=ax.find("input[type='checkbox']");
$(".error",ax).remove();if(!an(au,ao.archivo.type)){$(document.createElement("span")).html("Formato no valido para este solicitante").addClass("error").appendTo(ax);
ar.css("display","none");aw.attr("disabled",true).removeAttr("checked");}else{ar.css("display","");aw.removeAttr("disabled").attr("checked",true);}});}}try{U(ao.archivo.name,ao.archivo.size,ao.archivo.type);
ao.iface=agd.iface;agd.actionCallback(ao);if(a.exists()){a.func.resize(function(){agd.checkEvents(a.body);});}}catch(ap){}}}}else{S("Ocurri un error desconocido. Intentalo de nuevo");
}}});}else{Y.isComplete=true;g.modalconfirm=false;$(document).off(a.event.cleanup,S);$(G).submit();}});$(G).submit();}ae=g.setTimeout(function(){if((!Y.isComplete&&typeof Y.lastProgress=="undefined"||Y.lastProgress==0)){al.html("<span>Subiendo, espera por favor... <img src='"+agd.inlineLoadingImage+"' /> <a>Cancelar</a></span>");
$("a",al).click(function(){S("Cancelado por el usuario");});}},6000);});$(G).find(".uploadedfile").each(function(){var T=$($(this).data("input-from"));
T.attr("complete",true);$(G).data("pass",true);});var O=$("button.send",G).unbind("click").click(function(T){try{$(this).attr({disabled:true});if(R()){$(this).find("span > span").html(agd.strings.enviando);
$(G).submit();}else{$("span > span",this).html(agd.strings.esperando_cargar_archivos);}}catch(T){}return false;}).removeAttr("disabled").get(0);try{if(O&&O.innerHTML){var Q=O.innerHTML;
O.restore=function(){$(O).removeAttr("disabled");$(O).find("span > span").html(Q);};}}catch(M){}$(this).unbind("submit").submit(function(W){if(G.getAttribute("enctype")=="multipart/form-data"&&!$(G).data("pass")){if(!$(G).attr("rel")&&R()){g.modalconfirm=false;
$(document).off(a.event.cleanup,S);K();$(G).data("pass",true);$(G).submit();return false;}else{return true;}}else{var U=$(G).data("confirm-text");if(U){if(!confirm(agd.strings[U]||U)){O.restore();
return false;}}g.modalconfirm=false;$(document).off(a.event.cleanup,S);if(agd.func.validateForm(G)){var X=$(G).serialize(),V=$(G).attr("action"),T=(V.indexOf("?")==-1)?"?":"&";
$("*[disabled]:not(.attr-upload)",G).each(function(){X=X+"&"+$(this).attr("name")+"="+encodeURIComponent($(this).val());});agd.func.open(V+T+X,function(){g.modalconfirm=false;
},s,$(G).data("loading-lock"));}}return false;});});$(".mustfocus",selector).focus(function(){$(this).removeClass("mustfocus");});$(".date-period",selector).click(function(I){var H=$(this),J=H.offset(),s=$(this).outerHeight();
if(!H.hasClass("date-period")){return true;}if(this.extended){if(this.open){$(this.extended).fadeOut();this.open=false;}else{$(this.extended).fadeIn();
this.open=true;}}else{$div=$(document.createElement("div")).css({position:"absolute",top:J.top+s-1,left:J.left+3,visibility:"hidden"}).addClass("btn-extend").appendTo(document.body);
if(H.hasClass("month")){var G=(new Date()).getFullYear();$start=$(document.createElement("select"));$.each($.datepicker._defaults.monthNames,function(K,M){var L="1/"+(K+1)+"/"+G;
$(document.createElement("option")).attr("value",L).html(G+" - "+M).appendTo($start);});$group=$(document.createElement("optgroup")).attr("label","----- "+(G-1)).appendTo($start);
$.each($.datepicker._defaults.monthNames,function(K,M){var L="1/"+(K+1)+"/"+(G-1);$(document.createElement("option")).attr("value",L).html((G-1)+" - "+M).appendTo($group);
});$end=$(document.createElement("select"));$.each($.datepicker._defaults.monthNames,function(K,N){var M=$.datepicker._getDaysInMonth(G,K),L=M+"/"+(K+1)+"/"+G;
$(document.createElement("option")).attr("value",L).html(G+" - "+N).appendTo($end);});$group=$(document.createElement("optgroup")).attr("label","----- "+(G-1)).appendTo($end);
$.each($.datepicker._defaults.monthNames,function(K,N){var M=$.datepicker._getDaysInMonth((G-1),K),L=M+"/"+(K+1)+"/"+(G-1);$(document.createElement("option")).attr("value",L).html((G-1)+" - "+N).appendTo($group);
});$table=$(document.createElement("table"));$tr=$(document.createElement("tr")).appendTo($table);$td=$(document.createElement("td")).html("Fecha inicio").appendTo($tr);
$td=$(document.createElement("td")).append($start).appendTo($tr);$tr=$(document.createElement("tr")).appendTo($table);$td=$(document.createElement("td")).html("Fecha fin").appendTo($tr);
$td=$(document.createElement("td")).append($end).appendTo($tr);}else{$start=$(document.createElement("input")).attr({type:"text",size:10}).addClass("datepicker");
$end=$(document.createElement("input")).attr({type:"text",size:10}).addClass("datepicker");$table=$(document.createElement("table"));$tr=$(document.createElement("tr")).appendTo($table);
$td=$(document.createElement("td")).html("Fecha inicio").appendTo($tr);$td=$(document.createElement("td")).append($start).appendTo($tr);$tr=$(document.createElement("tr")).appendTo($table);
$td=$(document.createElement("td")).html("Fecha fin").appendTo($tr);$td=$(document.createElement("td")).append($end).appendTo($tr);}$button=$(document.createElement("button")).addClass("btn").css({margin:"3px 0 0 -3px"}).click(function(){var L=H.prop("href"),M=(L.indexOf("?")==-1)?"?":"&",N=encodeURIComponent($.trim($start.val())),K=encodeURIComponent($.trim($end.val()));
if(!N||!K){return alert("Selecciona las fechas");}L+=M+"datestart="+$start.val()+"&dateend="+$end.val();H.attr("href",L).removeClass("date-period").trigger("click").addClass("date-period");
$div.fadeOut();this.open=false;return false;}).html("<span><span>"+agd.strings.enviar+"</span></span>");$tr=$(document.createElement("tr")).appendTo($table);
$td=$(document.createElement("td")).attr("colspan",2).css({"text-align":"right",padding:"0"}).append($button).appendTo($tr);$div.append($table);agd.checkEvents($div);
this.extended=$div.get(0);this.open=true;agd.func.registerCallback("extended-buttons",function(){$(".btn-extend").hide();});$div.hide().css("visibility","").fadeIn();
}I.stopImmediatePropagation();return false;});if(agd.views.activeView=="data"){$("button",selector).click(function(){var s=$(this).attr("funcion");if(s&&agd.func[s]){agd.func[s]();
}});$(selector).find(".multiple-action").click(function(K){var J=$(this),H=J.attr("href")||J.prop("href"),G=J.prop("confirm"),s=J.prop("rel");if(J.hasClass("confirm")){G=(G)?G:agd.strings.continuar;
}if(H.split("")[0]=="#"){var L=agd.func.array2url("selected",agd.func.selectedRows(false,s)),I=L.split("");if(!$.trim(L)&&!J.hasClass("continue")){return agd.func.jGrowl("sin_seleccionar",agd.strings.titulo_seleccionar);
}if(I[I.length-1]=="&"){L=L.substring(0,L.length-1);}H+="&"+L;location.href=H;}else{agd.func.sendInfo({url:$(this).prop("href"),confirm:G,src:this});}return false;
});}$(".searchtoggle",selector).each(function(){var H=$(this).attr("target"),G=ahistory.getValue(H),I=$(this).attr("value")||1,s={};if(G&&I==G){$(this).addClass("selected");
}$(this).click(function(){if(G&&I==G){ahistory.remove(H);}else{s[H]=I;ahistory.updateValue(s);}});});$(".click",selector).click(function(){alert($(this).attr("href"));
});$("input.line-assign",selector).click(function(){$(this).closest("li").toggleClass("selected-element");});$(".checkall",selector).unbind("click").click(function(){if(target=$(this).attr("target")){var s=target+" input[type='checkbox']:visible",H=$(s);
var G=$(this).data("trigger");if($(H[0]).attr("checked")){H.removeAttr("checked");H.closest("li").removeClass("selected-element");H.closest("tr").removeClass("selected-row");
if(G){$(G).html($(G).data("init"));}}else{H.attr("checked",true);H.closest("li").addClass("selected-element");H.closest("tr").addClass("selected-row");
if(G=$(this).data("trigger")){var I=$(G).data("init");$(G).html(I+H.length);}}}return false;});$(".filter",selector).click(agd.func.filter);var t=$(selector).find("#editor");
if(t.length&&t.tinymce){t.tinymce({script_url:"/res/js/tiny_mce/tiny_mce.js",theme:"advanced",plugins:"autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,strings",theme_advanced_buttons1:"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect, cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",theme_advanced_buttons2:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen,insertlayer,moveforward,movebackward,absolute,|,styleprops,spellchecker,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,blockquote,pagebreak,|,insertfile,insertimage,|,strings",theme_advanced_buttons3:false,theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:false,skin:"o2k7",skin_variant:"silver"});
}$(".form-to-back",selector).submit(function(){var s=this,G=function(I){var H=$(s).attr("rel");if(H&&H.length){location.hash=$(s).attr("rel");}$.jGrowl(I);
};if($(s).prop("method").toLowerCase()=="post"){$.post($(s).attr("action"),$(s).serialize(),G);}else{$.get($(s).attr("action")+"?"+$(s).serialize(),G);
}return false;});var F={drop:function(O,N){var M=$(this),I=$(M).attr("id"),K=I.substring(0,I.lastIndexOf("-")),G=I.substring(I.lastIndexOf("-")+1,I.length);
var L=$(N.draggable).closest("ul"),H=$(L).attr("id");if(!L||!H){return false;}var J=H.substring(0,H.lastIndexOf("-")),s=H.substring(H.lastIndexOf("-")+1,H.length);
if(G!==s){agd.func.jGrowl("select","No puedes soltar este elemento aqui");return false;}if(K===J){return false;}newElement=$(N.draggable).clone().prependTo(M);
$(N.draggable).remove();$(N.helper).remove();var P=$("input[type='hidden']",newElement)[0];$(P).attr("name",$(P).attr("name").replace(J,K));$(newElement).draggable(m);
$("input.line-assign",newElement).click(function(){$(this).closest("li").toggleClass("selected-element");});if(a.exists()){a.func.resize(function(){agd.checkEvents(a.body);
});}},greedy:true,hoverClass:"drophover",accept:"li"},m={revert:"invalid",scroll:false,appendTo:"body",helper:"clone",start:function(){if($(a.id).css("display")!="none"){return false;
}$this=$(this),increment=60,$ul=$(this).closest("ul"),id=$ul.attr("id"),ssearch=(id.indexOf("e-a"))?"e-d":"e-a",sreplace=(id.indexOf("e-a"))?"e-a":"e-d",newid=id.replace(ssearch,sreplace),$newul=$("#"+newid),ulheight=$newul.height(),ulpos=$ul.css("position"),$td=$newul.closest("td"),tdwidth=$td.width(),viewwidth=$(document).width();
if(!$newul.get(0).droppable){$newul.droppable(F);$newul.get(0).droppable=true;}$ul.css("position","");$this.css("z-index",99999);$td.css({width:$td.outerWidth()+increment,height:$td.outerHeight()+increment,margin:"-"+(increment/2)+"px 0 0 -"+(increment/2)+"px"}).addClass("zoom");
var s=$td.offset();if(!s){return false;}if($td.offset().left<10){$td.css("margin-left",0);}newwidth=$(document).width();if(viewwidth!=newwidth){var G=newwidth-viewwidth+10;
$td.css("margin-left","-"+((increment/2)+G)+"px");}$newul.css("height",$td.height());$("#cboxOverlay").css("opacity",0.5).show();$(document).one("mouseup",function(){$ul.css("position",ulpos);
$td.removeAttr("style").removeClass("zoom").css("width",tdwidth);$this.removeAttr("style");$newul.css({height:ulheight});$("#cboxOverlay").hide();});}};
$("td.field-list li",selector).click(function(s){if(s.target&&s.target.tagName.toUpperCase()=="LABEL"){$(this).find("a").click();}});if($.browser.mozilla){$("td.field-list li",selector).mouseover(function(){if(!this.draggable){var s=$(this).find("input")[0];
if(s&&s.disabled){$(this).draggable(m);this.draggable=true;}}});}$(".find-html",selector).keyup(function(H){var s=this,G=H,I="find-html-loading";$(s).addClass(I);
if(this.timeout){clearTimeout(this.timeout);}this.timeout=g.setTimeout(function(){var Q=$(s).val().toUpperCase(),N=($(s).attr("target")).split(","),M=N.length,J=$(s).attr("rel"),K=$(s).attr("search");
if(K){K=K.replace("%s",Q);}while(M--){var P=N[M],O=$(P),S=false;var L=O.find(J),R=L.length;$(L).each(function(U,X){var W=$.trim($(X).text()).toUpperCase();
if(W.indexOf(Q)===-1){S=true;$(X).css("display","none");}else{$(X).css("display","");}if(U===(R-1)){if(a.exists()){s.timeout=g.setTimeout(function(){a.func.resize(null,{callback:function(){$(s).removeClass(I);
$(s).focus();}});},150);}else{$(s).removeClass(I);}if(O.get(0).tagName.toLowerCase()=="select"){try{O.get(0).selectedIndex=O.find("option:not(:hidden)").get(0).index;
}catch(V){}}if(K){if(S){var T=$(document.createElement("div")).css("width",$(P).width()).addClass("filter-text").appendTo(P).html(K);$(P).css({position:"relative","padding-top":T.outerHeight()+3});
}else{$(P).css("padding-top","").find(".filter-text").remove();}}if(O.hasClass("extended")){try{if(G&&G.keyCode==13){O.find("*[href]:visible").click();
}}catch(V){}}}});}},100);}).keypress(function(){if(this.timeout){clearTimeout(this.timeout);}});$(".buscador-global").submit(function(J){if($("#advanced-search",this).css("display")=="none"){var L="buscar.php?p=0&q="+this.q.value;
location.hash=L;}else{var N=new Array(),I=this.elements,K=I.length,H=false;N.push("tipo:agrupador");while(K--){if(!K){break;}var s=I[K],M=$(s).attr("name"),G=$(s).val();
if($.trim(G)&&s.tagName.toLowerCase()!="button"){if($.trim(M)){N.push(M+':"'+G+'"');}else{N.push('"'+G+'"');}H=true;}}if(!H){return false;}var L="buscar.php?p=0&q="+N.join(" ");
location.hash=L;}return false;}).find("#global-search-input").keyup(function(){var s=this.form;try{clearTimeout(this.fireTimeout);}catch(G){}try{this.ajax.abort();
}catch(G){}this.fireTimeout=g.setTimeout(function(){if(!s.q.value&&s.sugerencias){s.sugerencias.remove();return;}$(".loading",s).css("display","");var H="buscar.php?p=0&q="+s.q.value;
s.ajax=$.get(H,function(K){if(!K||!$.trim(K)){$(".loading",s).css("display","none");return false;}try{var J=agd.func.getJson(K),I=J.datos;if(s.sugerencias){s.sugerencias.remove();
}$.each(I,function(M,N){if(M===0){s.sugerencias=$(document.createElement("table")).addClass("line-data").css("width","100%").insertAfter(s);}row=agd.func.rowFromData(N,J.tabla,J.maxcolums,M,I.length);
$(row).appendTo(s.sugerencias);});}catch(L){}$(".loading",s).css("display","none");});},300);});function o(J){var N=this;N.open=N.open||false;var s=$(N).attr("href"),O=$(N).closest("tr"),L=$(O).find("td").length,K=$(document.createElement("tr")).addClass("desplegable").css("display","none"),H=$(document.createElement("td")).addClass("no-hover no-padding").css("overflow-y","visible").attr("colspan",L).appendTo(K),M=$(document.createElement("div")).addClass("nested").appendTo(H),G=$(document.createElement("table")).attr({cellpadding:"0",cellspacing:"0",border:"0"}).appendTo(M);
function I(Q){if(Q.datos){var P=Q.datos.length;$.each(Q.datos,function(S,T){var R=agd.func.rowFromData(T,1.3,Q.maxcolums,S,P);G.append(R);if(S===(P-1)){$(O).after(K);
$(K).show();agd.checkEvents(K);}});}}if(N.open){$(N.tree).hide();N.open=O.get(0).isTreeVisible=false;}else{if(N.tree){N.open=O.get(0).isTreeVisible=true;
$(N.tree).show();return false;}l.show();$.ajax({url:s,dataType:"json",beforeSend:function(Q,P){Q.setRequestHeader("X-TREE",true);},success:function(P){N.tree=K;
N.open=O.get(0).isTreeVisible=true;l.hide();I(P);}});}return false;}$(selector).find(".treerow").click(o).each(function(){var s=$(this).closest("tr").get(0);
if(s&&s.isTreeVisible){o.call(this);}});var v=($(selector).attr("id")==="cboxLoadedContent");if(v){var x=$(selector);if(x.find("#buscador-avanzado").length){require([agd.staticdomain+"/js/app/advancedsearch.min.js?"+__rversion],function(){enableAdvancedSearch(x);
});}$("body > .helper").remove();$(".helper",selector).each(function(){var L=$(this).clone(true).appendTo(document.body),s=$(L.attr("target")),M=s.offset(),G=$(this).attr("canceltarget"),K=$(this).attr("cancelevent"),J=$($(this).attr("filter"));
if(J.length){return;}L.removeAttr("canceltarget").removeAttr("cancelevent");$(this).remove();if(M){var I=(M.left-L.outerWidth()+10),H=(M.top-40);if(I<0){sum=(0-I)+$(a.id).offset().left;
$(a.id).css("left",sum+"px");I=5;}L.css({top:H,left:I}).show();$(document).one(a.event.cleanup,function(){L.remove();});$(G).bind(K,function(){L.remove();
});}else{}});}if(!y){(function A(){if(!agd.loaded){setTimeout(A,100);return false;}for(callbackname in agd.callbacks){if(callbackname.indexOf("default-")==-1){agd.callbacks[callbackname](C,u);
}}})();}$(selector).find(".load").click(function(K){var J=$(this),s=$(J.data("target")),G=J.attr("href");if(!$.trim(G)){return false;}var I=$(document.createElement("img")).attr("src",agd.inlineLoadingImage);
var H=s.html();J.html(I);$.get(G,function(L){I.remove();s.empty().append(L);agd.checkEvents(s);});K.stopImmediatePropagation();return false;});$(selector).find("*[title]").tipsy({gravity:function(){var s=$(this).data("gravity");
if(s){return s;}return $.fn.tipsy.autoNS.apply(this);},html:true});$(selector).find(".modalframe").click(function(J){J.preventDefault();var K,L,I,H,s;L=$("#colorbox");
L.css("margin-left","-150px");I=L.offset().left+L.outerWidth();H=L.offset().top;s=L.outerHeight()-20;K=$("#modalframe").get(0);if(!K){K=$(document.createElement("iframe")).attr({id:"modalframe",border:0,frameborder:0}).get(0);
$("body").append(K);}$(K).css({left:I,top:H,height:s});function G(){L.css("margin-left","0px");$(K).remove();}$(document).one(a.event.cleanup,G);$(document).one(a.event.load,G);
K.src=this.href;});$(document).trigger("checkevents_complete");if(r){l.hide();}},func:{formatBytes:function(o,n){var r=1024;var m=r*1024;var p=m*1024;var s=p*1024;
if((o>=0)&&(o<r)){return o+" B";}else{if((o>=r)&&(o<m)){return(o/r).toFixed(n)+" KB";}else{if((o>=m)&&(o<p)){return(o/m).toFixed(n)+" MB";}else{if((o>=p)&&(o<s)){return(o/p).toFixed(n)+" GB";
}else{if(o>=s){return(o/s).toFixed(n)+" TB";}else{return o+" B";}}}}}},removeInPageAlert:function(m){var p=$("#menu-avisos"),o=p.find("ul"),n=$("#boton-avisos"),s=$("#numeroavisos"),r=$(m);
r.slideToggle(function(){r.remove();if(!o.find("li").length){p.find(".avisos-principal").css("display","none");if(n.is(":visible")){n.slideToggle();}}s.html(o.find("li").length);
});},getAttributes:function(p){p=(p.get)?p.get(0):p;var n=p.attributes,o={};for(i in n){var m=n[i];o[m.nodeName]=m.nodeValue;}return o;},validateForm:function(o){var y=function(G,J){if(J){if($(J).val()){agd.func.removeInputAlert(J);
}return false;}var M=$("input[rel='blank']:visible, textarea[rel='blank']:visible, select[rel='blank']:visible",G),H=M.length,N=H,L=[];while(N--){var K=H-N-1,O=M[K];
var I=(function(P){if($(P).val()==""){agd.func.addInputAlert(P,"No Valido");$(P).blur(function(){y(G,P);});return false;}else{agd.func.removeInputAlert(P);
}return true;})(O);if(I===false){L.push(O);}}if(L.length){$(L[0]).focus();return false;}else{return true;}};var s=false;$(o).find("input[type=checkbox]").each(function(){var J="";
var G=$(o).find("input[type='hidden'][name='"+$(this).data("namediv")+"']").val();var L=$.trim($(this).data("incompatible"));if(L!=""){L=L.split(",");for(var H=0;
H<L.length;H++){var I=$(o).find("input[type='hidden'][name='"+L[H]+"']").val();var K=$(o).find("input[type='checkbox'][data-namediv='"+L[H]+"']").data("nametranslate");
if(G==I&&G=="1"){J+=" "+K+",";}}if(J!=""){J=J.slice(0,-1);alert(agd.strings.form_el_campo+": "+$(this).data("nametranslate")+" "+agd.strings.form_es_incompatible+" "+J);
s=true;return false;}}});if(s){return false;}var F=y(o);var E=$(o).find("input[match]");if(E[0]){var B=E.length;for(i=0;i<B;i++){var u=E[i];var z=new RegExp($(u).attr("match"));
var n=$(u).val().match(z);if(!n){agd.func.addInputAlert(u,"No Valido");return false;}else{agd.func.removeInputAlert(u,"No Valido");}}}E=$(o).find("input.mustfocus");
if(E[0]){var B=E.length;if(B){var u=E[0],D=agd.strings.no_olvides_comprobar.replace("%s",$(u).attr("name"));if(btn=$("button.send",o).get(0)){if(btn.restore){btn.restore();
}}alert(D);return false;}}E=$(o).find("input.needconfirm");if(E[0]){var B=E.length;var A=E[0].value;if(B&&(A=="")){var u=E[0],D=E.data("confirm")||agd.strings.continuar;
if(btn=$("button.send",o).get(0)){if(btn.restore){btn.restore();}}if(!confirm(D)){return false;}}}for(name in agd.inputs){var w=$(o).find("input[name='"+name+"']");
if(B=w.length){for(i=0;i<B;i++){var t=agd.inputs[name].call(w[i]);if(t){agd.func.removeInputAlert(w[i],"No Valido");}else{agd.func.addInputAlert(w[i],"No Valido");
}if(t===false){w[i].focus();return false;}}}}E=$(o).find("input.mustverify");if(E[0]){var B=E.length,t=true;for(i=0;i<B;i++){var u=E[i];if(!$(u).hasClass("error")){var v=agd.create.button({innerHTML:agd.strings.click_verificar_campo,img:agd.staticdomain+"/img/famfam/tick.png"});
var C=(function(H,G){return function(){$(H).remove();$(G).removeClass("mustverify error");return false;};})(v,u);$(v).click(C);$(v).insertAfter(u);$(u).addClass("error");
}agd.func.shake(u.parentNode);if(btn=$("button.send",o).get(0)){if(btn.restore){btn.restore();}}}return false;}if(o){if($(o).data("must")){var m=$(o).data("must"),x=$(o).data("alert");
}else{var p=$(o).data("sender");if(p!=d){var m=$(p).data("must"),x=$(p).data("alert");}else{var m=$("button.send",o).data("must"),x=$("button.send",o).data("alert");
}}}if(m){m=m.split(",");var r=true;$.each(m,function(G,H){E=$(H);if(E[0]){anychecked=false;E.each(function(){if((this.type=="checkbox"&&this.checked)||($(this).is("textarea")&&$(this).val())){anychecked=true;
}});if(!anychecked){r=false;var I=x.split(",");alert(I[G]||agd.strings.error_must_default);if(btn=$("button.send",o).get(0)){if(btn.restore){btn.restore();
}}return false;}}});if(r){return true;}else{return false;}}if(!F){if(btn=$(o).find("button.send").get(0)){if(btn.restore){btn.restore();}}return false;
}return true;},simular:function(n){var m="../simular.php?poid="+n;$.getJSON(m,function(o){if(o.page&&o.page!=location.hash){location.href=o.page;}else{agd.navegar();
}if(o.client){a.func.close();if(e){e.update();}agd.loadUserData();}if(o.tabs){$menu=$("#main-menu ul");$menu.empty();$.each(o.tabs,function(s,t){$li=$(document.createElement("li")).css("margin","0").addClass("line-block").attr({name:t.name}).appendTo($menu);
$a=$(document.createElement("a")).attr({href:t.href}).appendTo($li);if(t.imgpath){$img=$(document.createElement("img")).attr({src:t.imgpath}).appendTo($a);
}else{$img=$(document.createElement("img")).attr({src:agd.staticdomain+"/img/32x32/iface/"+t.name+".png"}).appendTo($a);}if(t.icononly!=1){var r=(agd.strings["menu_"+t.name]!==d)?agd.strings["menu_"+t.name]:t.name;
$a.append(r);}});}if(o.configurar!=d){var p=(o.configurar)?"show":"hide";$("#config-link")[p]();}if(o.validar!=d){var p=(o.validar)?"show":"hide";$("#validar-link")[p]();
}});return false;},shake:function(m){$(m).effect("shake",{distance:10,times:3},100);},titleAlert:function(m){if(g.__titleinterval){clearInterval(g.__titleinterval);
}g.__titleinterval=setInterval(function(){document.title=(document.title==agd.title)?m:agd.title;},800);return function(){document.title=agd.title;clearInterval(g.__titleinterval);
};},changeColor:function(o){var n=$("#main-style"),m=n.attr("href");if(m.indexOf("maincolor")==-1){m+="&maincolor="+o;}else{var p=ahistory.getPage(m),r=ahistory.getParams(m);
r.maincolor=o;m=p+"?"+decodeURIComponent($.param(r));}return n.attr("href",m);},fixLayout:function(p,r){r=r||p.rows[0];var o=[],n=r.cells,m=n.length;$.each(n,function(t,u){var v=document.createElement("col"),s=$(u).width();
$(v).attr("width",s+"px");o.push(v);if(t+1===m){$(p).prepend(o);}});},extractDate:function(o){try{var n=false,s=new RegExp("([0-9]{4}|[0-9]{2})[._-]([0]?[1-9]|[1][0-2])[._-]([0]?[1-9]|[1|2][0-9]|[3][0|1])"),r=o.match(s);
if(r){var p=r[1],u=r[2],m=r[3];if(p.split("").length==2){p="20"+p;}if(u.split("").length==1){u="0"+u;}if(m.split("").length==1){m="0"+m;}n=new Date(p+"-"+u+"-"+m);
return n;}}catch(t){}return false;},changeProfile:function b(u,t){var s=$("#cuerpo"),m=$("#credits"),r=$("#main-menu .seleccionado").attr("name"),p=(new Date()).getTime(),o="../chgperfil.php?pid="+u+"&rt="+p,n=agd.callbacks["default-error"];
if(t){o="empresa/jump.php?poid="+u;location.href="#home.php";}$("#lista-perfiles").hide();$("#cboxOverlay").css({opacity:"1","z-index":"190"}).show();agd.func.registerCallback("default-error",function(v){location.hash=$("#main-menu li:first-child a").attr("href");
agd.func.registerCallback("default-error",n);});$.get(o,function(B){if(json=agd.func.getJson(B)){return agd.actionCallback(json);}var A=$(B.substring(B.indexOf("<body>")+6,B.indexOf("</body>"))),w=$("<div>"+B.substring(B.indexOf("<head>")+6,B.indexOf("</head>"))+"</div>"),y=["#head","#credits","#lista-perfiles","#link-perfiles","#config-actions","#inline-style","#top-bar-left","#top-bar-right"],x=y.length;
$("#link-perfiles").removeClass("extended");if(A.find(".avisos-principal").find("li").length){$(document.body).find(".avisos-principal").html(A.find(".avisos-principal").html());
$("#numeroavisos").html($(".avisos-principal li").length);$("#boton-avisos").show();}while(x--){var v=y[x],z=A.add(w).find(v).html();$(v).html(z);agd.checkEvents(v);
}agd.elements.menu=$("#main-menu ul").get(0);agd.func.registerCallback("profile-change",function(D){agd.cache.url={};delete (agd.callbacks["profile-change"]);
agd.func.registerCallback("default-error",n);currentNavigation=agd.elements.navegacion.innerHTML;agd.elements.navegacion=$("#informacion-navegacion").html(currentNavigation).get(0);
$(".bad-profile").remove();if($(a.id).css("display")!="none"){try{$("#cboxOverlay").css({"z-index":"99",opacity:0.3});agd.func.open(agd.history[agd.history.length-1].url);
}catch(C){}}else{$("#cboxOverlay").css("z-index","99").hide();}try{$pluginscript=$("#pluginjs");$pluginscript.clone().attr("src","../pluginscript.js?t="+p).appendTo("head");
}catch(C){}});agd.loadUserData(function(){ahistory.onChange();});});},showSelectedItems:function(w){var t=agd.views[agd.views.activeView].elements.bottom,x=new Array(),A=new Array(),u=new Array(),y=0;
for(i in agd.tables){var n=agd.tables[i];if(typeof(n)=="object"){if(n.info){y+=parseInt(n.info.rows);}var p=n.data;for(j in p){var s=p[j];if(s&&(lineCheckbox=$(s).find(".checkbox-colum input").get(0))&&lineCheckbox.checked){A.push(s);
tipo=s.tipo;if(!tipo||!isNaN(tipo)){continue;}if(tipo.indexOf("-")!=-1){tipo=tipo.substring(0,tipo.indexOf("-"));}if(tipo.indexOf("_")!=-1||tipo=="buscar"||tipo=="busqueda"){continue;
}if(!x[tipo]){x[tipo]=new Array();}x[tipo].push(s.uid);u.push(s.uid);}}}}if(w){return A;}$(t).find("#informacion-seleccion, #cancelar-seleccion, .selection-op").remove();
if(u.length){try{var m="#buscar.php?p=0&q=",o=$(document.createElement("a")).attr("id","informacion-seleccion"),z=$(document.createElement("a")).attr("id","cancelar-seleccion").html(agd.strings.cancelar_seleccion).click(function(){agd.func.clearSelectedItems();
agd.func.showSelectedItems();});for(tipo in x){if(typeof(x[tipo])=="object"){m+="tipo:"+tipo+"#"+x[tipo].join(",")+"+";}}m=m.substring(0,m.length-1);o.html(u.length+" "+agd.strings.elementos_seleccionados).attr("href",m).appendTo(t);
z.appendTo(t);var v=x.empresa.indexOf(agd.empresa);if(v){delete (x.empresa[v]);}}catch(r){}}return{rows:A,count:y,total:u};},clearSelectedItems:function(o){if(o){$.each(o,function(s,t){var u=agd.tables[s];
if(typeof u=="string"){u=agd.tables[u];}$.each(t,function(w,v){try{delete (u.data[v]);}catch(x){}});});}else{var r=agd.func.showSelectedItems(true),n=r.length;
while(n--){var p=r[n],m=$(p).find(".checkbox-colum input");$(m).removeAttr("checked");$(p).removeClass("selected-row");}}},getCookie:function(r){var p=document.cookie.split(";"),n=p.length;
while(n--){var o=p[n],m=o.split("=");if(r==$.trim(m[0])){return $.trim(m[1]);}}return false;},getJson:function(m){try{oJson=JSON.parse(m);}catch(n){return false;
}return oJson;},rowFromData:function(z,u,m,A,r,n){var o=z[z.key];if(!o){return;}var K=document.createElement("tr"),w=$(document.createElement("td")).addClass("position-colum");
$checkBoxTD=$(document.createElement("td")).attr("align","left").addClass("checkbox-colum");if(u){var x=(44*(u-1))+18,s=$(document.createElement("td")).css({width:x+"px","text-align":"left"}).appendTo(K);
if(n&&n.tabla){if(A==0&&(!r||r>1)){$(document.createElement("input")).attr({type:"checkbox",title:agd.strings.marcar_desmarcar}).click(function(){var N=this.checked,M=K.parentNode,L=M.rows.length;
while(L--){var O=M.rows[L];if(O.cells.length>1){$(O).toggleClass("selected");$(O.cells[1].childNodes[1]).attr("checked",N);}}agd.func.showSelectedItems();
}).appendTo(s);}}if(z.tree){$checkBoxTD.css("width","64px");}}if(n&&n.tabla){$checkBoxTD.appendTo(K);}else{if(u){w.css("width","30px").addClass("row-link");
}}w.appendTo(K);var J=0;$.each(o,function(Q,O){J++;if(typeof(O)=="string"){$td=$(document.createElement("td")).html(O);}else{var N=(O&&O.href)?"a":"span";
N=(O.tagName)?O.tagName:N;delete (O.tagName);var M=$(document.createElement(N)).prop(O);$td=$(document.createElement("td"));if(O.icon){try{var L=$(document.createElement("img")).attr(O.icon).prop(O.icon).css({"vertical-align":"middle",width:"14px","margin-right":"3px"});
if(O.icon.href){L.css("cursor","pointer").click(function(){location.href=O.icon.href;});}$td.append(L);}catch(P){}}$td.append(M);if(O&&O.href){M.bind("dragstart",function(S){$(K).attr("id",z.key);
var R=z.key;S.originalEvent.dataTransfer.setData("text",R.toString());});}}$(K).append($td);});var v=(typeof z.estado!="undefined")?"stat-"+z.estado.toString():"";
if(z.papelera&&z.papelera==1){v+=" row-papelera";}if(z.className){v+=" "+z.className;z=$.extend({},z);delete (z.className);}$(K).addClass(v);K.uid=z.key;
if(z.tree&&z.tree.img){var D=$(document.createElement("img")).attr("src",z.tree.img.normal);$checkBoxTD.html(D);K.img=D;}if(z.href){$(K).addClass("clickable-row").click(function(L){if(L.target.tagName!="INPUT"&&L.target.tagName!="A"&&L.target.tagName!="SELECT"&&L.target.tagName!="OPTION"&&!$(L.target).closest("ul").parent().parent().hasClass("select")){agd.func.lineoption(z);
return false;}});}if(!z.tree||z.tree.checkbox){var p=$(document.createElement("input")).addClass("line-check").attr({type:"checkbox",name:z.key}).appendTo($checkBoxTD).click(function(){agd.func.showSelectedItems();
});K.checkbox=p;p.get(0).row=K;}if(z.tree&&!z.href){if(z.tree.url){$(K).addClass("tree");K.tree=z.tree;var B=agd.create.treeView(K,u);if(z.tree.autoload){if(!agd.loaded){var t=agd.func.registerCallback("tree-autoload",function(){B();
delete (t);});}else{g.setTimeout(function(){B();},100);}}}}if(z.inline){var C=0;$.each(z.inline,function(O,P){var M=$(document.createElement("td")).addClass("inline-colum");
if(P&&(P[0]||P.width)){if(isNaN(O)){$(M).addClass(O);$(document.createElement("span")).addClass("light").html(O+": ").appendTo(M);}if(P.img){var N=$(document.createElement("img")),L;
if(P.img.href){L=P.img.href;if(L.split("")[0]=="#"||L.indexOf("http")!==-1){N.on("click",function(){location.href=L;});}else{N.attr("href",L);}delete (P.img.href);
}if(typeof P.img=="object"){N.prop(P.img);}else{N.prop("src",P.img);}N.appendTo(M);$(document.createTextNode(" ")).appendTo(M);}$.each(P,function(R,T){var Y=P[R];
if(isNaN(R)){switch(R){default:$(M).attr(R,Y);if(!$.browser.msie){$(M).prop(R,Y);}break;case"img":return;break;case"className":$(M).addClass(Y);break;}return;
}var V=(T.className)?T.className:"",S="";if(T.nombre){if(T.tipo&&T.oid){S="ficha.php?m="+T.tipo+"&oid="+T.oid;}if(T.href){S=T.href;}var X=["extended-cell","send-info"],U=false;
for(i in X){if(V.indexOf(X[i])!==-1){U=true;break;}}if(!T.target&&S&&S.split("")[0]!=="#"&&!U){V+=" box-it";}var Z=(T.tagName)?T.tagName:"a";$a=$(document.createElement(Z)).addClass("ucase inline-text "+V).html(T.nombre).appendTo(M);
if(S){$a.attr("href",S);}if(T.title){$a.prop("title",T.title);}if(T.target){$a.prop("target",T.target);}}if(T.img){var Q=$(document.createElement("img")).css({"margin-right":"4px","padding-bottom":"4px"}).attr(T.img).appendTo(M);
if(T.img.href&&(T.img.href.split("")[0]=="#"||T.img.href.indexOf("http")!==-1)){Q.on("click",function(){location.href=T.img.href;});}}if(T.extra){$.each(T.extra,function(aa,ab){$(M).append(ab);
});}var W=$(document.createElement("div")).html("").addClass("line-block inline-separator").attr("width","4px").appendTo(M);});$(K).append(M);C++;}});}C=(C)?C:0;
J=J+C;if(m){if((!z.options||!z.options.length)){J--;}if(J<m){var F=m-J;while(F--){var y=$(document.createElement("td")).html("&nbsp;").appendTo(K);}}}if(z.options&&z.options.length){opcioneslinea=new Array({innerHTML:agd.strings.opciones+"...",selected:true});
opcioneslinea=opcioneslinea.concat(z.options);var I=agd.create.select({id:"opt_"+z.key,options:opcioneslinea,inline:z.inlineoptions});var y=$(document.createElement("td")).addClass("option-colum").append(I).appendTo(K);
}if(z.type){var E=z.type;}else{var E=(u)?u:agd.tables.current;}if(!agd.tables[E]){var G=agd.tables.create(E);if(n&&n.paginacion&&n.paginacion.of){G.info={rows:n.paginacion.of};
}}K.tipo=E;if(previousTr=agd.tables[E].getData(z.key)){if($(previousTr).hasClass("selected-row")){$(p).attr("checked",true);$(K).addClass("selected-row");
}if(previousTr.isTreeVisible){if(B){B();}else{K.isTreeVisible=true;}}if(!isNaN(previousTr.progress)){if(K.upload=previousTr.upload){K.upload.row=K;K.progress=previousTr.progress;
agd.func.registerCallback("upload-restore",function(){K.upload.show.call(K);});}}}agd.load(true);try{K.rawoptions=I[0].rawoptions;}catch(H){}if(I&&I.ajustar){K.options=$("ul",I);
I.ajustar();}K.setShortCuts=function(){try{$.each(K.rawoptions,function(M,N){if(N.shortcut){shortcut.remove(N.shortcut);shortcut.add(N.shortcut,function(O){if(agd.views.activeView=="data"){agd.func.open(N.href);
}});}});}catch(L){}return true;};agd.tables[E].addData(z.key,K);return K;},solicitar:function(m,o,n){var n=n||function(){};agd.streaming.callback[m]=n;
$.get("configurar/solicitud/nueva.php?t="+m+"&v="+o,function(r){var p={tipo:"solicitud",uid:r,name:m,value:o,callback:n,eliminar:function(s){var s=s||function(){};
$.get("configurar/solicitud/eliminar.php?oid="+r,function(t){s(t,p);});}};n(p);});uploadRequestTimeout=g.setTimeout(function(){n({});},120000);},registerCallback:function(n,m){agd.callbacks[n]=m;
return agd.callbacks[n];},addToTable:function(p,s){var r=$(p).closest("table")[0],o=p.rowIndex,n=r.insertRow(o+1),m=$("#extra-line",r)[0];if(m){$(m).remove();
}$(n).attr("id","extra-line");$(s).each(function(t,u){$(document.createElement("td")).appendTo(n).html(u);});a.func.resize();},minimizeUpload:function(){$("#cboxOverlay").toggle();
$(a.id).toggle();var m=$(document.createElement("div"));agd.uploadPreviewInterval=setInterval(function(){if(progressBar=$("#uploadProgressBar")[0]){$(this).html($(progressBar).html());
}},1000);var n=$(document.createElement("div")).attr({innerHTML:"TEXTO DEMO",id:"uploadPreview"}).append(m).appendTo(document.body);return false;},jGrowl:function(u,s,t){if(!s){return false;
}var m=u+"-growl";if($("."+m).length){return false;}else{var n=$("#jGrowl"),r=$(".jGrowl-notification .message",n),o=$(".jGrowl-notification");if(r.length){$(o).trigger("jGrowl.close",{callback:function(){g.setTimeout(function(){agd.func.jGrowl(u,s,t);
},100);}});return false;}}var p={beforeOpen:function(v){$(v).addClass(m);},beforeClose:function(v){$(v).removeClass(m);}};if(t){for(optionName in t){p[optionName]=t[optionName];
}}$.jGrowl(s,p);},queryCache:function(m,n){var n=n||function(){};if(current=agd.cache.get(m)){n(current);}else{$.get(m,function(o){agd.cache.save(m,o);
n(o);});}},filter:function(p){if(!$(p.originalTarget).hasClass("checkbox-desplegable")){var n=$(this).prop("name").split(";");var m=$(this).prop("rel").split(";");
if(n.length){var r={},o=n.length;for(i in n){if(n[i]=="null"){r[m[i]]=null;}else{if(i<=o-1){r[m[i]]=n[i];}}}ahistory.updateValue(r);}}},lineoption:function(n){try{var m=$(n).prop("href"),p=$(n).prop("target");
if(m){var r=m.split("");if(r[0]=="#"){location.href=m;}else{if(p){$(p).prop("src",m);}else{agd.func.open(m);}}}}catch(o){}},query:function(n,o){if(n.value){var m="query.php?t="+n.table+"&v="+n.value+"&f="+n.field;
$.ajax({type:"GET",url:m,success:function(p){o(agd.func.getJson(p));}});}},validar:function(){},anular:function(){},sendInfo:function(r,u){var p=r.url,s=r.src,o=r.confirm,t=agd.func.array2url("selected",agd.func.selectedRows()),m=t.length,n;
if(m||(s&&($(s).hasClass("continue")||$(s).hasClass("send-info")))){if((o&&confirm(o))||!o){if($(s).hasClass("iframe")){$(s).prop("target","#async-frame");
}if(s&&$(s).prop("target")){if(!m&&(n=$(s).attr("confirm-all"))){if(!confirm(n)){return false;}}$($(s).prop("target")).prop("src",p+(p.indexOf("?")==-1?"?":"&")+t);
}else{$.ajax({type:"POST",url:p,data:t,success:function(w){if(s&&$(s).hasClass("box-it")){a.func.open({html:w});}else{try{var v=agd.func.getJson(w);}catch(x){if(w){agd.func.jGrowl("multiple_info",w);
}else{agd.func.jGrowl("multiple_info","Error!!!");}return false;}if(u){u(v);}else{agd.actionCallback(w);}}}});}}}else{agd.func.jGrowl("sin_seleccionar","Selecciona algun elemento..");
}},selectedRows:function(w,t){var n=new Array(),w=w||function(){};if(agd.tables.current=="buscar"){var u=agd.func.showSelectedItems(true),m=u.length;while(m--){var s=u[m],v=s.uid;
if($(s).find(".checkbox-colum input").attr("checked")){n.push(v);}}}else{for(v in agd.tables[agd.tables.current].data){var s=agd.tables[agd.tables.current].data[v];
if(s){if($(s).hasClass("tree")&&s.isTreeVisible){var x=$(s.subtable).find("tr.selected-row"),r=x.length;while(r--){var o=x[r],p=o.uid;if(t&&o.tipo!=t){continue;
}n.push(p);w(p,o);}}if(t&&s.tipo!=t){continue;}if($(s).find(".checkbox-colum input").attr("checked")){n.push(v);w(v,agd.tables[agd.tables.current].data[v]);
}}}}return n;},array2url:function(s,m,r){var n=1,o=m.length,p="",r=r||function(){};for(n in m){if(n<=o-1){p+=s+"[]="+m[n]+"&";r(n,m[n]);}}return p.substring(0,p.length);
},open:function(n,t,s,p){if(!n){return;}s=s||null;t=t||function(){};if(p){var r=a.settings.overlayClose;a.settings.overlayClose=function(){g.modalconfirm=p;
a.settings.overlayClose=r;return true;};}var o=(n.indexOf("?")==-1)?"?":"&";n=n+o+"type=modal";agd.history.push({url:n,timestamp:(new Date()).getTime()});
$("div.extended:visible").each(function(){this.restore();});if(f){clearTimeout(f);}f=setTimeout(function(){(l).show().find("div").html(agd.strings.still_working);
},10000);var m=function(u,v){clearTimeout(u);l.hide().find("div").html(agd.strings.cargando+"...");v();};a.func.open({href:n,open:true,scrolling:false,returnFocus:false,method:s},function(){m(f,t);
});},addInputAlert:function(s,t){$("div.inline-alert",$(s).parent()).remove();var p=$(s).outerHeight()-2,o=(s.size)?"auto":"70%",m=$(s).hasClass("multiple"),r=(m)?"-4px":0,u=(m)?"16%":"28%";
$(s).addClass("fail line-block").css({width:o,"vertical-align":"middle"});var n=$(document.createElement("div")).addClass("inline-force inline-alert").css({width:u,"line-height":p+"px","margin-left":r}).height(p).html(t);
if(m){$(s).parent().find(".multiple:last").after(n);}else{$(s).after(n);}},removeInputAlert:function(m){$("div.inline-alert",$(m).parent()).remove();$(m).removeClass("fail").css("width","");
},asyncLoad:function(n){var m=$.ajax({url:"buscar.php",type:"GET",data:{q:ahistory.getValue("q"),isAsync:true,all:ahistory.getValue("all")},beforeSend:function(){ajaxAsyncCallStatus=agd.constants.ajaxAsyncCallStatus.waiting;
},error:function(){if(typeof ajaxAsyncCallStatus!=="undefined"){ajaxAsyncCallStatus=d;}},success:function(v){response=agd.func.getJson(v);ajaxAsyncCallStatus=agd.constants.ajaxAsyncCallStatus.loaded;
var t=$(".paginacion.leftElem");var y=$(".paginacion.rightElem");y.html("");t.html("");var w=parseInt(ahistory.getValue("p"),10);if(isNaN(w)){w=0;}var r=w+1;
if(r-1>0){var u=w-1;$(document.createElement("a")).attr({href:"#"+ahistory.updateValue({p:u},location.href),"class":"prev-page"}).html("&laquo; "+agd.strings.pagina_anterior).appendTo(y);
}var o=" "+agd.strings.pagina+" "+r+" "+agd.strings.de+" "+response.paginacion.total+" ";y.append(o);if(r<response.paginacion.total){$(document.createElement("a")).attr({href:"#"+ahistory.updateValue({p:w+1},location.href),"class":"next-page"}).html(" "+agd.strings.pagina_siguiente+" &raquo;").appendTo(y);
}var p=w*10;var x=(w+1)*10;var s=agd.strings.mostrando_del+" "+p+" "+agd.strings.al+" "+x+" "+agd.strings.de+" "+response.paginacion.of;t.append(s);if(response.paginacion.total>1){$span.append(" &nbsp; | &nbsp; "+agd.strings.pagina+" ");
$(document.createElement("input")).val(r).attr({id:"paginacion-input",type:"text",size:3}).keypress(function(z){if(z.keyCode==13){var A=$(this).val();if(typeof ajaxAsyncCallStatus!=="undefined"&&ajaxAsyncCallStatus===agd.constants.ajaxAsyncCallStatus.waiting&&A>response.paginacion.total){alert(agd.strings.proceso_busqueda_pagina_curso);
return false;}else{if((response.asyncTable==agd.constants.async.loaded&&(A>response.paginacion.total||isNaN(A)||A<1))||(response.asyncTable==null&&(A>response.paginacion.total||isNaN(A)||A<1))||(response.asyncTable==agd.constants.async.empty&&(isNaN(A)||A<1))){alert(agd.strings.error_buscando_pagina);
return false;}else{ahistory.updateValue({p:(A-1)});}}}}).appendTo($span);}}});action=location.href.split("?")[0].split("#")[1];agd.asynchronousCall.saveAjax(m,ahistory.getValue("q"),action);
return;}},inputs:{cif:function(n){var m=$(this).hasClass("needcheck");if(m&&this.edited&&n){agd.func.query({table:"empresa",value:this.value,field:"cif"},function(r){if(typeof("datos")==d){}else{var p=r[0];
if(p){var t=ahistory.getValue("poid");t=!isNaN(t)?t:agd.empresa;var s=["txt="+encodeURIComponent(p.nombre),"oid="+p.oid,"poid="+t,"back="+encodeURIComponent(agd.history[agd.history.length-1].url)];
var o="empresa/asignarexistente.php?"+s.join("&");agd.func.open(o);}}});}return true;},dni:function(m){if(m){agd.func.query({table:"empleado",value:this.value,field:"dni"},function(o){if(typeof(o)==d){}else{var r=o[0];
if(r){var s=ahistory.getValue("poid");s=!isNaN(s)?s:agd.empresa;var p=["txt="+encodeURIComponent(r.nombre+" "+r.apellidos),"oid="+r.oid,"poid="+s,"back="+encodeURIComponent(agd.history[agd.history.length-1].url)];
var n="empleado/asignarexistente.php?"+p.join("&");agd.func.open(n);}}});}return true;},usuario:function(n){var m,o;if(n){o=this;m={table:"usuario",value:this.value,field:"usuario"};
agd.func.query(m,function(p){if(typeof(p)==d||!p.length){agd.func.removeInputAlert(o,"No Valido");}else{agd.func.addInputAlert(o,"No Valido");}});}return true;
},serie:function(m){if(this.edited&&m){agd.func.query({table:"maquina",value:this.value,field:"serie"},function(p){if(typeof(p)==d){}else{var n=p[0];if(n){var o="maquina/asignarexistente.php?txt="+encodeURIComponent(n.nombre+" "+n.marca_modelo+" "+n.serie)+"&oid="+n.oid+"&poid="+ahistory.getValue("poid");
agd.func.open(o);}}});}return true;}},cache:{seturl:function(n,m){agd.cache.url[n]={time:(new Date()).getTime(),json:m};},save:function(m,n){n=$.trim(n);
m=$.trim(m);if(n&&m){agd.cache.elements[m]=n;}},get:function(m){return agd.cache.elements[m];},clean:function(){agd.cache.elements={};},elements:{},url:{}},streaming:{requests:{},callback:{}},asynchronousCall:{elementList:[],saveAjax:function(n,p,o){var m="action-"+o+"-backgroundAsync-";
if(p){m=m+p;}agd.asynchronousCall.elementList[m]=n;},checkAjax:function(){action=location.href.split("?")[0].split("#")[1];var n="action-"+action+"-backgroundAsync-";
q=ahistory.getValue("q");if(q){n=n+q;}for(var m in agd.asynchronousCall.elementList){if(m!=n){auxElement=agd.asynchronousCall.elementList[m];if(auxElement){auxElement.abort();
auxElement=false;}}}}},load:function(){if(!agd.loaded){$("#start_style").remove();$("#start_script").remove();$("#load").remove();$("#cuerpo").css("display","");
g.setTimeout(function(){$(g).scroll();},120);agd.loaded=true;if(typeof(__openOnStart)!="undefined"){var m=function(){try{agd.func.open(__openOnStart);}catch(n){setTimeout(m,100);
}};m();}if(g.__asistente){agd.create.asistente(g.__asistente);}}},loadUserData:function(n){n=n||function(){};var m=new Date().getTimezoneOffset()/60;$.getJSON("userdata.php",{tz:m},function(o){if(o){if(o.live&&!e){require([agd.staticdomain+"/js/app/polling.min.js?"+__rversion],function(p){e=new p("../agd/live.php");
e.init();});}if(o.type){agd.userType=o.type;}if(o.user){agd.user=o.user;}if(o.maxfile){agd.usermaxfile=o.maxfile;}if(o.sati){agd.sati=o.sati;}if(o.agent){agd.agent=o.agent;
}if(o.strings){agd.strings=o.strings;}if(o.locale){agd.locale=o.locale;}if(o.empresa){agd.empresa=o.empresa;}if(o.un){agd.un=o.un;}if(o.routes){agd.routes=o.routes;
}if(o.gkey){agd.gkey=o.gkey;}if(!$.browser.opera){if(o.plugins){agd.plugins=true;h.appendChild(create("link",{type:"text/css",rel:"stylesheet",id:"main-style",href:"../pluginstyle.css.php"}));
}require(["/pluginscript.js.php"],n);return false;}else{n();}}});},init:function(o){if($.browser.msie&&$.browser.version<8&&!o){$.get("iehelp.php",function(r){c.html(r).find("#continue").one("click",function(s){$(this).html("...");
agd.init(true);return false;});});return;}agd.loadUserData(function(){ahistory.onChange=agd.navegar;ahistory.start();});$(".avisos-principal").on("click","li",function(r){k=this;
});$(document).on("click","#buscador-clear",function(){$("#buscar").val("").focus();});document.body.focused=true;if(!$.browser.msie){$(g).blur(function(){if(e){e.setDelay(10*1000);
}document.body.focused=false;}).focus(function(){if(e){e.setDelay(4000);}document.body.focused=true;});if(!document.body.focused){$(g).trigger("blur");
}}$(document).bind(a.event.ready,function(){$(a.body).on("mousedown","textarea",function(){this.defaultHeight=$(this).height();$(this).one("mouseup",function(){if(this.defaultHeight!=$(this).height()){a.func.resize();
}});});});agd.callbacks["default-error"]=function(t,u,s){var r=document.getElementById("load");if(s!="abort"){if(u!="success"&&!t.responseText){if(r){$("h1",r).html("Error al cargar la pgina, haz click <a href='/agd/'>aqui</a> para intentarlo de nuevo").css("color","red");
}else{$.jGrowl("Error al cargar la pgina solicitada");}}if(r){$("h1",r).html("No puedes acceder a esta informacion. Haz click <a href='/agd/'>aqui</a> para volver al inicio").css("color","red");
}else{if(t.responseText){agd.func.jGrowl("error_acceso","No tienes acceso a esta informacin");}}}l.hide();return false;};$(".autocomplete-input").live("keyup",function(){var t=this,s=$(".autocomplete-input").outerWidth(),r=$(this).attr("rel");
$(this).autocomplete({source:function(w,x){var u=[],v="query.php?"+$(t).attr("href")+"&ct=1&v="+encodeURIComponent(w.term);$.get(v,function(y){json=agd.func.getJson(y),ln=json.length;
while(ln--){ob=json[ln];u.push(ob[r]);}x(u);});return true;},open:function(u,v){$(t).autocomplete("widget").width(s).addClass("box-autocomplete");},minLength:2});
});$(".pay").live("click",function(){var s=$(this).find("span > span"),v=s.text();s.html(agd.strings.cargando+"...");$(this).attr("disabled","true");var u=$(this).data("params"),t=$("input[name=terms]").attr("checked")?1:0,r=$(this).data("url")+"?action=send&terms="+t;
if(u){r+="&"+u;}if(t){location.href=r;}else{alert("Por favor, acepta los terminos y condiciones");$(this).removeAttr("disabled");s.html(v);}});$("#show-comment-box").live("click",function(r){r.preventDefault();
});$(".btn.cancel").live("click",function(){a.func.close();return false;});$("input.enable-button").click(function(){var r=$($(this).attr("target"));if(this.checked){r.removeAttr("disabled");
}else{r.attr("disabled",true);}});$("option.other").live("click",function(){var t=$(this).closest("select");t.wrap("<div />");$input=$(document.createElement("input")).attr({type:"text",name:t.attr("name")});
var u=t.get(0),s=t.get(0).attributes;for(i in s){if(u.hasOwnProperty(i)){var r=s[i];$input.attr(r.nodeName,r.nodeValue);}}t.parent().html($input);});$(".refresh").live("click",function(){var r=$(this).data("text");
if(r){$(this).html(r);}agd.navegar();return false;});$(".next-step").live("click",function(){var B=$(this).attr("name"),r=$(this).closest(".vertical-step"),z=r.find("h1"),t=z.html(),x=(r.attr("step"))?parseInt(r.attr("step")):1,A=$(".vertical-step"),w=A.length,y=[],v={};
$img=$("<img src='"+agd.inlineLoadingImage+"' />").appendTo(z);if(this.tagName=="LI"){var s=$(this).clone().removeClass("next-step");$(this).parent().empty().append(s);
}if(this.tagName=="BUTTON"){$(this).remove();}if(w>1){for(i=1;i<w;i++){var u=$(A[i]).attr("value");y.push(u);}}y.push(B);v={value:y,step:x};$(document.createElement("input")).attr({type:"hidden",name:"value[]",value:B}).appendTo(r);
$(this).parent().find(".next-step").removeClass("next-step");$.get(ahistory.curLocation,v,function(C){$nextStep=$(C).attr({step:x+1,value:B});$(A[w-1]).after($nextStep);
agd.checkEvents($nextStep);z.html(t);});return false;});$(".changeprofile").live("click",function(){return agd.func.changeProfile($(this).attr("to"),$(this).attr("rel"));
});$(".option-block").live("click",function(r){if($(r.target.parentNode).hasClass("option-block")){$(this).toggleClass("open").find("div").toggle();return false;
}});$("input.update-input").live("keyup",function(){var s=$(this),r=$(s.prop("target"));r.val(s.val());});$("select.update-input").live("change",function(){options=($(this).prop("options"));
selected=$(options[this.selectedIndex]).attr("update");var s=$(this).closest("select"),r=$(s.attr("target")),t=($(this).attr("update"))?$(this).attr("update"):selected;
r.val(t);});$(".goto").live("click",function(){location.href=$(this).attr("href");});$(".sendinput").live("click",function(x,t){var r=$(this).attr("target"),w=$(r),u=$(this).attr("type"),s=$(this).attr("href"),v=w.length-1;
if(u=="text"&&!t){return false;}w.each(function(A,z){z=$(z);var C=z.attr("name"),B=z.val(),y=(s.indexOf("?")==-1)?"?":"&";if(z.attr("type")=="checkbox"){B=(z.attr("checked"))?"on":"off";
}s=s+y+C+"="+encodeURIComponent(B);if(A==v){agd.func.open(s);}});return false;}).live("keypress",function(r){if(r.keyCode==13){$(this).trigger("click",true);
return false;}});$(".unbox-it").live("click",function(){a.func.close();});$(".update").live("click",function(){var u=$(this),t=u.attr("target"),s=$(t),r=u.attr("rel"),v=u.attr("update"),w={};
w[r]=v;s.attr(w);});$(".remove").live("click",function(){var t=$(this),s=t.attr("target"),r=$(s);r.remove();});$(".move").live("click",function(){var s=$(this),r=s.attr("target");
s.clone(true).appendTo(r);s.remove();});$(".toggle-param").live("click",function(){var s=$(this).attr("href");if($.browser.msie&&$.browser.version<8){var u=g.location.href.substring(0,g.location.href.lastIndexOf("#")+1),u=u.substring(0,u.lastIndexOf("/")+1);
s=s.replace(u,"");}var r=s.split("="),w=r[0],t=r[1];if(ahistory.getValue(w)){ahistory.remove(w);}else{var v={};v[w]=t;ahistory.add(v);}return false;});
$(".slide-list").live("click",function(){var u=this,s=$($(u).attr("target")),t=s.closest("td"),x=$($(u).attr("rel")),v=$(u).attr("href"),r=$(u).attr("name");
if(!t.data("init")){t.css("width",x.width());x.css({width:x.width(),"float":"left"});s.find("a").each(function(){$(this).data("href",$(this).attr("href"));
});t.data("init",true);}s.find("a").each(function(){$(this).attr("href",$(this).data("href").replace("%s",v));});$btn=$(document.createElement("button")).addClass("btn").attr("title",agd.strings.atras).html('<span><span> <img src="'+agd.staticdomain+'/img/famfam/arrow_undo.png" /> </span></span>').click(function(){t.css("white-space","nowrap");
x.css({"margin-left":"0px"}).show();s.css({width:"0px"});return false;});s.find(".field-list-title").remove();var A=" "+$.trim($(u).closest("li").text()),y=$(document.createElement("li")).addClass("field-list-title").append($btn,A).prependTo(s),z=t.outerWidth();
t.css("white-space","nowrap");s.css({width:z,display:""});x.css("margin-left","-"+z).hide();return false;});$(".box-it").live("click",function(){var r=$(this).attr("href");
if(this.tagName.toLowerCase()=="input"&&$(this).attr("type").toLowerCase()=="checkbox"){var s=(r.indexOf("?")==-1)?"?":"&",t=(this.checked)?"1":"0";r=r+s+"input="+t;
}agd.func.open(r);return false;});$(".colum-it").live("click",function(){var r=$(this).attr("href");if(this.tagName.toLowerCase()=="input"&&$(this).attr("type").toLowerCase()=="checkbox"){var s=(r.indexOf("?")==-1)?"?":"&",t=(this.checked)?"1":"0";
r=r+s+"input="+t;}mostrarCapaColumnaLateral(r,400);return false;});$(document.body).delegate(".a-extend","click",function(A){A.preventDefault();var w=this,r=$(this).attr("href"),t=$(this).attr("target"),x=$(t),v=x.parent(),s=$(this).width(),u=$(this).offset();
var y=function(B){if(B&&B.target){if(!w.parentNode){return;}if($(B.target).closest(".extended").get(0)===x.get(0)||$(B.target).closest(".a-extend").get(0)===w){return true;
}}x.css({display:"none"});$(w).removeClass("extended");$(g).unbind("resize",y).bind("resize",y).unbind("click",y).bind("click",y);};if(!x.length&&r){var z=(new Date()).getTime();
$.get(r,function(C){var B=$(C).css({display:"none"}).attr("id",z).appendTo(document.body);$(w).attr("target","#"+z).trigger("click");});return false;}if(!x.length){return false;
}$(".extend-replace",x).click(function(D){var B=$(w).attr("name");var C=$(document.createElement("input")).attr({type:"hidden",name:B,value:$(this).attr("src"),id:B});
$("#"+B).remove();$(w).empty().append($(this).clone()).append(C);});if($(w).hasClass("extended")){y();return false;}domTarget=x.get(0);domTarget.restore=y;
domTarget.position=function(){x.css({visibility:"hidden","min-width":s,"z-index":10000000000}).addClass("extended");x[0]["extender"]=w;var B=x.outerHeight(),C=u.top-B;
if((u.top-x.height())<5){C=u.top+$(w).height();}if($(w).hasClass("right")){var D=$(g).width()-($(w).outerWidth()+u.left);x.css({display:"",visibility:"",position:"absolute",top:C,right:D});
}else{x.css({display:"",visibility:"",position:"absolute",top:C,left:u.left});}$(w).addClass("extended").css({"z-index":11});$(g).unbind("resize",y).bind("resize",y).unbind("click",y).bind("click",y);
};domTarget.position();x.find("input[type=text]").focus();});$(".box-tab").live("click",function(){$(this).parent().find(".selected").removeClass("selected");
$(this).addClass("selected");$("#tabs-content > div").css("display","none");var r=$(this).attr("rel"),s=$(r);s.css("display","");var t=s.find("input[name=ctab]");
if(!t[0]){t=$(document.createElement("input")).attr({type:"hidden",name:"ctab"}).appendTo(s);}if(r){t.val(r.replace("#tab-",""));}$(a.body).find(".message").remove();
a.func.resize();});$(document.body).delegate("input.line-check","click",function(s){if(s.currentTarget.type.toLowerCase()=="radio"){var r=$(s.currentTarget).closest("table");
$("tr.selected-row",r).removeClass("selected-row");}$(this).closest("tr").toggleClass("selected-row");});$("button.pulsar").live("click",function(){if($(this).attr("rel")){var r=$($(this).attr("rel"))[0];
if(r){$(".selected",r).not(this).removeClass("selected");}}$(this).toggleClass("selected");});$(".slideToggle").live("click",function(){var r=$(this).data("target");
if($(r).is(":visible")){$(this).text($(this).data("uncompressedtext"));}else{if(!$(r).is(":visible")){$(r).trigger("appears");}$(this).text($(this).data("compressedtext"));
}if($(this).data("after")=="delete"){$(this).remove();}$(r).slideToggle();});$(".toggle").live("click",function(){var v=$(this).data("info");if(v=="show"){$(this).removeClass("show-toggle");
$(this).addClass("hide-toggle");$(this).data("info","hide");}else{if(v=="hide"){$(this).removeClass("hide-toggle");$(this).addClass("show-toggle");$(this).data("info","show");
}}var u=$(this.parentNode.parentNode.parentNode.parentNode).data("ishierarchy");if(u=="yes"){if(!confirm(agd.strings.alert_desasignar_elementos_papelera)){return false;
}}var r=$(this).attr("target"),s=$(this).attr("rel"),t=$(r);if(s&&t[s]){t[s](function(){a.func.resize();});}else{t.toggle();if(a.exists()){a.func.resize();
}}if(this.tagName=="INPUT"&&this.type=="checkbox"||this.tagName=="IMG"||this.tagName=="SPAN"){return true;}return false;});$(".jGrowl").live("click",function(){agd.func.jGrowl(this.name,$(this).attr("rel"));
});$("button.send").live("click",function(){$.data(this.form,"sender",this);});$(".detect-click").live("click",function(){if(!this.form){return false;}var s=$(this).attr("name"),r=$(this).attr("value");
$input=$(document.createElement("input")).attr({type:"hidden",name:s,value:r}).appendTo(this.form);});$(".module").click(function(){location.href=$(this).attr("href");
});$(".simple-select").live("click",function(u){var t=$(this),r=$(this).find("ul"),s=r.css("height");function v(){try{t.css("position","inherit");}catch(w){}r.css({height:"21px",position:"inherit"}).removeClass("open");
}if(s=="21px"){t.css("position","relative");r.css({height:"100%",position:"relative"}).addClass("open");g.setTimeout(function(){$(document).one("click",v);
},100);}else{v();}});$(".convert-editable").live("click",function(v){var t=$($(this).attr("target")),s=$(this).attr("href"),u=$(t).text(),B=$($(this).attr("rel")),z=$(t).height(),y=$(this).data("minheight"),x=$(this).data("maxheight"),A=this;
if(t.children("textarea").length>0){$(t).empty().append(u.replace(/\n/g,"<br />\n"));return false;}if(z>x){z=x;}else{if(z<y){z=y;}}var r={13:false,16:false};
var w=$(document.createElement("textarea")).addClass("converted-editable").html(u).height(z).keypress(function(C){if(C.keyCode==13&&r[16]==false){return false;
}}).keyup(function(E){if(E.keyCode in r){r[E.keyCode]=true;if(r[13]&&r[16]){return false;}}var D=w.addClass("loading-editable").val();if(B.length){B.html(agd.strings.editing_comment).attr("title",agd.strings.shift_plus_enter).tipsy();
$(A).hide();}if(E.keyCode==13){if(B.length){var C=$(document.createElement("img")).attr("src",agd.inlineLoadingImage);B.html(C);}var F=$.get(s,{comentario:D},function(G){$(t).empty().append(w.val().replace(/\n/g,"<br />"));
if(B.length){var H=F.getResponseHeader("Content-type");if(H.indexOf("application/json")!==-1){agd.actionCallback(G);}else{if(parseInt(G)){B.html(agd.strings.saved);
g.setTimeout(function(){if(B.length){B.html("");}},3000);agd.navegar(ahistory.curLocation,true);}else{B.html(agd.strings.saved);}}}});return false;}else{r={13:false,16:false};
}}).keydown(function(C){if(C.keyCode in r){r[C.keyCode]=true;}});$(t).empty().append(w);return false;});$("a.multiple").live("click",function(){var w=$(this),r=$(this).closest("form"),u=w.attr("name"),v=w.closest("tr"),t=v.clone(true),x=w.text();
switch(x){case"+":v.after(t);t.find("input[type='checkbox']").removeAttr("checked");$td=t.find('input[name="'+u+'"]').val("").parent();if(!t.find(".rest").length){var s='<a class="multiple rest" name="'+u+'">-</a>';
$td.find("a.multiple").after(s);w.after(s);}break;case"-":v.remove();$rest=r.find('input[name="'+u+'"]');if($rest.length==1){$rest.parent().find(".rest").remove();
}break;}a.func.resize();return false;});var n=$("#menu-avisos");if(n.length){n.find(".click-bar").click(function(r){r.preventDefault();});}$("#ayuda-buscar").click(function(){try{var r=function(z){var D=$("#menu-ayuda-buscar")[0];
if(D){var A=$("#buscador"),C=$("#buscar",A),w=$("#boton-buscar",A),y=$("#boton-ayuda",A),u=$("#boton-busquedas",A),t=C.outerWidth()+w.outerWidth()+y.outerWidth()-2+u.outerWidth()+30,F=A.height(),x=A.offset(),v=x.left,B=x.top+F;
$(D).css({position:"absolute",right:0,top:B,width:"400px",display:""});}else{if(!z){var E=$(document.createElement("div")).attr({id:"menu-ayuda-buscar"}).css("display","none").appendTo(document.body);
agd.func.queryCache("gettpl.php?tpl=ayudabuscar",function(G){$(E).html(G);$(".cbox-close-title").click(function(){$(E).remove();});});g.setTimeout(function(){r();
},0);}}};$(g).resize(function(){r(true);});r();}catch(s){alert(s);}return false;});$(document).bind(a.event.load,function(s,u){$wrap=$(a.body);if(navigator.appVersion.indexOf("Chrome")!==-1){$wrap.find("button.btn span span").each(function(y,w){var x=$(this).html();
$(this).html("&nbsp;"+x+"&nbsp;");});}if($.browser.webkit===true){$wrap.find("textarea").each(function(){var w=this;w.lastHeight=$(w).outerHeight(),w.lastWidth=$(w).css("width");
$(this).mouseup(function(){if(w.lastWidth!=$(w).css("width")){$(w).css("width","99%");}if(w.lastHeight!=$(w).outerHeight()){a.func.resize(function(){$(w).focus();
});}$(w).focus();});});}if(!$wrap.find(".cbox-close-title").length){var v=$(document.createElement("div")).addClass("cbox-close-title").attr("title","Cerrar").click(function(){a.func.close();
});$boxtitle=$wrap.find(".box-title");if($boxtitle.length){if($.browser.msie){v.css("float","right");var r=$wrap.width();if(r>960){$(a.body+" > div").css("width","650px");
a.func.resize();}}$wrap.find(".box-title").prepend(v);}}$(document).one("checkevents_complete",function(){try{if($wrap.get(0).scrollHeight!=$wrap.get(0).offsetHeight){a.func.resize();
}}catch(w){}});setTimeout(function(){$wrap.find("input:first").focus();},100);var t=$wrap.find("#reloader, .reloader");if(t.length!=0){t.removeAttr("id").removeClass("reloader");
agd.navegar();return;}agd.checkEvents($wrap);});agd.elements.navegacion=$("#informacion-navegacion")[0];agd.elements.asyncFrame=$("#async-frame")[0];agd.elements.main=$("#main")[0];
agd.elements.menu=$("#main-menu ul")[0];if(g.UserVoice){$(document).one("checkevents_complete",function(){UserVoice.push(["showTab","classic_widget",{mode:"feedback",primary_color:"#cc6d00",link_color:"#007dbf",forum_id:207575,tab_label:"Mejora dokify",tab_color:"#cc6d00",tab_position:"bottom-left",tab_inverted:false}]);
});}shortcut.add("Alt+Right",function(s){var r=$("a.next-page",agd.views[agd.views.activeView].elements.bottomright).attr("href");if(r){location.href=r;
}return false;});shortcut.add("Alt+Left",function(s){var r=$("a.prev-page",agd.views[agd.views.activeView].elements.bottomright).attr("href");if(r){location.href=r;
}return false;});shortcut.add("Alt+Down",function(t){if(agd.views.activeView=="data"){var r=agd.views[agd.views.activeView].elements.table,s=r.current;
$(s).removeClass("current");if(!(next=s.nextSibling)){next=r.rows[0];}$(next).addClass("current");next.setShortCuts();agd.views[agd.views.activeView].elements.table.current=next;
}return false;});shortcut.add("Alt+Up",function(t){if(agd.views.activeView=="data"){var r=agd.views[agd.views.activeView].elements.table,s=r.current;$(s).removeClass("current");
if(!(prev=s.previousSibling)){prev=r.rows[r.rows.length-1];}$(prev).addClass("current");prev.setShortCuts();agd.views[agd.views.activeView].elements.table.current=prev;
}return false;});shortcut.add("Ctrl+L",function(){require([agd.staticdomain+"/js/app/sidebar.min.js?"+__rversion],function(){mostrarCapaColumnaLateral("configurar/llamada/nuevo.php?type=sidebar&action=codigo",400);
});});shortcut.add("Alt+q",function(){var r;r=$(document.createElement("iframe"));r.css({position:"fixed",bottom:0,right:0,border:0,height:"240px",width:"320px"});
r.get(0).src="/qr-reader/iframe.html";r.appendTo("body");});$(document).on("qr",function(u,s){var r=document.createElement("a"),t;r.href=s;if(r.host.indexOf("dokify")!==-1||r.host.indexOf("192.168")!==-1){t=r.pathname.substr(1).split("/");
if(t[1]!==d&&!isNaN(t[1])){agd.func.open("ficha.php?src=qr&m=empleado&poid="+t[1]);}}});$(document).bind("sidebar-open",function(){var t=$("#sidebar"),r=t.find("#form-line-empresa a");
if(r){var s=r.data("uid");if(s){agd.func.changeProfile(s,true);}}agd.checkEvents(t);});shortcut.add("Ctrl+E",function(){try{var r=function(){$("#credits").css({position:"absolute"});
var u=new html2canvas(document.body,{ready:function(w){$("#credits").css("position","fixed");var v=w.canvas.toDataURL("image/png");$.post("labs/canvas/share.php","img="+encodeURIComponent(v),function(x){if(x=="1"){alert("Ok");
}else{alert("Error");}});}});};alert("Acepta para enviar");var s=create("script",{src:agd.staticdomain+"/js/canvas/html2canvas.min.js",onload:r});document.body.appendChild(s);
}catch(t){}});shortcut.add("Ctrl+A",function(){if(agd.views.activeView=="data"){try{var s=$("#table-container input[type='checkbox']"),r=s.get(0).checked;
s.attr("checked",!r).each(function(v,w){$(w.row).toggleClass("selected-row");if(v===(s.length-1)){var u=agd.func.showSelectedItems();}});}catch(t){}}});
shortcut.add("Ctrl+N",function(){if(agd.views.activeView=="data"){$("#left-panel img[src$='boxadd.png']").parent().click();}});shortcut.add("Ctrl+D",function(){if(agd.views.activeView=="data"){var r="eliminar.php?confirmed=1&send=1",s=agd.func.selectedRows(),t=s.length,u=agd.func.array2url("uids",s);
r+="&m="+agd.tables.current+"&"+u;if(t&&confirm("Continuar?")){$.getJSON(r,function(v){agd.actionCallback(v);ahistory.onChange(ahistory.curLocation,true);
});}}return false;});shortcut.add("Ctrl+M",function(){$("#link-perfiles").click();});shortcut.add("Ctrl+Shift+Alt+G",function(){a.func.open({html:'<audio src="'+agd.staticdomain+'/audio/gueba.ogg" loop controls autoplay="true"></audio>'});
});$(g).scroll(function(){if(agd.tables.current){var u=$(".keep-visible");if(u.length){var v=u.offset(),t=(u.data("top"))?u.data("top"):(v.top||0),r=$(g).scrollTop(),s=r-t;
if(!u.data("top")){if(s>-15){u.data("top",t);u.css({width:$("#main").width(),left:0,top:r+"px",position:"absolute"});if(agd.tables.current.indexOf("asignacion-")!=-1){u.addClass("float");
}}}else{if(s>-15){u.css({top:r+"px"});}else{u.css({width:"",position:"",top:"",left:""}).removeClass("float");u.data("top",0);}}}}});$(document.body).delegate("#left-panel","dragover",function(r){if(r&&r.target&&r.target.src&&r.target.src.indexOf("papelera.png")!=-1){$(r.target).attr("src",agd.staticdomain+"/img/48x48/iface/red_papelera.png");
}}).delegate("#left-panel","dragleave",function(r){if(r&&r.target&&r.target.src&&r.target.src.indexOf("papelera.png")!=-1){$(r.target).attr("src",agd.staticdomain+"/img/48x48/iface/papelera.png");
}}).delegate("#left-panel","drop",function(t){try{$(t.target).attr("src",agd.staticdomain+"/img/48x48/iface/papelera.png");var u=t.originalEvent.dataTransfer.getData("text");
if(u=="#config-link"){var r=$("#config-link").remove();agd.func.open(agd.staticdomain+"/img/common/wtf.jpg");}if(!isNaN(u)){var s="enviar"+$(t.target).parent().attr("href").split("&")[0]+"&poid="+u;
agd.func.open(s);}}catch(t){}});$("#config-link").bind("dragstart",function(r){r.originalTarget.dataTransfer.setData("text","#config-link");});var p=[];
$(document.body).bind("dragover",function(v){var s=v.originalEvent.dataTransfer;if(s.files||(s.types&&s.types.contains&&s.types.contains("Files"))){var w=v.target,B=$(w).closest("tr").get(0);
if(!g.dragging){g.dragging=true;}if(B&&B.uid&&$(B).hasClass("drop-area")&&!B.over){B.over=true;var A=$(B),y=A.outerHeight(),x=B.uid,u=$("td",A).length,E=$("td.position-colum+td > a",A).attr("title"),C=$(document.createElement("strong")).html(E),t=$(document.createElement("tr")).addClass("file-drop"),r=$(document.createElement("td")).attr("colspan",u).css({"line-height":y+"px","text-align":"center",padding:"0px"}).appendTo(t),z=$(document.createElement("div")).addClass("line-drop").html("Soltar aqui para cargar el documento ").append(C).appendTo(r);
z.attr("name",E);z[0].row=B;z.get(0).restore=function(F){t.remove();$(z[0].row).show();B.over=false;};var D=function(){z[0].row=this;$("a.go-back",z[0]).click(function(){delete (z[0].row.progress);
z[0].restore();});t.insertBefore(this);$(this).hide();};z[0].show=D;D.call(B);B.upload=z.get(0);z.one("dragleave",z.get(0).restore);}else{if(B&&$(B).hasClass("file-drop")){return false;
}}}return false;}).bind("drop",function(w){var s=w.originalEvent.dataTransfer;var A=agd.uploadPath;if(s&&(files=s.files)&&(file=files[0])){var x=w.target,B=$(x).closest("div"),v=2200,F=B.get(0).row,u=B[0].row.uid,t="&o="+ahistory.getValue("poid")+"&m="+ahistory.getValue("m")+"&poid="+u,r=(new Date());
if(B.hasClass("line-drop")&&files[0]){var D=agd.func.extractDate(file.name);if(!D||!D.getDate()){D=prompt("No encuentro una fecha valida. Por favor indica la fecha de Emision",r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear());
}else{D=D.getDate()+"/"+(D.getMonth()+1)+"/"+D.getFullYear();}if(!D||!$.trim(D)){if(B.get(0).restore){B.get(0).restore();}return false;}var z="anexar.php?src=ajax&type=modal&send=1&fecha="+D+t;
F.progress=0;B.unbind("dragleave",B.get(0).restore);var C=function(J){if(J.lengthComputable){var H=Math.round((J.loaded*100)/J.total),I=(v*H)/100,G=v-I;
B.stop().addClass("progress").css("background-position","-"+G+"px 0").html("<strong>Cargando "+H+"%</strong>");F.progress=H;}};var y=function(G){$.getJSON(z,function(H){if(H.error||!H){B.removeClass("uploading").addClass("error").html(H.error);
g.setTimeout(function(){B[0].restore();},5000);}if(H.upload){$volver=$(document.createElement("a")).addClass("go-back").html("Volver").click(function(){delete (F.progress);
$(F).find(".docinfo").removeAttr("className").addClass("docinfo stat_1").html(agd.strings.anexado);B[0].restore();});B.removeClass("uploading").addClass("success").html("<strong>"+B.attr("name")+" cargado correctamente</strong>");
B.append(document.createTextNode(" | "+D+" | "));$(document.createElement("img")).attr({src:agd.staticdomain+"/img/famfam/spellcheck.png"}).appendTo(B);
$(document.createElement("a")).html("Validar").addClass("box-it go-back").attr("href","validar.php?src=ajax"+t).click(function(){$volver.click();}).appendTo(B);
B.append(document.createTextNode(" | "));$(document.createElement("img")).attr({src:agd.staticdomain+"/img/famfam/stop.png"}).appendTo(B);$(document.createElement("a")).html("Anular").addClass("box-it go-back").attr("href","anular.php?src=ajax"+t).click(function(){$volver.click();
}).appendTo(B);B.append(document.createTextNode(" | "));$(document.createElement("img")).attr({src:agd.staticdomain+"/img/famfam/arrow_undo.png"}).appendTo(B);
$volver.appendTo(B);}});};var E=file.upload(A,{onprogress:C,onload:C,onsuccess:y,onerror:function(G){B.removeClass("uploading").addClass("error").html("Ocurrio un error al anexar el fichero...");
g.setTimeout(function(){B.get(0).restore();},5000);}});p.push(E);B.addClass("uploading").html("<strong><img src='"+agd.inlineLoadingImage+"' /> Cargando...</strong>");
}}return false;});g.onbeforeunload=function(){try{if(g.modalconfirm&&!$.browser.msie){return agd.strings.pregunta_cerrar_ventana;}$.each(p,function(t,v){try{v.abort();
}catch(u){}});$(agd.elements.asyncFrame).attr("src","");var s=(g.ActiveXObject)?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();s.open("GET","salir.php?mode=ajax",false);
s.send(null);}catch(r){}};var m=function(){var r=this;$(r).attr("src","/blank.html");setTimeout(function(){$(r).one("load",m);},1000);};$(agd.elements.asyncFrame).one("load",m);
}};if("File" in g){File.prototype.upload=function(m,n){n=n||{};n.method=(n.method)?n.method.toLowerCase():"put";n.onprogress=n.onprogress||function(){};
n.onload=n.onload||function(){};n.onsuccess=n.onsuccess||function(){};n.onerror=n.onerror||function(){};var p=new XMLHttpRequest();p.upload.onprogress=n.onprogress;
p.upload.onload=n.onload;p.upload.onerror=n.onerror;p.open(n.method,m,true);var o;if(this.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"){o="application/msword";
}else{if(this.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"){o="application/vnd.ms-excel";}else{o=this.type;}}p.setRequestHeader("Content-Type","multipart/form-data");
p.setRequestHeader("X-File-Name",encodeURIComponent(this.name));p.setRequestHeader("X-File-Size",this.size);p.setRequestHeader("X-File-Type",o||"");p.onreadystatechange=function(){if(p.readyState==4){if(p.status==200){n.onsuccess.apply(p);
}else{onerror(JSON.stringify({responseText:p.responseText,status:p.status,statusText:p.statusText,readyState:p.readyState}),"js",0);n.onerror.apply(p,[p.responseText]);
}}};p.send(this);return p;};}}(window));