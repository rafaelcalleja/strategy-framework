(function(o,m){var j,d=$("#viewport"),p=$("#top-bar"),q=$("#sidebar"),r=$("#page"),x=$("#page-body"),k=$("#page-content"),g=$("#data-content"),C=$("#box-layer"),y=$("#loading"),t=$("#search-box"),B=$("#menu-link"),h=$("#view-offline"),E=navigator.onLine;
var u=["empleado","empresa","maquina"];var z=function(F){for(i in u){F=F.replace("ficha.php?m="+u[i],"documentos.php?m="+u[i]);}return F;};var b=function(O,J,L,N,F,I){var H=O[O.key],M=$(document.createElement("tr"));
var P=$(document.createElement("td")).attr("align","left").addClass("checkbox-colum").appendTo(M);$(document.createElement("input")).attr({type:"checkbox"}).appendTo(P);
if(O.className){M.addClass(O.className);}var R=0;$.each(H,function(V,U){R++;if(typeof(U)=="string"){$td=$(document.createElement("td")).html(U);}else{var T=(U.href)?"a":"span";
if(U.href){U.href=z(U.href);}var S=$(document.createElement(T)).attr(U).prop(U);if(T!="a"){S.find("a").each(function(){this.href=z(this.href);});}$td=$(document.createElement("td")).append(S);
}M.append($td);});if(O.inline){var K=0;$.each(O.inline,function(U,V){var S=$(document.createElement("td")).addClass("inline-colum");if(V&&(V[0]||V.width)){if(isNaN(U)){$(S).addClass(U);
$(document.createElement("span")).addClass("light").html(U+": ").appendTo(S);}if(V.img){var T=$(document.createElement("img"));if(typeof V.img=="object"){T.attr(V.img);
}else{T.attr("src",V.img);}T.appendTo(S);$(document.createTextNode(" ")).appendTo(S);}$.each(V,function(ab,W){var aa=V[ab];if(isNaN(ab)){switch(ab){default:$(S).attr(ab,aa);
break;case"img":return;break;case"className":$(S).addClass(aa);break;}return;}var Z=(W.className)?W.className:"",X="";if(W.nombre){if(W.tipo&&W.oid){X="ficha.php?m="+W.tipo+"&oid="+W.oid;
}if(W.href){X=W.href;}if(X&&X.split("")[0]!=="#"){Z+=" box-it";}$a=$(document.createElement("a")).addClass("ucase inline-text "+Z).html(W.nombre).appendTo(S);
if(X){$a.attr({href:X});}if(W.img){$(document.createElement("img")).css("margin-right","4px").attr(W.img).appendTo(S);}}if(W.extra){$.each(W.extra,function(ac,ad){$(S).append(ad);
});}var Y=$(document.createElement("div")).html("").addClass("line-block inline-separator").attr("width","4px").appendTo(S);});M.append(S);K++;}return false;
});}K=(K)?K:0;R=R+K;if(L){if((!O.options||!O.options.length)){R--;}if(R<L){var Q=L-R;while(Q--){var G=$(document.createElement("td")).html("&nbsp;").appendTo(M);
}}}return M.get(0);};var a=function(F){var G=F.indexOf("/agd/");if(G!==-1){F=F.substring(G+5);}return location.hash=F;};var D=function(){C.empty().css({width:"0px"}).hide();
};var w=function(F,G){G=G||function(){};F=F||document.body;$(F).find(".form-to-box").each(form2box);$(F).find(".box-it").click(function(H){H.preventDefault();
a(this.href);});$(F).find(".async").on("click",function(M){M.preventDefault();var L=$(this),H=$(L.data("target")),J=this.tagName.toLowerCase(),I=L.data("href");
if(J=="button"){var K=$(document.createElement("img")).css("margin-left","1em").attr("src",agd.inlineLoadingImage).appendTo(L);L.attr("disabled",true);
}$.get(I,function(N){H.html(N);if(J=="button"&&L.parent()){K.remove();}});});$(F).find("button[href]").on("click",function(J){J.preventDefault();var I=$(this).attr("href"),H=I.split("");
if(H[0]=="#"){document.location=I;}else{a(I);}});$(F).find("form.async-form").on("submit",function(J){var I=$(this),H,K;H=I.attr("action");K=I.attr("method").toUpperCase();
$.ajax({method:K,url:H,data:I.serialize(),dataType:"json",success:function(L){if(L.refresh){v();}}});return false;});$(F).find(".load").click(function(M){var L=$(this),H=$(L.data("target")),I=L.attr("href");
if(!$.trim(I)){return false;}var K=$(document.createElement("img")).attr("src",agd.inlineLoadingImage);var J=H.html();L.html(K);$.get(I,function(N){K.remove();
H.empty().append(N);agd.checkEvents(H);});M.stopImmediatePropagation();return false;});$(F).find(".map").each(function(){var H=this;require([agd.staticdomain+"/js/maps.min.js?"+__rversion],function(I){require(["https://maps.googleapis.com/maps/api/js?key="+agd.gkey+"&sensor=false&callback=onMapsLoaded"],function(){new I(H);
});});});G();};var f=function(){var H=C.outerHeight()-(C.find(".box-title").outerHeight()||0)-(C.find(".cboxButtons").outerHeight()||0),G=$(C.find(".ficha,  .box-message-block").get(0));
H=H-(parseInt(G.css("padding-top"))||0)-(parseInt(G.css("padding-bottom"))||0)-(parseInt(G.css("border-top"))||0)-(parseInt(G.css("border-bottom"))||0);
G.css("height",H+"px");var F=C.find("ul.item-options");F.css("height",H+"px");};var c=function(){var F,I,H,G={};I=location.search.substring(1).split("&");
for(F in I){H=I[F].split("=");G[H[0]]=H[1];}return G;};var n=function(H){var F;q.removeClass("open");if(typeof H==="string"){g.html(H);w(g,function(){y.hide();
$(o).trigger("server-response");});return;}if(H.action){switch(H.action){case"restore":F="/login.php?goto="+encodeURIComponent(location.hash);params=c();
if(params.origin){F+="&origin="+params.origin;}location.href=F;break;case"go":return location.href=H.action.go;break;}}if(H.view){$("#page-content > div").hide();
$("#page-content div#view-"+H.view).show();}if(H.selector){$.each(H.selector,function(K,L){$(K).html(L);w(K);});}if(H.open){a(H.open);}g.html('<table id="table-data" cellspacing="0" border="0"></table>');
if(datos=H.datos){var G=g.find("#table-data");var J=H.maxcolums||0;var I=function(){var O=$(document.createElement("tr")).addClass("pagination"),P=$(document.createElement("td")).appendTo(O).attr({colspan:J+1}),M=H.paginacion.from+" - "+H.paginacion.to+" <span style='font-size:14px;text-align:top'>|</span> "+H.paginacion.of+" total",N="<div style='float:left'>"+M+"</div>";
var K=$(document.createElement("a")).attr({href:"#"+H.paginacion.href.prox.replace("/agd/",""),"class":"next-page"}).html("&raquo;");var L=$(document.createElement("a")).attr({href:"#"+H.paginacion.href.prev.replace("/agd/",""),"class":"prev-page"}).html("&laquo;");
P.html(N);if(H.paginacion.from!=1){P.append(L);}if(H.paginacion.to!=H.paginacion.of){P.append(K);}O.appendTo(G);w(G,function(){y.hide();});};if(datos.length){$.each(datos,function(K,L){var M=b(L,null,J,K,datos.length,H);
G.append(M);if(K===datos.length-1){I();}});}}else{g.html("<div style='text-align: center'>No hay resultados</div>");y.hide();}$(o).trigger("server-response");
};var v=function(){y.show();if(j&&j.abort){j.abort();}j=$.ajax({url:location.hash.replace("#",""),cache:false,dataType:"json",data:"type=ajax",success:n,complete:function(G,F,H){if(o.ga){ga("send","pageview","/agd/"+location.hash);
}if(F=="parsererror"){n(G.responseText);}}});};w();g.click(function(F){try{if(F.target.tagName.toLowerCase()!="a"&&C.width()){D();}}catch(F){}});function s(F){var I,H;
if(E===false){return false;}I=new Date().getTimezoneOffset()/60;H=location.hash.indexOf("src=qr")!==-1;if(H){F();F=null;}$.getJSON("userdata.php",{tz:I},function(J){if(J.strings){agd.strings=J.strings;
}if(J.maxfile){agd.usermaxfile=J.maxfile;}if(J.user){agd.user=J.user;}if(J.gkey){agd.gkey=J.gkey;}if(F){F(J);}});if(navigator.geolocation){function G(J){var K=J.coords.latitude+","+J.coords.longitude;
$.post("userdata.php?option=location",{location:K});}navigator.geolocation.getCurrentPosition(function(J){G(J);setTimeout(function(){navigator.geolocation.getCurrentPosition(G,null,{enableHighAccuracy:true,maximumAge:0});
},500);},function(J){if(J.code===3){navigator.geolocation.getCurrentPosition(G,null,{enableHighAccuracy:true,maximumAge:0});}},{timeout:10000});}}$("#menu-link").click(function(){var F=q.hasClass("open");
if(F){q.removeClass("open");}else{q.addClass("open");}return false;});r.click(function(){var F=q.hasClass("open");if(F){q.removeClass("open");}});o.agd={staticdomain:__resources,inlineLoadingImage:__resources+"/img/common/ajax-loader.gif",func:{validateForm:function(){return true;
},open:function(F){a(F);}}};setTimeout(function(){document.createElement("img").src=agd.inlineLoadingImage;$("#home-icon").attr("src",function(){return $(this).data("src");
});},100);if(!location.hash){location.href="#home.php";}o.onhashchange=v;function e(){E=true;v();t.show();k.show();B.show();h.hide();}function A(){E=false;
t.hide();k.hide();q.removeClass("open");B.hide();h.show();}$(document).on("online",e);$(document).on("offline",A);if(E==false){A();}if(location.hash){s(function(){v();
});}function l(){var G=$(o).width(),F=$(o).height(),H=g.height();d.css("width",(G+200)+"px");if(F<H){F=H;}x.css("height",F+"px");x.css("width",G+"px");
C.css("height",k.height()+"px");q.css("height",$("body").height()+"px");}setTimeout(function(){o.scrollTo(0,1);o.scrollTo(0,0);},1000);l();$(o).one("server-response",l);
$(o).on("resize",l);$("#next-qr").on("touchstart",function(F){$(this).addClass("actived");return false;});$("#next-qr").on("touchend",function(G){var F=this;
location.href=this.href;setTimeout(function(){$(F).removeClass("actived");},300);return false;});})(window);