define(["vendor/jquery-ui-1.11.1.min","vendor/facedetection/ccv","vendor/facedetection/face",],function(){$.fn.faceDetection=function(e){var d={confidence:null,start:function(h){},complete:function(h,i){},error:function(h,j,i){}};
$.extend(d,e);var c=$(this);d.start(c);if(!c.is("img")){d.error(c,1,"This is not an image.");d.complete(c,[]);return[];}function b(i,h){h.width=i.offsetWidth;
h.height=i.offsetHeight;}function g(n){var i=document.createElement("canvas");var h=i.getContext("2d");i.width=n.offsetWidth;i.height=n.offsetHeight;h.drawImage(n,0,0);
var o=h.getImageData(0,0,i.width,i.height);var m=o.data;var l,k,j=i.width*i.height*4;while(j>0){m[j-=4]=m[l=j+1]=m[k=j+2]=(m[j]*0.3+m[l]*0.59+m[k]*0.11);
}h.putImageData(o,0,0);return i;}function a(){try{var m=ccv.detect_objects(g(c.get(0)),cascade,5,1);}catch(o){d.error(c,2,"This image is not valid");return[];
}var l=c.position().left;var k=c.position().top;var h=c.offset().left;var p=c.offset().top;var n=[];for(var j=0;j<m.length;j++){if(d.confidence==null||m[j].confidence>=d.confidence){n.push({x:Math.round(m[j].x),y:Math.round(m[j].y),width:Math.round(m[j].width),height:Math.round(m[j].height),positionX:l+m[j].x,positionY:k+m[j].y,offsetX:h+m[j].x,offsetY:p+m[j].y,confidence:m[j].confidence,neighbour:m[j].neighbour});
}}return n;}var f=a();d.complete(c,f);return f;};});