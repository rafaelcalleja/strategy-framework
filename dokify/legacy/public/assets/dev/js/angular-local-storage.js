(function(g,i,b){var k=i.isDefined,c=i.isUndefined,l=i.isNumber,m=i.isObject,e=i.isArray,h=i.extend,a=i.toJson,d=i.fromJson;function f(n){return/^-?\d+\.?\d*$/.test(n.replace(/["']/g,""));
}var j=i.module("LocalStorageModule",[]);j.provider("localStorageService",function(){this.prefix="ls";this.storageType="localStorage";this.cookie={expiry:30,path:"/"};
this.notify={setItem:true,removeItem:false};this.setPrefix=function(n){this.prefix=n;return this;};this.setStorageType=function(n){this.storageType=n;return this;
};this.setStorageCookie=function(o,n){this.cookie={expiry:o,path:n};return this;};this.setStorageCookieDomain=function(n){this.cookie.domain=n;return this;
};this.setNotify=function(n,o){this.notify={setItem:n,removeItem:o};return this;};this.$get=["$rootScope","$window","$document","$parse",function(u,C,J,r){var D=this;
var F=D.prefix;var I=D.cookie;var A=D.notify;var H=D.storageType;var E;if(!J){J=document;}else{if(J[0]){J=J[0];}}if(F.substr(-1)!=="."){F=!!F?F+".":"";
}var v=function(M){return F+M;};var B=(function(){try{var M=(H in C&&C[H]!==null);var N=v("__"+Math.round(Math.random()*10000000));if(M){E=C[H];E.setItem(N,"");
E.removeItem(N);}return M;}catch(O){H="cookie";u.$broadcast("LocalStorageModule.notification.error",O.message);return false;}}());var z=function(M,N){if(c(N)){N=null;
}else{if(m(N)||e(N)||l(+N||N)){N=a(N);}}if(!B||D.storageType==="cookie"){if(!B){u.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");
}if(A.setItem){u.$broadcast("LocalStorageModule.notification.setitem",{key:M,newvalue:N,storageType:"cookie"});}return x(M,N);}try{if(m(N)||e(N)){N=a(N);
}if(E){E.setItem(v(M),N);}if(A.setItem){u.$broadcast("LocalStorageModule.notification.setitem",{key:M,newvalue:N,storageType:D.storageType});}}catch(O){u.$broadcast("LocalStorageModule.notification.error",O.message);
return x(M,N);}return true;};var y=function(M){if(!B||D.storageType==="cookie"){if(!B){u.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");
}return w(M);}var N=E?E.getItem(v(M)):null;if(!N||N==="null"){return null;}if(N.charAt(0)==="{"||N.charAt(0)==="["||f(N)){return d(N);}return N;};var q=function(M){if(!B||D.storageType==="cookie"){if(!B){u.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");
}if(A.removeItem){u.$broadcast("LocalStorageModule.notification.removeitem",{key:M,storageType:"cookie"});}return p(M);}try{E.removeItem(v(M));if(A.removeItem){u.$broadcast("LocalStorageModule.notification.removeitem",{key:M,storageType:D.storageType});
}}catch(N){u.$broadcast("LocalStorageModule.notification.error",N.message);return p(M);}return true;};var o=function(){if(!B){u.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");
return false;}var M=F.length;var O=[];for(var N in E){if(N.substr(0,M)===F){try{O.push(N.substr(M));}catch(P){u.$broadcast("LocalStorageModule.notification.error",P.Description);
return[];}}}return O;};var t=function(M){M=M||"";var R=F.slice(0,-1);var P=new RegExp(R+"."+M);if(!B||D.storageType==="cookie"){if(!B){u.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED");
}return L();}var N=F.length;for(var O in E){if(P.test(O)){try{q(O.substr(N));}catch(Q){u.$broadcast("LocalStorageModule.notification.error",Q.message);
return L();}}}return true;};var G=(function(){try{return C.navigator.cookieEnabled||("cookie" in J&&(J.cookie.length>0||(J.cookie="test").indexOf.call(J.cookie,"test")>-1));
}catch(M){u.$broadcast("LocalStorageModule.notification.error",M.message);return false;}}());var x=function(Q,R){if(c(R)){return false;}else{if(e(R)||m(R)){R=a(R);
}}if(!G){u.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED");return false;}try{var P="",N=new Date(),M="";if(R===null){N.setTime(N.getTime()+(-1*24*60*60*1000));
P="; expires="+N.toGMTString();R="";}else{if(I.expiry!==0){N.setTime(N.getTime()+(I.expiry*24*60*60*1000));P="; expires="+N.toGMTString();}}if(!!Q){var O="; path="+I.path;
if(I.domain){M="; domain="+I.domain;}J.cookie=v(Q)+"="+encodeURIComponent(R)+P+O+M;}}catch(S){u.$broadcast("LocalStorageModule.notification.error",S.message);
return false;}return true;};var w=function(O){if(!G){u.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED");return false;}var P=J.cookie&&J.cookie.split(";")||[];
for(var N=0;N<P.length;N++){var M=P[N];while(M.charAt(0)===" "){M=M.substring(1,M.length);}if(M.indexOf(v(O)+"=")===0){var Q=decodeURIComponent(M.substring(F.length+O.length+1,M.length));
try{var S=JSON.parse(Q);return d(S);}catch(R){return Q;}}}return null;};var p=function(M){x(M,null);};var L=function(){var N=null,Q=null;var M=F.length;
var R=J.cookie.split(";");for(var P=0;P<R.length;P++){N=R[P];while(N.charAt(0)===" "){N=N.substring(1,N.length);}var O=N.substring(M,N.indexOf("="));p(O);
}};var n=function(){return H;};var s=function(N,M,Q,O){O=O||M;var P=y(O);if(P===null&&k(Q)){P=Q;}else{if(m(P)&&m(Q)){P=h(Q,P);}}r(M).assign(N,P);return N.$watch(M,function(R){z(O,R);
},m(N[M]));};var K=function(){var N=0;var O=C[H];for(var M=0;M<O.length;M++){if(O.key(M).indexOf(F)===0){N++;}}return N;};return{isSupported:B,getStorageType:n,set:z,add:z,get:y,keys:o,remove:q,clearAll:t,bind:s,deriveKey:v,length:K,cookie:{isSupported:G,set:x,add:x,get:w,remove:p,clearAll:L}};
}];});})(window,window.angular);