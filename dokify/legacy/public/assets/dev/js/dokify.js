define(["navigation","modal","live","confirmbox","storage/urlcache","getcontent"],function(c,u,h,d,k,x){var i,v,n,o,a,g,r,m={};n={".typeahead":"typeahead","#calendar":"calendar",".map":"maps","[target=modal]":"modal",".dropdown":"dropdown",".chart":"chart",".getcontent":"getcontent",".datepicker":"datepicker",".orgset":"assign","input[type=file]":"uploader","form[method]":"form",".progress":"progress",".checklist":"checklist","input.bulk":"bulk",".check-all":"check-all","#netgraph":"netgraph",".counter":"counter",".highlight-target":"highlight",".tabs":"tabs",'.tabmenu[data-rol="tab"]':"tabs-transition","input.sync":"sync","button.explain":"explain",".effect":"effects","form.validate":"validate","form.attach":"attach","form.comments":"comments","[data-tour]":"tour",".tour-container":"tour-loader","select[name=country]":"inputs.country",".scroll":"scroll",".face-detectable":"facedetection",".timeline":"timelist","input.filter":"qsfilter",".feed":"feed",".dropzone":"dropzone",".depends":"depends","input.tags":"tags",".simple-column-chart":"simple-column-chart",".stacked-column-chart":"stacked-column-chart",".stacked-bar-chart":"stacked-bar-chart",".reattachable":"reattachable",".attach-multistep":"attach-multistep",".interceptor-loading":"interceptor/loading",".call-code-show":"callcode",".action-message":"message-action",".qr-reader":"qr-reader",};
m.error=false;m.preload=false;i=$("#main");v=$("#navigating");a=$('head meta[http-equiv="App-Live"]').attr("content")==="true";g=$('head meta[http-equiv="Page-Route"]').attr("content");
r=$("#help");m.onError=function(z){m.error=z;alert(z);};String.prototype.find=function(z){return $(this.toString(),z);};$.fn.bindEvents=function(z){function B(F,E,G){var I,D,H=[];
for(D in n){if(n.hasOwnProperty(D)){I=$(F).find(D);if(I.length){H.push(n[D]);}}}if(H.length){require(H,E,G);}else{if(E){E();}}}function C(E,D){require([E],function(F){if(F.init){D.each(F.init);
}});}function A(E){var D,F;for(D in n){if(n.hasOwnProperty(D)){F=$(this).find(D);if(F.length){C(n[D],F);}}}$(this).find(".ga-track").each(function(){var G=$(this).data("ga-event");
$(this)[G](function(){ga("send","event",$(this).data("ga-category"),$(this).data("ga-action"),$(this).data("ga-label"),$(this).data("ga-value"));});});
$(this).find(".confirm").each(d.init);$(this).find(".toggle").click(function(){var H=$(this).data("target").find(),I=$(this).data("src");H.toggle();if(H.is(":visible")===false){$(this).removeClass("open");
$(document).trigger("disappear",[H]);if(H.data("toggle-uncheck")){H.find(":checked").removeAttr("checked");}}else{if(I){var G=H.hasClass("loaded");if(G===false){$.ajax({url:I,success:function(J){H.html(J);
H.addClass("loaded");}});}}$(this).addClass("open");$(document).trigger("appear",[H]);}});$(this).find(".toggle-class").click(function(){var H,G;H=$(this).data("class-list");
G=$(this).data("class-target");if(G){if(G.split("")[0]==="#"){G=G.find();}else{G=$(this).find(G);}}else{G=this;}$(this).trigger("toggle");return G.toggleClass(H);
});$(this).find(".toggle-disable").click(function(){var G=$(this).data("target").find();if(G){G.prop("disabled",this.checked);}});$(this).find(".toggle-lock").click(function(){var G=$(this).data("target"),H=$(this).data("unlock");
elementId=$(this).attr("id"),isChecked=this.checked;$(G).each(function(){targetId=$(this).attr("id");if(targetId===elementId){return true;}if(isChecked){$(this).prop("disabled",true);
$(this).prop("checked",false);}else{if(0===$(H+":checked").length){$(this).removeAttr("disabled");}}});});$(this).find("input.notify").each(function(){var I,H,J;
I=this.name+"-focus";H=$(this).data("notify");if(H){H=H.find();}else{H=this.form;}function G(){if(J){clearTimeout(J);}$(H).toggleClass(I);}$(this).focus(G).blur(function(){J=setTimeout(G,200);
});});$(this).find(".ensure").click(function(){var H,G;H=$(this).data("target").find();H.each(function(K,I){var M=$(I).is(":checked");function J(){$(I).removeClass("mandatory");
}var L=$(I).data("unchecked");if(M===false&&L!==undefined){$(I).addClass("mandatory");$(I).one("click",J);alert(L);G=true;return false;}});if(G===true){return false;
}});$(this).find(".cookie").click(function(){var H,J,K,I,G;H=$(this).data("cookie-name");J=$(this).data("cookie-value")||1;K=$(this).data("cookie-duration")||1;
I=$(this).data("cookie-hide").find();G=new Date();G.setTime(G.getTime()+(1000*60*60*24*K));if(I){I.remove();}document.cookie=H+"="+J+"; expires="+G.toUTCString()+"; path=/";
return false;});$(this).find(".autofocus,[autofocus]").first().focus();if(E){E.apply(this);}}this.each(function(){var D=this;function E(){A.apply(D,[z]);
}B(D,E);});};function y(){v.show();}function e(){NProgress.start();}function p(){NProgress.done();v.hide();}function q(){$(m.preload).remove();m.preload=false;
NProgress.done();}function b(z){z=z||$(document.body);var A=z.find(".toolbar");if(A.length){A.each(function(){var C=$(this),D,F,B,E;B=$(this).outerHeight();
F=$(document.createElement("div")).css("height",B+"px");D=$(this).offset();E=function(){var H=$(window).scrollTop(),G=C.hasClass("auto-scroll");if(D.top<H){if(G===false){C.addClass("auto-scroll").before(F);
}}else{if(G===true){C.removeClass("auto-scroll");C.find(".dropdown").trigger("hide");F.remove();}}};$(window).on("scroll",E);});}}function j(){require(["tour"],function(C){var A="start-tour";
var z=location.search.match(new RegExp("[?&]"+A+"=([^&]+)(&|$)"));if(z&&location.hash){z=location.hash.match(new RegExp("[?&]"+A+"=([^&]+)(&|$)"));}var B=z&&decodeURIComponent(z[1].replace(/\+/g," "));
if(true===/\d+/.test(B)){$.tourbus("destroyAll");$(".tourbus-cover").remove();$(".tourbus-highlight").removeClass("tourbus-highlight");tour=new C(B);tour.fetch();
}});}function w(){var A,z;A=$("#search");z=A.length!==0?A[0].form.action.parseURI():{};$(document).on("navigate:lock",y);$(document).on("navigate:before",e);
$(document).on("navigate:after",p);$(document).on("modal:before",e);$(document).on("modal:after",p);$(document).on("modal:stop",p);$(document).on("modal:error",p);
$(document).on("navigate:after",function(E,F,B,D){var C=F.getResponseHeader("X-Tour-Path");if(true===/\/app\/tour\/route/.test(C)){s(C);}});$(document).on("navigate:after",function(D,E,B,C){j();
});$(document).on("navigate",function(E,F,D){var C,B;if(m.preload){q();}if(m.error){return location.reload();}C=E.value.parseURI();if(C.query.q!==undefined&&janddress.base+C.pathname===z.pathname){if(A.val()!==C.query.q){A.val(C.query.q);
}}else{A.val("");}B=F.getResponseHeader("X-Page-Route");if(B){g=B;}D=D?D.find():i;D.html(E.response);$(document).trigger("redraw",D);window.scrollTo(0,0);
b(D);if(window.ga){ga("send","pageview","/app"+E.value);}});$(document).on("navigate:error",function(B,C){NProgress.done();i.html(C.responseText);});$(document).on("navigate:stop",p);
}function l(z){if(o){return z(o);}$.ajax({dataType:"json",url:"/app/settings/profile",beforeSend:function(A){A.setRequestHeader("X-Timezone-Offset",(new Date()).getTimezoneOffset()/60);
A.setRequestHeader("X-Timezone",jstz.determine().name());},success:function(A){o=A;z(o);},error:function(){z({});}});}function t(z){l(function(A){if(!A){return onError("Error desconocido");
}m.preload=z;w();if(a){h.init();}$(document).on("redraw",function(E,D){$(D).bindEvents();if(C()===false){require(["vendor/jquery.placeholder"],function(){$("input:not(.datepicker), textarea").placeholder();
});}});function B(G,H,D,E){if(E===true){return;}var F=location.href.parseURI();if(F.query.modal){u.load(F.query.modal);}else{if(F.hash){URIDataHash=F.buildHash();
if(URIDataHash.query.modal){u.load(URIDataHash.query.modal);}}}}function C(){return"placeholder" in document.createElement("input");}B();$(document).on("navigate:after",B);
$(document.body).bindEvents(function(){c.init();if(m.preload&&janddress.ready){q();j();}});b();if(false===$("html").hasClass("lt-ie7")&&false===$("html").hasClass("lt-ie8")&&false===$("html").hasClass("lt-ie9")){require(["live-chat"],function(D){new D(A.name,A.email,A.phone);
});}r.on("dropdown:open",function(D){ga("send","event","Help","Open",g);});s();});}function f(B){var z,A;z=this;this.dom=$(B);this.to=null;A=this.dom.data("type");
this.eventName=A?"message:"+A:"message";this.show=function(D,C){C=C||3000;if(this.to){clearTimeout(this.to);}this.dom.find("span").html(D);this.dom.css("top","0px");
this.to=setTimeout(function(){z.hide();},C);};this.hide=function(){if(this.to){clearTimeout(this.to);}this.dom.css("top","");};$(document).on(this.eventName,function(D,C){z.show(C);
});}function s(A){var z=$("#help-tours-available");z.html('<div class="spinner"></div>');if(typeof(A)!=="undefined"){z.data("src",A);}x.init.call(z);$(document).trigger("appear",[z]);
}$(".feedback").each(function(){var z=new f(this);$(this).click(function(){z.hide();});});m.init=t;m.getLoginData=l;currentLocale="es_ES";cookies="; "+document.cookie;
parts=cookies.split("; lang=");if(parts.length==2){currentLocale=parts.pop().split(";").shift();}m.urlCache=new k(currentLocale+"#");return m;});